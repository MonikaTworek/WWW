var EmbedSession=function(){var t,i,e={},n=1e6*Math.random()|0,r="kuulaframelock",o="kuulaframelock";try{i=window.sessionStorage}catch(e){}return i&&window.addEventListener("storage",function(){var e=i.getItem(r);n!=e&&t&&t()}),e.getId=function(){return n},e.lock=function(){i&&i.setItem(r,n)},e.lockPriority=function(){i&&i.setItem(o,n)},e.isLocked=function(){return!!i&&null!=i.getItem(r)},e.isPriorityLocked=function(){return!!i&&null!=i.getItem(o)},e.hasLock=function(){return!!i&&(e.isLocked()&&n==i.getItem(r))},e.onLock=function(e){t=e},window.addEventListener("unload",function(){i&&(i.removeItem(r),i.removeItem(o))}),e}(),PSH=function(){var i,n,r,o,a,s,u,c,l,M,A,e=-1<location.host.indexOf("kuula.co")||-1<location.host.indexOf("static.kuula.io"),t=("localhost"==location.host||-1<location.host.indexOf("192.168"))&&!0,g=e?"files.kuula.io":"dev-assets.kuula.io",d=null,h={list:[],index:0,get c(){return h.list[h.index]},get length(){return h.list.length}},f=function(e){M.linkBack.contains(e.target)||(EmbedSession.lock(),document.ext.off("click",c.activate.trigger),h.unlocked=!0,r.ext.hide(),document.body.style.cursor="default",setTimeout(L,100))},D=function(){n.ext.show(),n.opacity=0,n.classList.add("poster"),document.body.style.cursor="pointer",n.ext.bg(l.getCover(),function(){n.ext.transition({opacity:1},500,"ease-out")}),Simplrz.touch||(document.ext.on("mouseover",function(){document.body.classList.add("over-embed")}),document.ext.on("mouseout",function(){document.body.classList.remove("over-embed")})),c.activate.on(f),r.ext.show(),document.ext.on("click",c.activate.trigger)},N=function(e){"collection"==(e=e)&&(e=h.c),A&&A.setCurtain(!0);var t=function(e){0==e.status?(l=PSH.PostData(e.payload),d=l,c.currentPost=l,PSH.ViewerUtil.setPostData(d),Simplrz.webgl?L():n.ext.bg(l.getCover())):(EXT.select(".info").ext.hide(),EXT.select(".not-found").ext.show("flex"))};if(KUULA_POST.id==e){t(JSON.parse(atob(KUULA_POST.data)))}else{var i="api/?action=get&id=%1".replace("%1",e);Loader.loadJSON(i,t)}},y=function(){c.showPreloader.value=!1,n.ext.hide(),A.resume(),A.setCurtain(!1),h.list.length<2&&(PSH.ViewerUtil.hideInstruction()||o.ext.show(),PSH.ViewerUtil.showClose()&&s.ext.show(),E())},p=function(e){var t,i;PSH.Webvr.isPresenting?(t=PSH.Webvr.renderWidth,i=PSH.Webvr.renderHeight):(t=window.innerWidth,i=window.innerHeight),c.thumbBarHidden.value||c.vrMode.value||(i-=96),A&&A.resize(t,i),window.scroll(0,0)},T=function(){p(),Simplrz.iOS&&(setTimeout(function(){p()},150),setTimeout(function(){p()},250),setTimeout(function(){p()},400)),a.classList.toggle("vr",c.vrMode.value)},w=function(){o.ext.transition({transform:{y:48},opacity:0},200,"ease-in",0)},E=function(){var e=u.bool("alpha")?Math.max(.5,u.val("alpha")):1;o.ext.transition({transform:{y:0},opacity:e},600,"ease-out",200)},L=function(){M.display(l),h.unlocked||PSH.ViewerUtil.shouldAutoplay(l)?(r.ext.hide(),document.ext.on(Simplrz.touch?"touchstart":"mousedown",w),c.showPreloader.value=!0,A||(EXT.extend(document),PSH.Kuula.renderer=new SQR.Renderer(null,{antialias:!1,premultipliedAlpha:!0}),PSH.Kuula.filters=PSH.Filters(c),(A=PSH.Kuula(c,i,{manualRender:!0})).attach(),PSH.ViewerUtil.isProUser()||PSH.ViewerUtil.isKuula()?Simplrz.touch&&(A.options.maxSize=4096):A.options.maxSize=4096,A.ready.on(y),A.resize(window.innerWidth,window.innerHeight),m(u.bool("zoom")),A.options.gyro=u.has("gyro")?u.num("gyro"):1,A.options.externalGyro=Simplrz.iOS&&PSH.ViewerUtil.isJSEmbed()&&!PSH.ViewerUtil.isStandalone(),A.setEyeLevel(u.num("eye")),(c.mobileDetailLock.value||PSH.ViewerUtil.isStandalone())&&VirtualScroll.lockTouch(),EmbedSession.onLock(function(){E(),A.unload(),D()}),Application.resize.on(T),PSH.Webvr.present.on(function(){T(),c.vrMode.value=PSH.Webvr.isPresenting})),c.spherical.autoRotate=u.num("autorotate"),u.bool("tinyplanet")&&l.options.tinySaved&&(A.options.mode=PSH.Kuula.MODE2D),A.load(l,0)):(c.showPreloader.value=!1,D())},m=function(e){(A.options.scroll=e)&&!Simplrz.touch?VirtualScroll.lockWheel():VirtualScroll.unlockWheel()},I=function(e){h.list=e,M=PSH.ViewerOverlay(c,u),c.thumbBarHidden.on(T);var t=u.bool("priority")||!EmbedSession.isPriorityLocked();t&&EmbedSession.lockPriority(),PSH.ViewerUtil.setPriority(EmbedSession.hasLock()),t&&EmbedSession.lock(),1<h.list.length&&PSH.EmbeddedGallery(h,N,c,u,a),Application.route.on(function(e,t){N(e.parts[1])}),Application.init({disableHistoryAPI:!1,dontPrintVersion:!0}),FrameImpulse.on(TWEEN.update)};return{LOCAL_IMAGES:t,IMAGE_PATH:t?location.protocol+"//"+location.host+"/projects/kuula/storage/%1.%2":"https://"+g+"/%1.%2",SHARE:"share",COLLECTION_PATH:"api/?action=getCollectionShort&id=%1&limit=1000",setZoom:m,Addons:{},setHideInstruction:function(e){e?o.ext.hide():(o.ext.show(),E())},setAutoRotate:function(e){c.spherical.autoRotate=e},onData:function(e){document.ext||EXT.extend(document),VirtualScroll.options({touchMult:1}),i=EXT.select(".sphere"),n=EXT.select(".image"),r=EXT.select(".play-button"),o=EXT.select(".inst"),s=EXT.select(".ios-close-btn"),a=EXT.select(".preloader"),SQR._versionDisplayed=!0,SQR.GLSLInclude={filters:PSH.GLSL.filters,functions:PSH.GLSL.functions},PSH.Webvr(),u=PSH.QueryParams(),PSH.ViewerUtil=PSH.ViewerUtil(u);var t=EXT.create("div");t.innerHTML=EXT.select(".templates #addoncard").outerHTML,(c={config:e,embeddedPlayer:!0,needsRedraw:!0,vrMode:new Value(u.bool("directvr")),mobileDetailLock:new Value(!0),lockedMode:new Value(!1),addonCardOpen:new Value(!1),showAddonCard:new Trigger,hideAddonCard:new Trigger,activate:new Trigger,fullscreenMode:new Trigger,thumbBarHidden:new Value(!PSH.ViewerUtil.hasCollection()||!PSH.ViewerUtil.hasThumbs()),dragEditMode:new Value(!1),dialogActive:new Value(!1),showPreloader:new Value(!1),publicTemplates:{addoncard:t},spherical:{heading:0,fov:45,autoRotate:0,resetHeading:new Trigger}}).showPreloader.on(function(e,t){a.ext.toggle(e)}),PSH.CDNPATH=PSH.LOCAL?"":"https://static.kuula.io/"+(c.config.config.debug?"beta/":"prod/"),PSH.GA=PSH.GA(c),PSH.AddonCard(c),PSH.ViewerUtil.getIds(I)}}}(),Framework={version:"4",build:191,date:"2018-06-14T00:14:24.839Z"},Simplrz=function(){var n={},r=["js"],e=function(e,t){var i=t();n[e]=!!i,r.push(i?e:"no-"+e),document.documentElement.setAttribute("class",r.join(" "))};n.pixelRatio=window.devicePixelRatio||1;var t,i,o,a=(o=i=t="",window.getComputedStyle&&(t=window.getComputedStyle(document.documentElement,""))&&(i=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1],o="WebKit|Moz|MS|O".match(new RegExp("("+i+")","i"))[1]),{dom:o,lowercase:i,css:"-"+i+"-",js:""==i?"":i[0].toUpperCase()+i.substr(1)});n.prefix=a,r.push(a.lowercase),n.prefixedProp=function(e){switch(a.lowercase){case"webkit":return"webkit"+e.charAt(0).toUpperCase()+e.slice(1);case"ms":return"-ms-"+e;case"moz":return"Moz"+e.charAt(0).toUpperCase()+e.slice(1);default:return a.css+e}};var s=function(){for(var e=3,t=document.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return 4<e?e:null}();if(null==s){var u=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),c=navigator.userAgent.match(u);s=c&&1<c.length?parseInt(c[1]):null}return n.ie=s||!1,r.push(s?"ie-"+s:"no-ie"),n.firefox="moz"==a.lowercase,r.push(n.firefox?"firefox":"no-firefox"),n.safariDesktop=navigator.userAgent.match(/Safari/)&&!navigator.userAgent.match(/Chrome/)&&!("ontouchstart"in document),r.push(n.safariDesktop?"safari-desktop":"no-safari-desktop"),n.iOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),r.push(n.iOS?"ios":"no-ios"),n.iPad="iPad"==navigator.platform,r.push(n.iPad?"ipad":"no-ipad"),n.win="Win32"==navigator.platform||"Win64"==navigator.platform,r.push(n.win?"win":"no-win"),n.android=-1<navigator.userAgent.toLowerCase().indexOf("android"),r.push(n.android?"android":"no-android"),n.vrbrowser=/(OculusBrowser|Mobile\sVR)/g.test(navigator.userAgent),r.push(n.vrbrowser?"vrbrowser":"no-vrbrowser"),e("css3d",function(){if("webkit"==a.lowercase||"moz"==a.lowercase)return!0;if("ms"==a.lowercase){var e=document.createElement("div");e.style[a.css+"transform"]="translateZ(0px)";var t=window.getComputedStyle(e);if(t){var i=t.getPropertyValue(a.css+"transform");return i&&""!=i&&"none"!=i}}return!1}),e("csstransitions",function(){return!s||10<=s}),e("cssanimations",function(){return!s||10<=s}),e("css2d",function(){return!s||9<=s}),e("touch",function(){return"ontouchstart"in document&&-1==navigator.platform.indexOf("Win")}),e("pointer",function(){return!!window.navigator.pointerEnabled||!!window.navigator.msPointerEnabled}),e("canvas",function(){try{return document.createElement("canvas").getContext("2d")}catch(e){return!1}}),e("history",function(){return!(!window.history||!history.pushState)}),e("webrtc",function(){return"getUserMedia"in navigator||"webkitGetUserMedia"in navigator}),e("webgl",function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}),n.classes=r,n}(),Trigger=function(){var o={},a=[],s=!1,u=[],c=[];return o.on=function(e,t,i){-1<a.indexOf(e)||(e.context=t,a.push(e),i&&e())},o.off=function(e){var t=a.indexOf(e);-1!=t&&(s?c.push({callback:e}):a.splice(t,1))},o.trigger=function(e){if(s)u.push({data:e});else{s=!0;for(var t,i=0,n=a.length;i<n;){var r=a[i];r.call(r.context,e),i++}for(s=!1;t=u.shift();)o.trigger(t.data);for(;t=c.shift();)o.off(t.callback)}},o},Timer=function(e,t){var o=this,i=!1;this.time=0,this.frame=0;var n,r=this.deltatime=0,a=[],s=function(e,t){if(e._time<o.time)if(0!=e._repeat){e.callback(e._time);var i=e._interval;i instanceof Array?e._time+=i[0]+Math.random()*(i[1]-i[0]):e._time+=i,e._repeat--}else setTimeout(o.off,0,e)},u=function(){requestAnimationFrame(u),o.update()};this.pause=function(e){return i=e,this},this.paused=function(){return i},this.start=function(){return n=(new Date).getTime(),r=0,o.frame=0,o.time=0,t&&u(),o},this.update=function(){var e=(new Date).getTime()-n,t=e-r;return r=e,t<250&&!i&&(o.time+=t,o.frame++,o.deltatime=t),a.forEach(s),o.time},this.onAt=function(e,t){var i={callback:t,_time:o.time+e,_repeat:1};return a.push(i),i},this.onEvery=function(e,t,i,n){if(0!==n){var r={callback:i,_time:o.time+t,_interval:e,_repeat:n||-1};return a.push(r),r}},this.off=function(e){if(e instanceof Function){return"You should use the object returned from onAt or onEvery instead.",console.warn("You are probably using the callback directly to remove it.\nYou should use the object returned from onAt or onEvery instead."),void console.warn(e)}if(null!=e){var t=a.indexOf(e);return-1<t&&(a.splice(t,1),!0)}},this.clearTasks=function(){a.length=0},e&&o.start()};Timer.global=new Timer(!0,!0);var Value=function(a,r){var s=this,o=a,u=null,n=null,c=null,l=!1,M=[];s.observers=function(){return M},s.on=function(e,t,i){if(!(-1<M.indexOf(e))){var n=e;return n.test=t,n.param=i,r||n.test&&!n.test(o,u)||n(o,u,i),M.push(n),n}},s.threshold=function(e,i,n,t,r){var o;return null!=i&&null!=n?(o=function(e,t){return i<=e&&t<i||e<n&&n<=t},i<=a&&a<n&&!r&&e(a)):null!=i&&null==n?(o=function(e,t){return i<=e&&t<i},i<=a&&!r&&e(a)):null==i&&null!=n&&(o=function(e,t){return e<n&&n<=t},a<n&&!r&&e(a)),s.on(e,o,t,!0)},s.off=function(e){var t=M.indexOf(e);-1<t&&M.splice(t,1)},s.range=function(e,t,i){return n=e,c=t,l=i,s},s.set=function(e){return s.value=e,s};Object.defineProperty(this,"value",{get:function(){return o},set:function(e){if(null!=n&&null!=c){if(e<n&&(l?e%=c+1:e=n,l))for(;e<n;)e+=c+1;if(c<e&&(l?e%=c+1:e=c,l))for(;e<n;)e+=c+1}e!=o&&(u=o,o=e,function(){for(var e,t=0,i=M.length;t<i;t++)(e=M[t]).test&&!e.test(o,u)||e(o,u,e.param)}())}}),Object.defineProperty(this,"last",{get:function(){return u}})},Application=function(){var i={};return i.flags={},document.location.search.substring(1).split("&").forEach(function(e){var t=e.split("=");i.flags[t[0]]=parseFloat(t[1])}),i.start=new Trigger,i.resize=new Trigger,i.route=new Value({parts:[]},!0),i.init=function(e){(e=e||{}).dontPrintVersion||console.log("%cMalibu v"+Framework.version+" b"+Framework.build+" (history:"+!e.disableHistoryAPI+")","background: #ff3600; color: #ffdede; padding: 4px 10px 4px 10px");var t={width:0,height:0,aspect:0,orientation:-1,event:null};window.addEventListener("resize",function(e){t.width=window.innerWidth,t.height=window.innerHeight,t.aspect=t.width/t.height,t.orientation=window.orientation,t.event=e,i.resize.trigger(t)}),HistoryRouter(i,e).init(),i.start.trigger()},i}(),Keyframes=function(){var a,e={};return e.add=function(e,t){a||(a=document.createElement("style"),document.head.appendChild(a));var i="";for(var n in t)i+=n+"% { "+t[n]+" } ";var r="@-"+Simplrz.prefix.lowercase+"-keyframes "+e+" {"+i+"}";a.appendChild(document.createTextNode(r));var o="@keyframes "+e+" {"+i+"}";return a.appendChild(document.createTextNode(o)),e},e}(),DomExtend=function(){var s={create:function(e,t){var i=document.createElement(e);return t&&i.classList.add(t),s.extend(i),i},select:function(e,t){var i=(t||document).querySelector(e);return i&&!i.ext&&s.extend(i),i},selectAll:function(e,t){for(var i=(t||document).querySelectorAll(e),n=i.length,r=[],o=0;o<n;o++){var a=i[o];a.ext||(a=s.extend(a)),r.push(a)}return r},extend:function(t){if(t.ext)return t;var e={select:function(e){return s.select(e,t)},selectAll:function(e){return s.selectAll(e,t)},detach:function(){var e=t.parentNode;e&&e.removeChild(t)},attachTo:function(e){t.parentNode!=e&&e.appendChild(t)}};return window.ExtState&&ExtState(e,t),window.ExtTransform&&ExtTransform(e,t),window.ExtTransition&&ExtTransition(e,t),window.ExtAnimation&&ExtAnimation(e,t,s),(e.element=t).ext=e,t}};return window.EXT=s}(),ExtState=function(i,n){i.data={},i.show=function(e){n.style.display=e||n.ext.__defaultDisplay||"block"},i.hide=function(){var e=i.readCss("display");n.ext.__defaultDisplay="none"==e?"block":e,n.style.display="none"},i.toggle=function(e,t){e?i.show(t):i.hide()},i.visible=function(){return"none"!=i.readCss("display")},i.on=function(e,t,i){return"doubleclick"==e?(t.___dcProxy=Util.handleDC(n,t),t.___dcProxy):n.addEventListener(e,t,i)},i.off=function(e,t,i){if(!t.___dcProxy)return n.removeEventListener(e,t,i);Util.clearDCHandler(n,t.___dcProxy)},i.readCss=function(e,t){if(t)return n.style[e];var i=getComputedStyle(n);if(i)return i.getPropertyValue(e);n.style[e]},i.bg=function(e,t){if(t){var i=new Image;i.addEventListener("load",function(){t(n,i),n.style.backgroundImage="url("+e+")"}),i.src=e}else n.style.backgroundImage="url("+e+")"}},ExtTransform=function(n,r){var t={width:0,height:0,top:0,left:0};n.rect=function(){try{return r.getBoundingClientRect()}catch(e){return console.log(e.stack),t}},n.width=function(e){return e?(r.style.width=e+"px",e):n.rect().width},n.height=function(e){return e?(r.style.height=e+"px",e):n.rect().height},n.x=0,n.y=0,n.z=0,n.rotX=0,n.rotY=0,n.rotZ=0,n.scaleX=1,n.scaleY=1,n.scaleZ=1,n.setX=function(e){return n.x=e,n},n.setY=function(e){return n.y=e,n},n.setZ=function(e){return n.z=e,n},n.transformToString=function(e){var t="";return(e=e||n).x&&(t+="translateX("+e.x+"px) "),e.y&&(t+="translateY("+e.y+"px) "),Simplrz.css3d&&(t+="translateZ("+e.z+"px) "),e.rotX&&Simplrz.css3d&&(t+="rotateX("+e.rotX+"deg)  "),e.rotY&&Simplrz.css3d&&(t+="rotateY("+e.rotY+"deg)"),e.rotZ&&Simplrz.css3d?t+="rotateZ("+e.rotZ+"deg) ":e.rotZ&&(t+="rotate("+e.rotZ+"deg) "),1!=e.scaleX&&(t+="scaleX("+e.scaleX+") "),1!=e.scaleY&&(t+="scaleY("+e.scaleY+") "),1!=e.scaleZ&&Simplrz.css3d&&(t+="scaleZ("+e.scaleZ+")"),t},n.transform=function(e){if(e)for(var t in e)n[t]=e[t];var i=n.transformToString(n,!1);r.style[Simplrz.prefixedProp("transform")]=i,r.style.transform=i}},ExtTransition=function(M,A){var g={transition:"transitionEnd",Moz:"transitionend",O:"oTransitionEnd",Webkit:"webkitTransitionEnd",Ms:"MSTransitionEnd"}[Simplrz.prefix.js],d="transform",h=function(){return(new Date).getTime()};M.createTransition=function(){var t,i,n,r,a={},s=[],u=[],c=0,o=function(e){if(--i<=0){var t=h()-n;c<=t?l():r||(setTimeout(l,t),r=!0)}},l=function(){a.clear(),t&&t()};return a.add=function(e,t,i,n,r){var o;return c=Math.max(c,i),n=n||Util.cssEase.ease,r=r||0,s.push([(o=e,o.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})),i+"ms",n,r+"ms"].join(" ")),u.push([e,t]),a},a.trs=function(e,t,i,n){return c=Math.max(c,t),i=i||Util.cssEase.ease,n=n||0,s.push([Simplrz.prefix.css+"transform",t+"ms",i,n+"ms"].join(" ")),u.push([d,e]),a},a.clear=function(){A.removeEventListener(g,o),s=[],u=[],A.style[Simplrz.prefix.js+"Transition"]="",A.style.transition=""},a.start=function(e){t=e,i=u.length;A.offsetWidth;return A.addEventListener(g,o),n=h(),r=!1,A.style[Simplrz.prefix.js+"Transition"]=s,A.style.transition=s,function(e){for(var t=e.length,i=0;i<t;i++){var n=e[i][0],r=e[i][1];n==d?M.transform(r):A.style[n]=r}}(u),a},a.then=function(e){var t=M.createTransition();return a.start(function(){e(),t.start()}),t},a},M.transition=function(e,t,i,n,r){var o=M.createTransition();for(var a in e){var s=e[a];a==d?o.trs(s,t,i,n):o.add(a,s,t,i,n)}return o.start(r),o}},ExtAnimation=function(a,s,e){var u={animation:"animationend",Moz:"animationend",O:"oanimationend",Webkit:"webkitAnimationEnd",Ms:"MSAnimationEnd"},c=function(e){return[e.name,e.duration+"s",e.ease,e.delay+"s",e.count,e.direction,e.fillMode].join(" ")},t=function(e,t,i,n){var r={name:e,duration:t||1,ease:i||"ease",delay:n||0,count:1,direction:"normal",fillMode:"backwards",setTime:function(e){return r.time=e,r},setDelay:function(e){return r.delay=e,r}};return r};e.createAnimation=t,a.createAnimation=t,a.animate=function(e,t,i){var n;if(e instanceof Array){var r=[];e.forEach(function(e){r.push(c(e))}),n=r.join(", ")}else n=c(e);var o=u[Simplrz.prefix.js];s._onEnded&&s.removeEventListener(o,s._onEnded),s._onEnded=function(){s.removeEventListener(o,s._onEnded),null==i&&(s.style[Simplrz.prefix.js+"Animation"]="",s.style.animation=""),t&&t()},s.style[Simplrz.prefix.js+"Animation"]="",s.style.animation="",setTimeout(function(){a.show&&a.show(),s.addEventListener(o,s._onEnded),s.style[Simplrz.prefix.js+"Animation"]=n,s.style.animation=n},0)}},FrameImpulse=function(){var r,o=[],a=0,s=[],u=window,e={},c=function(e){if(u.requestAnimationFrame(c),0!=a){for(var t=0;t<a;t++)o[t].call(e);if(0<r){var i=[];for(t=o.length-1;0<=t;t--)for(var n=0;n<s.length;n++)o[t]===s[n]&&i.push(t);for(t=0;t<i.length;t++)o.splice(i[t],1);a=o.length,s=[],r=0}}};return e.on=function(e){-1<o.indexOf(e)||(o.push(e),a=o.length)},e.off=function(e){var t=o.indexOf(e);-1!=t&&(o.splice(t,1),a=o.length)},e.getListeners=function(){return o},e.setProvider=function(e){u=e||window},c(),e}(),HistoryRouter=function(s,i){var o=i&&i.disableHistoryAPI||!Simplrz.history,a=document.location.protocol+"//"+(document.location.hostname||document.location.host);document.location.port&&(a+=":"+document.location.port),s.navigate=new Trigger,s.hijackLinks=new Trigger,Application.history=[];var n,r=function(e){var t={};if(o)t.route=e||"";else{var i=document.location.href.indexOf("?"),n=document.location.href.indexOf("#"),r=document.location.href;-1<i&&(r=r.substring(0,i)),-1<n&&(r=r.substring(0,n)),t.route=r.substring(a.length+1+s.baseUrl.length)}for(t.parts=t.route.split("/");""==t.parts[0];)t.parts.shift();for(;""==t.parts[t.parts.length-1];)t.parts.pop();t.lastPart=t.parts[t.parts.length-1],t.route!=s.route.value.route&&(Application.history.push(t),s.route.value=t)};o||window.addEventListener("popstate",function(e){r()}),s.hijackLinks.on(function(e){var t=(e||document).querySelectorAll("a[href]");t=Array.prototype.slice.call(t),e&&"a"==e.nodeName.toLowerCase()&&t.unshift(e);for(var i=0;i<t.length;i++){var n=t[i],r=n.getAttribute("href"),o=n.getAttribute("target"),a=n.getAttribute("data-hj");null==r||-1<r.indexOf(":")||"_blank"==o||"no"==a||n.hijacked||(n.hijacked=!0,n.originalHref=n.getAttribute("href")||"",n.hijackedHref=s.baseUrl+"/"+n.getAttribute("href"),0==n.hijackedHref.indexOf("//")&&(n.hijackedHref=n.hijackedHref.substring(1)),n.addEventListener("click",function(e){e&&e.preventDefault(),s.navigate.trigger(this.hijackedHref)}))}});var t=function(e){var t=n();return e.returnValue=t};return s.setNavigateCondition=function(e){n=e,window.addEventListener("beforeunload",t)},s.clearNavigateCondition=function(){window.removeEventListener("beforeunload",t),n=null},s.navigate.on(function(e){var t=function(){history.pushState(null,null,e),r()};n?n(t,e):t()}),{init:function(){if(function(){var e=document.querySelector("base");e=e&&e.getAttribute("href")?e.getAttribute("href"):"/";var t=document.createElement("a");t.href=e,"/"==(e=t.pathname)&&(e=""),"/"==e[e.length-1]&&(e=e.substring(0,e.length-1)),s.baseUrl=e}(),o){var t,e=document.location.search;if(i&&i.home&&(t=i.home),-1<e.indexOf("="))e.substring(1).split("&").forEach(function(e){-1<e.indexOf("id=")&&(t=e.split("=")[1])});else e&&(t=e.substring(1));r(t||"")}else r()}}},Loader={loadText:function(e,t,i,n){var r=new XMLHttpRequest;r.open(i?"POST":"GET",e,!0),r.withCredentials=!0,r.addEventListener("readystatechange",function(e){if(4==r.readyState){if(!r.responseText)return void console.warn("empty response");t(r.responseText)}}),n&&r.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;n(t,e.loaded,e.total)}}),r.send(i)},loadJSON:function(e,t,i,n){Loader.loadText(e,function(e){t(JSON.parse(e))},i,n)}},VirtualScroll=function(){var n,t,e={},r=[],i=!1,o=2,a=15,s=120,u=1,c="onwheel"in document,l="onmousewheel"in document,M="ontouchstart"in document,A="onkeydown"in document,g=!!window.navigator.pointerEnabled,d=!!window.navigator.msPointerEnabled,h=-1<navigator.userAgent.indexOf("Firefox"),f=!1,D={y:0,x:0,deltaX:0,deltaY:0,startX:0,startY:0,multiTouch:!1,y2:0,x2:0,startX2:0,startY2:0,originalEvent:null,source:null};e.on=function(e){i||(x(document),i=!0),-1==r.indexOf(e)&&(r.push(e),n=r.length)},e.options=function(e){s=e.keyStep||120,a=e.firefoxMult||15,o=e.touchMult||2,u=e.mouseMult||1},e.off=function(e){var t=r.indexOf(e);-1!=t&&(r.splice(t,1),(n=r.length)<=0&&(S(document),i=!1))};var N=function(e){e.preventDefault()};e.lockTouch=function(){document.addEventListener("touchmove",N,{passive:!1})},e.unlockTouch=function(){document.removeEventListener("touchmove",N,{passive:!1})},e.lockWheel=function(){c&&document.addEventListener("wheel",N,{passive:!1}),l&&document.addEventListener("mousewheel",N,{passive:!1})},e.unlockWheel=function(){c&&document.removeEventListener("wheel",N,{passive:!1}),l&&document.removeEventListener("mousewheel",N,{passive:!1})};var y=function(e,t){D.x+=D.deltaX,D.y+=D.deltaY,D.originalEvent=e,D.source=t;for(var i=0;i<n;i++)r[i](D)},p=function(e){D.deltaX=e.wheelDeltaX||-1*e.deltaX,D.deltaY=e.wheelDeltaY||-1*e.deltaY,h&&1==e.deltaMode&&(D.deltaX*=a,D.deltaY*=a),D.deltaX*=u,D.deltaY*=u,y(e,"wheel")},T=function(e){D.deltaX=e.wheelDeltaX?e.wheelDeltaX:0,D.deltaY=e.wheelDeltaY?e.wheelDeltaY:e.wheelDelta,y(e,"wheel")},w=function(e){var t=e.targetTouches?e.targetTouches[0]:e;D.startX=t.pageX,D.startY=t.pageY,e.targetTouches&&1<e.targetTouches.length?(t=e.targetTouches[1],D.startX2=t.pageX,D.startY2=t.pageY,D.multiTouch=!0):D.multiTouch=!1,f=!0},E=function(){f=!1,D.multiTouch=!1},L=function(e){if(f){var t=e.targetTouches?e.targetTouches[0]:e;D.startX||(D.startX=t.pageX),D.startY||(D.startY=t.pageY),D.x=t.pageX,D.y=t.pageY,D.deltaX=(t.pageX-D.startX)*o,D.deltaY=(t.pageY-D.startY)*o,D.startX=t.pageX,D.startY=t.pageY,e.targetTouches&&1<e.targetTouches.length?(t=e.targetTouches[1],D.multiTouch=!0,D.startX2||(D.startX2=t.pageX),D.startY2||(D.startY2=t.pageY),D.x2=t.pageX,D.y2=t.pageY):D.multiTouch=!1,y(e,"touch")}},m=function(e){switch(D.deltaX=D.deltaY=0,e.keyCode){case 37:D.deltaX=-s;break;case 39:D.deltaX=s;break;case 38:D.deltaY=s;break;case 40:D.deltaY=-s}y(e,"key")},I={passive:!0},x=function(e){c&&e.addEventListener("wheel",p,I),l&&e.addEventListener("mousewheel",T,I),M&&(e.addEventListener("touchstart",w),e.addEventListener("touchmove",L),e.addEventListener("touchend",E)),(g||d)&&(t=e.body.style.touchAction,e.body.style.touchAction="none",e.addEventListener(d?"MSPointerDown":"PointerDown",w,!0),e.addEventListener(d?"MSPointerMove":"PointerMove",L,!0),e.addEventListener(d?"MSPointerUp":"PointerUp",E,!0)),A&&e.addEventListener("keydown",m)},S=function(e){c&&e.removeEventListener("wheel",p,I),l&&e.removeEventListener("mousewheel",T,I),M&&(e.removeEventListener("touchstart",w),e.removeEventListener("touchmove",L),e.removeEventListener("touchend",E)),(g||d)&&(e.body.style.touchAction=t,e.removeEventListener(d?"MSPointerDown":"PointerDown",w,!0),e.removeEventListener(d?"MSPointerMove":"PointerMove",L,!0),e.removeEventListener(d?"MSPointerUp":"PointerUp",E,!0)),A&&e.removeEventListener("keydown",m)};return e.trackFrame=function(e){x(e)},e.untrackFrame=function(e){S(e)},e}(),Gesture=function(e){e=e||{};var o=this,t="ontouchstart"in document,i=t?"touchstart":"mousedown",n=t?"touchmove":"mousemove",r=t?"touchend":"mouseup";this.swipeUp=new Trigger,this.swipeDown=new Trigger,this.swipeLeft=new Trigger,this.swipeRight=new Trigger;var a=e.tolerance||.1,s={x:0,y:0},u={x:0,y:0},c=0,l=e.maxTime||300,M=e.minDistance||30;M*=M;var A=function(e){e=t?e.targetTouches[0]:e,s.x=e.pageX,s.y=e.pageY,u.x=0,u.y=0,c=(new Date).getTime()},g=function(e){e=t?e.targetTouches[0]:e,u.x=e.pageX-s.x,u.y=e.pageY-s.y},d=function(e){var t=u.x*u.x+u.y*u.y,i=(new Date).getTime()-c,n=a;if(!(l<i||t<M)){var r=Math.atan2(u.y,u.x)/Math.PI;-.5-n<r&&r<-.5+n&&o.swipeUp.trigger(),.5-n<r&&r<.5+n&&o.swipeDown.trigger(),0-n<r&&r<0+n&&o.swipeRight.trigger(),(r<-1+n||1-n<r)&&o.swipeLeft.trigger()}},h=function(e){switch(u.x=u.y=0,e.keyCode){case 39:o.swipeLeft.trigger();break;case 37:o.swipeRight.trigger();break;case 40:o.swipeUp.trigger();break;case 38:o.swipeDown.trigger()}};this.create=function(){(e.element||document).addEventListener(i,A),document.addEventListener(n,g),document.addEventListener(r,d),e.noKeyboard||document.addEventListener("keydown",h)},this.destroy=function(){(e.element||document).removeEventListener(i,A),document.removeEventListener(n,g),document.removeEventListener(r,d),e.noKeyboard||document.removeEventListener("keydown",h)},this.create()},Template=function(){var i,r=this;this.content,this.set=function(e){if(e instanceof HTMLElement)r.content=EXT.extend(e.cloneNode(!0));else{var t=document.createElement("div");t.innerHTML=e?e.trim():"",r.content=EXT.extend(t.firstChild)}return i={},r},this.wrap=function(e){return r.content=EXT.extend(e),i={},r},this.select=function(e){if(i[e])return i[e];var t=r.content.ext.select(e);if(!t)throw"Selector not found: "+e;return i[e]=t},this.clearCache=function(){i={}},this.hide=function(e){r.select(e).style.display="none"},this.attachTo=function(e,t){r.content&&(r.content.ext.attachTo(e),t&&requestAnimationFrame(function(){requestAnimationFrame(t)}))},this.detach=function(e){r.content&&(e?e(function(){r.content.ext.detach()}):r.content.ext.detach())},this.updateText=function(e,t){console.warn("Template.updateText is deprecated, use Template.text instead"),r.select(e).innerHTML=t},this.text=function(e,t){r.select(e).innerHTML=t},this.appendText=function(e,t){r.select(e).innerHTML+=t},this.append=function(e,t){r.select(e).appendChild(t)},this.clone=function(){},this.insertList=function(i,e,n){e.forEach(function(e){if(n){var t=n.content.cloneNode(!0);t.innerHTML=e,r.append(i,t)}else r.appendText(i,e)})}},Util={fullbleed:function(e,t,i){var n,r,o,a,s=0<e.videoWidth,u=t||window.innerWidth,c=i||window.innerHeight,l=s?e.videoWidth:e.naturalWidth,M=s?e.videoHeight:e.naturalHeight,A=u/c,g=l/M;return g<A?(n=0,r=-.5*((a=M/l*(o=u))-c)):A<g?(r=0,n=-.5*((o=l/M*(a=c))-u)):(n=r=0,o=u,a=c),[n,r,o,a]},fullContain:function(e,t,i){var n,r,o,a,s=0<e.videoWidth,u=(t=window.innerWidth,i=window.innerHeight,s?e.videoWidth:e.width),c=s?e.videoHeight:e.height,l=t/i,M=u/c;return M<l?(r=0,n=.5*(t-(o=(a=i)/c*u))):l<M?(n=0,r=.5*(i-(a=(o=t)/u*c))):(r=n=0,o=t,a=i),[n,r,o,a]},resizeTo:function(e,t){e.style.left=t[0]+"px",e.style.top=t[1]+"px",e.style.width=t[2]+"px",e.style.height=t[3]+"px"},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},handleTap:function(e,t){var r,o,a,i,s,u,n=t.___thProxy||(s=e,u=t,(i={}).click=function(e){},i.touchStart=function(e){r=(new Date).getTime(),o=e.targetTouches[0].pageX,a=e.targetTouches[0].pageY},i.touchEnd=function(e){var t=(new Date).getTime()-r,i=e.changedTouches[0].pageX-o,n=e.changedTouches[0].pageY-a;t<2e4&&i*i+n*n<100&&u.call(s,e)},i);return e.addEventListener("touchstart",n.touchStart),e.addEventListener("touchend",n.touchEnd),e.addEventListener("click",n.click),n},clearTapHandler:function(e,t){e.removeEventListener("touchstart",t.touchStart),e.removeEventListener("touchend",t.touchEnd),e.removeEventListener("click",t.click)},handleDC:function(e,t){var i,r,o,n,a,s,u,c,l,M=t.___dcProxy||(i={},r=e,o=t,n=Simplrz.touch,a=n?300:200,u=0,l=c=-(s=n?12:5),i.click=function(e){var t=e.changedTouches?e.changedTouches[0].pageX:e.pageX,i=e.changedTouches?e.changedTouches[0].pageY:e.pageY;e.pageX=t,e.pageY=i;var n=(new Date).getTime();n-u<a&&t-c<s&&i-l<s?(o.call(r,e),u=0,l=c=-s):(u=n,c=t,l=i)},i);return e.addEventListener("click",M.click),M},clearDCHandler:function(e,t){e.removeEventListener("click",t.click)},cssEase:{ease:"ease",smoothstep:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"}},SQR={TWOPI:2*Math.PI,HALFPI:.5*Math.PI,EPSILON:1e-6,gl:null,flipMatrix:!0,fullScreenQuad:null,shaderPath:".",Primitives:{V2:function(e,t){return new SQR.V2(e,t)},V3:function(e,t,i){return new SQR.V3(e,t,i)},Q:function(e,t,i,n){return new SQR.Quaternion(e,t,i,n)},M4:function(){return new SQR.Matrix44},F:function(n){var o=function(e,t,i,n){var r=SQR.Face().v(e,t,i,n);return o.faces.push(r),r};return o.faces=[],o.toBuffer=function(t){var i=0;return o.faces.forEach(function(e){n&&n.reverseNormals&&e.flip(),e.calculateNormal(),i+=e.toBuffer(t,i,n&&n.perVertexNormal)}),i},o}},v2:function(){return{aPosition:2}},v3:function(){return{aPosition:3}},v2u2:function(){return{aPosition:2,aUV:2}},v2c3:function(){return{aPosition:2,aColor:3}},v3n3:function(){return{aPosition:3,aNormal:3}},v3n3u2:function(){return{aPosition:3,aNormal:3,aUV:2}},WARN_UNIFORM_NOT_PRESENT:!1,Version:{version:"3.0",build:249,date:"Jun 5th 2018"},GLSL:{diffspec:"/*#docs*/\n//#vertex\nprecision mediump float;\nattribute vec3 aNormal;\nattribute vec3 aPosition;\nattribute vec2 aUV;\nuniform mat4 uMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nuniform mat3 uNormalMatrix;\nuniform vec3 uEyePosition;\nvarying vec3 vNormal;\nvarying vec3 vIncident;\nvarying vec2 vUV;\nvoid main() {\n\tvNormal = uNormalMatrix * aNormal;\n\tvec3 p = (uMatrix * vec4(aPosition, 1.0)).xyz;\n\tvIncident = normalize(p - uEyePosition);\n\tvUV = aUV;\n\tgl_Position = uProjection * uViewMatrix * vec4(aPosition, 1.0);\n}\n//#fragment\nprecision mediump float;\n//#include standardLight\nuniform vec3 uAmbient;\nuniform vec3 uColor;\nuniform float uEmissive;\nuniform vec3 uLightDirection;\n#ifdef USE_DIFFUSE_MAP\nuniform sampler2D uTexture;\nuniform vec4 uTextureTileOffset;\n#endif\n#ifdef USE_SPECULAR\nuniform vec4 uSpecularColor;\nuniform float uShininess;\n#endif\n#ifdef USE_SPECULAR_MAP\nuniform sampler2D uSpecularMap;\n#endif\nvarying vec3 vNormal;\nvarying vec3 vIncident;\nvarying vec2 vUV;\nvec4 texture(sampler2D t, vec2 uv) {\n\treturn texture2D(t, uv * uTextureTileOffset.xy + uTextureTileOffset.zw);\n}\nvoid main() {\n\t#ifdef USE_DIFFUSE_MAP\n\tvec3 dm = uColor * texture(uTexture, vUV).rgb;\n\t#else\n\tvec3 dm = uColor;\n\t#endif\n\tvec3 e = dm * uEmissive;\n\tvec3 d = diffuse(vNormal, uLightDirection, dm, 1.0);\n\t#ifdef USE_SPECULAR_MAP\n\t#define SI uSpecularColor.a * texture(uSpecularMap, vUV).r\n\t#else\n\t#define SI uSpecularColor.a\n\t#endif\n\t#ifdef USE_SPECULAR\n\t#define SP specular(vNormal, vIncident, uLightDirection, uSpecularColor.rgb, uShininess, SI)\n\t#else \n\t#define SP vec3(0.0) \n\t#endif\n\tgl_FragColor = vec4(uAmbient + e + d + SP, 1.0);\n}\n",normal2color:"/*#docs*/\n//#vertex indicates that this is where the vertex shader starts\n//#fragment indicates that this is where the fragment shader starts\n//#vertex\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nuniform mat4 uMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nuniform mat3 uNormalMatrix;\nvarying vec3 vNormal;\nvoid main() {\n\tvNormal = normalize(uNormalMatrix * aNormal);\n\tgl_Position = uProjection * uViewMatrix * vec4(aPosition, 1.0);\n}\n//#fragment\nprecision mediump float;\nvarying vec3 vNormal;\nvoid main() {\n\tgl_FragColor = vec4(vec3(0.5) + vNormal * 0.5, 1.0);\n}\n",standardLight:"/*#docs*/\nvec3 diffuse(vec3 n, vec3 l, vec3 c, float i) {\n\t#ifdef HEMISPHERE_DIFFUSE\n\treturn (dot(-l, n) * 0.5 + 0.5) * c * i;\n\t#else\n\treturn max(0.0, dot(-l, n)) * c * i;\n\t#endif\n}\nvec3 specular(vec3 n, vec3 v, vec3 l, vec3 c, float sh, float i) {\n\treturn pow(max(0.0, dot(reflect(-l, n), v)), sh) * c.rgb * i;\n}\nfloat brightness(vec3 c) {\n\treturn c.r * 0.2126 + c.g * 0.7152 + c.b * 0.0722;\n}\n",texture:"/*#docs*/\nattribute vec3 aPosition;\nattribute vec2 aUV;\nuniform mat4 uMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nuniform mat3 uNormalMatrix;\nvarying vec2 vUV;\nvoid main() {\n\tvUV = aUV;\n\tgl_Position = uProjection * uViewMatrix * vec4(aPosition, 1.0);\n}\n//#fragment\nprecision mediump float;\nuniform sampler2D uTexture;\nvarying vec2 vUV;\nvoid main() {\n\tgl_FragColor = texture2D(uTexture, vUV);\n}\n"},Buffer:function(){var a,t,i,n,s={},r=!1;return s.mode=SQR.gl.TRIANGLES,s.drawMode=SQR.gl.STATIC_DRAW,s.setMode=function(e){return s.mode=e,s},s.layout=function(e,t){for(var i in s.size=t,s.strideSize=0,s.layout=e,s.attributes={},e){var n={offset:s.strideSize,byteOffset:4*s.strideSize,size:e[i]};s.strideSize+=e[i],s.attributes[i]=n}return s.strideByteSize=4*s.strideSize,a=new Float32Array(t*s.strideSize),s},s.resize=function(e,t){s.size=e;var i=new Float32Array(e*s.strideSize);if(t)for(var n=0;n<a.length;n++){var r=n-t*s.strideSize;0<=r&&(i[r]=a[n])}else i.set(a);a=i},s.data=function(e,t){t instanceof Array||(t=Array.prototype.slice.call(arguments,1));for(var i=s.attributes[e],n=t.length/i.size,r=0;r<n;r++)for(var o=0;o<i.size;o++)a[r*s.strideSize+o+i.offset]=t[r*i.size+o];return s},s.set=function(e,t,i){i.toArray?i=i.toArray():i instanceof Array||(i=Array.prototype.slice.call(arguments,2));var n=e?s.attributes[e].offset:0;t<0&&(t+=s.size),t>=s.size&&(t%=s.size);for(var r=0,o=i.length;r<o;r++)a[t*s.strideSize+r+n]=i[r];return s},s.iterate=function(e,t){var i=s.attributes[e];if(e&&!i)throw"> SQR.Buffer.iterate > no such attribute: "+e;for(var n=e?i.offset:0,r=0,o=0;o<a.length;o+=s.strideSize)t(o+n,a,r),r++;return s},s.bind=function(){return SQR.gl.bindBuffer(SQR.gl.ARRAY_BUFFER,i),r&&SQR.gl.bindBuffer(SQR.gl.ELEMENT_ARRAY_BUFFER,n),s},s.update=function(){var e=SQR.gl;return i=i||e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,a,s.drawMode),r&&(n=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,s.drawMode)),s},s.index=function(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments,0)),t=new Uint16Array(e),s.indexSize=e.length,r=!0,s},s.isIndexed=function(){return r},s.draw=function(e){var t=SQR.gl;r?t.drawElements(e.drawMode||s.mode,s.indexSize,t.UNSIGNED_SHORT,0):t.drawArrays(e.drawMode||s.mode,0,s.size)},s.setRawData=function(e,t){a.set(e,t)},s.getDataArray=function(){return a},s.getIndexArray=function(){return t},s.destroy=function(){a.length=0,SQR.gl.deleteBuffer(i),r&&(t.length=0,SQR.gl.deleteBuffer(n))},s},Context:function(n,e,t){!SQR._versionDisplayed&&SQR.Version&&(console.log("%cSquareroot v"+SQR.Version.version+" b"+SQR.Version.build,"background: #663399; color: #dd99ff; padding: 4px 10px 4px 10px"),SQR._versionDisplayed=!0);if(n||(n=document.createElement("canvas")),n instanceof HTMLElement||(n=document.querySelector(n)),!n.getContext)throw"> SQR.Context - Invalid canvas reference.";var r,o={canvas:n};return o.create=function(e,t){t=t||function(){throw"> SQR.Context - Webgl is not supported."},void 0===(e=e||{}).antialias&&(e.antialias=!0),void 0===e.stencil&&(e.stencil=!1),window.WebGLRenderingContext||t();try{r=n.getContext("webgl",e)||n.getContext("experimental-webgl",e)}catch(e){console.error(e),t()}return r||t(),o.gl=r,o.setAsCurrent(),r.enable(r.CULL_FACE),e.customGLSetup&&e.customGLSetup(),o},o.size=function(e,t,i){return i=i||1,n.width=e*i,n.height=t*i,o.viewport(0,0,e*i,t*i),o},o.viewport=function(e,t,i,n){return r.viewport(e,t,i,n),o},o.clearColor=function(e,t,i,n){return r.clearColor(e,t,i,n),r.clear(r.COLOR_BUFFER_BIT),o},o.clear=function(){return r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT),o},o.setAsCurrent=function(){return SQR.gl=r,o},o.destroy=function(){n=r=null},o.create(e,t),o}};SQR.Loader={loadText:function(e,t){var i=new XMLHttpRequest;i.open("GET",e);var n=function(){4==i.readyState&&(i.removeEventListener("readystatechange",n),t(i.responseText,e))};i.addEventListener("readystatechange",n),i.send()},loadJSON:function(t,i){SQR.Loader.loadText(t,function(e){i(JSON.parse(e),t)})},loadImage:function(e,t,i){var n=new Image;if(n.crossOrigin="Anonymous",t){var r=function(){n.removeEventListener("load",r),t(n,e)};n.addEventListener("load",r)}if(i){var o=function(){return n.src="",n.removeEventListener("error",o),i(null,e),!1};n.addEventListener("error",o)}return n.src=e,n},loadWebcam:function(e,t){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia||(console.error("> SQR.Loader - getUserMedia not supported"),e()),t=t||{audio:!1,video:{}};var i=function(){e(n,"webcam")},n=document.createElement("video");n.autoplay=!0,navigator.getUserMedia(t,function(e){n.stream=e,n.src=window.URL.createObjectURL(e),n.play(),n.addEventListener("canplaythrough",i,!1)},function(e){console.error("> SQR.Loader - getUserMedia error ",e)})},loadVideo:function(e,t){var i=document.createElement("video");i.autoplay=!0,i.addEventListener("canplaythrough",function(){t(i,e)},!1);var n=e;i.canPlayType("video/mp4")||(n=n.replace("mp4","webm")),i.src=n},loadAssets:function(i,n,r,e){e=e||{};var o=i.length,a={};if(0==o)return r&&r(1,1),void n();for(var s={},t=function(e,t){SQR.GLSLInclude=SQR.GLSLInclude||{},SQR.GLSLInclude[s[t]]=e,u(e,t)},u=function(e,t){a[s[t]]=e,o--,r&&r(o,i.length),0==o&&n(a)},c=0;c<o;c++){var l=i[c],M="string"!=typeof l,A=M?l[0]:l,g=M?l[1]:l,d=A.substring(A.lastIndexOf(".")+1);switch(s[A]=g,d){case"glsl":SQR.Loader.loadText(A,t);break;case"png":case"jpg":case"gif":SQR.Loader.loadImage(A,u);break;case"json":case"js":SQR.Loader.loadJSON(A,u);break;case"mp4":case"webm":SQR.Loader.loadVideo(A,u);break;case"webcam":SQR.Loader.loadWebcam(u)}}}},SQR.Pointer3d=function(i){i=i||{};var a=-2,s=0,u=new SQR.Ray,c=[];document.addEventListener("mousemove",function(e){a=e.pageX/window.innerWidth*2-1,s=e.pageY/window.innerHeight*2-1});var e=function(e,t){return e.collider.__hit<t.collider.__hit?-1:e.collider.__hit>t.collider.__hit?1:0};return{all:i.all||!1,ray:u,onTransform:function(e){if(e.collider&&-2!=a){var t=SQR.Intersection.rayTest(u,e);i.all?e.collider.hit=t:(e.collider.hit=!1,e.collider.__hit=t),t&&c.push(e)}},onAfterRender:function(){-2!=a&&!i.all&&0<c.length&&(c.sort(e),c[0].collider.hit=c[0].collider.__hit)},fromMousePosition:function(e,t,i){var n=SQR.Ray._mt,r=i?i.x:a,o=i?i.y:s;return u.origin.set(r,-1*o,0),n.copyFrom(t).inverse(),n.transformVector(u.origin),e.globalMatrix.transformVector(u.origin),u.direction.sub(u.origin,e.globalPosition).norm(),c.length=0,u}}},SQR.Ray=function(e,t){this.origin=e||new SQR.V3,this.direction=t||new SQR.V3,this.localOrigin=new SQR.V3,this.localDirection=new SQR.V3,SQR.Ray._mt||(SQR.Ray._mt=new SQR.Matrix44,SQR.Ray._nt=new SQR.Matrix33)},SQR.Ray.prototype.makeLocal=function(e){var t=SQR.Ray._mt,i=SQR.Ray._nt;t.copyFrom(e.globalMatrix).inverse(),t.transformVector(this.origin,this.localOrigin),i.copyFrom(e.normalMatrix).transpose(),i.transformVector(this.direction,this.localDirection)},SQR.Renderer=function(e,t,i){var M,n,r,A,g,d={currentTime:0,deltaTime:0,autoClear:!0,context:M=e&&e.setAsCurrent?e:SQR.Context(e,t,i)},h=[],f=[],a=function(e,t,i){if(e.active){if(e.__transformed||(e.transformWorld(),e.__transformed=!1),e.transformView(t?t.inverseWorldMatrix:null),e.clip&&e.clip.update(e,r,d.deltaTime),i.pointer3d&&i.pointer3d.onTransform(e),0<e.numChildren)for(var n=0;n<e.numChildren;n++)a(e.children[n],t,i);e.buffer&&e.shader&&(e.transparent?f.push(e):h.push(e))}},D={},s=[],N=function(e,t){e&&t.setUniform("uEyePosition",e.globalPosition);var i=e&&e.projection?e.projection:d.projection;i&&t.setUniform("uProjection",i).setUniform("uNear",i.near).setUniform("uFar",i.far),t.setUniform("uTime",r)};return d.clearColor=function(e,t,i,n){return null!=e.r?(null==e.a&&(e.a=1),M.gl.clearColor(e.r,e.g,e.b,e.a)):(null==n&&(n=1),M.gl.clearColor(e,t,i,n)),M.gl.clear(SQR.gl.COLOR_BUFFER_BIT),d},d.render=function(e,t,i){M.setAsCurrent(),d.tick(),d.beforeDraw(t,i),d.update(e,t,i),d.draw(null,t,i),d.afterDraw(i)},d.tick=function(){return n||(n=(new Date).getTime()),r=(new Date).getTime()-n,d.deltaTime=r-d.currentTime,d.currentTime=r,d},d.beforeDraw=function(e,t){if((t=t||D).pointer3d){var i=e&&e.projection?e.projection:d.projection;t.pointer3d.fromMousePosition(e||root,i)}return d},d.update=function(e,t,i){if(i=i||D,h.length=0,f.length=0,s.length=0,t){for(var n=t;n;)s.unshift(n),n=n.parent;for(var r=0,o=s.length;r<o;r++)s[r].transformWorld(),s[r].__transformed=!0;t.computeInverseMatrix()}return a(e,t,i),d},d.draw=function(e,t,i){var n=SQR.gl;i=i||D,d.autoClear&&M.clear(),n.enable(n.DEPTH_TEST),n.depthMask(!0),n.disable(n.STENCIL_TEST),n.frontFace(n.CW),i.customGLSetup&&i.customGLSetup(n),e&&e.buffer&&e.shader&&h.push(e);var r=(h=h.concat(f)).length,o=null,a=null,s=!1,u=i&&i.replacementShader;u&&(a=i.replacementShader.use().updateTextures(),N(t,a));for(var c=0;c<r;c++){var l;g=A=!1,(l=h[c]).transparent&&(s||(n.enable(n.BLEND),s=!0),n.blendFunc(l.srcFactor,l.dstFactor)),o!=l.buffer&&((o=l.buffer).bind(),g=!0),a==l.shader||u||(a=l.shader.use().updateTextures(),N(t,a),A=!0),(A||g)&&a.attribPointers(o),l.draw(i)}return n.disable(n.BLEND),d},d.afterDraw=function(e){return(e=e||D).pointer3d&&e.pointer3d.onAfterRender(),d},d.renderToScreen=function(){var e=SQR.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},d.clearColor(0,0,0,1),d},SQR.Shader=function(r,M){var A,g={},d={},h=[],f={},D=[],N=[];g.compile=function(){var e=function(e){if(!e)throw"> SQR.Shader.parseGLSL - Shader source code missing";var t="",i=M?M.directives:null;if(i&&i instanceof Array)for(var n=0;n<i.length;n++)t+="#define "+i[n].name,i[n].value&&(t+=" "+i[n].value),t+="\n";var r=t,o=t,a=!0,s=e.split("\n");for(n=0;n<s.length;n++)if(-1<(l=s[n]).indexOf("//#include")){var u,c=l.substring(11);if(SQR.GLSL&&SQR.GLSL[c]?u=SQR.GLSL[c]:SQR.GLSLInclude&&SQR.GLSLInclude[c]?u=SQR.GLSLInclude[c]:M&&M.includes&&(u=M.includes[c]),!u)throw"> SQR.Shader.parseGLSL - Include not found: "+c;s[n]=u}for(s=s.join("\n").split("\n"),n=0;n<s.length;n++){var l;if(-1<(l=s[n]).indexOf("//#"))-1<l.indexOf("//#fragment")?a=!1:-1<l.indexOf("//#vertex")&&(a=!0);else{if(-1<l.indexOf("//")&&(l=l.substring(0,l.indexOf("//"))),l.match(/^([\s\t]*)$/))continue;a?r+=l+"\n":o+=l+"\n"}}return{vertex:r,fragment:o}}(r),t=SQR.gl,i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e.vertex),t.compileShader(i);var n=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(n,e.fragment),t.compileShader(n),A=t.createProgram(),t.attachShader(A,i),t.attachShader(A,n),t.linkProgram(A),!t.getShaderParameter(i,t.COMPILE_STATUS))throw"> SQR.Shader. Vertex shader compile error: "+t.getShaderInfoLog(i);if(!t.getShaderParameter(n,t.COMPILE_STATUS))throw"> SQR.Shader. Fragment shader compile error: "+t.getShaderInfoLog(n);if(!t.getProgramParameter(A,t.LINK_STATUS))throw"> SQR.Shader. Shader linking error: "+t.getProgramInfoLog(A);return g},g.inspect=function(){for(var e=SQR.gl,t=e.getProgramParameter(A,e.ACTIVE_ATTRIBUTES),i=0;i<t;i++){var n=e.getActiveAttrib(A,i);n.location=e.getAttribLocation(A,n.name),d[n.name]=n,h.push(n)}var r=e.getProgramParameter(A,e.ACTIVE_UNIFORMS),o=0;for(i=0;i<r;i++){var a=e.getActiveUniform(A,i);if(a.type!=e.SAMPLER_2D&&a.type!=e.SAMPLER_CUBE||(a.texId=o++,N.push(a)),-1<a.name.indexOf("["))for(var s=a.name.substring(0,a.name.indexOf("[")),u=1;u<a.size;u++){var c=s+"["+u+"]",l={name:c,location:e.getUniformLocation(A,c),type:a.type};f[l.name]=l,D.push(l)}a.location=e.getUniformLocation(A,a.name),f[a.name]=a,D.push(a)}return g};g.getUniform=function(e){return f[e]},g.hasUniform=function(e){return null!=f[e]},g.setUniform=function(e,t){var i=SQR.gl,n="string"==typeof e?f[e]:e,r=t;if(!n){var o=f[e+"[0]"];if(o){for(var a=0;a<o.size;a++)t[a]&&g.setUniform(e+"["+a+"]",t[a]);return}return SQR.WARN_UNIFORM_NOT_PRESENT&&(console.warn("> SQR.Shader attempt to set uniform that does not exist: "+e),console.trace()),g}switch(r&&r.toUniform&&(r=r.toUniform(n.type)),n.type){case i.BYTE:case i.UNSIGNED_BYTE:case i.SHORT:case i.UNSIGNED_SHORT:case i.INT:i.uniform1i(n.location,r);break;case i.INT_VEC2:i.uniform2iv(n.location,r);break;case i.INT_VEC3:i.uniform3iv(n.location,r);break;case i.INT_VEC4:i.uniform4iv(n.location,r);break;case i.UNSIGNED_INT:i.uniform1i(n.location,r);break;case i.FLOAT:i.uniform1f(n.location,r);break;case i.FLOAT_VEC2:i.uniform2fv(n.location,r);break;case i.FLOAT_VEC3:i.uniform3fv(n.location,r);break;case i.FLOAT_VEC4:i.uniform4fv(n.location,r);break;case i.BOOL:i.uniform1i(n.location,r);break;case i.BOOL_VEC2:i.uniform2iv(n.location,r);break;case i.BOOL_VEC3:i.uniform3iv(n.location,r);break;case i.BOOL_VEC4:i.uniform4iv(n.location,r);break;case i.FLOAT_MAT2:i.uniformMatrix2fv(n.location,!1,r.data||r);break;case i.FLOAT_MAT3:i.uniformMatrix3fv(n.location,!1,r.data||r);break;case i.FLOAT_MAT4:i.uniformMatrix4fv(n.location,!1,r.data||r);break;case i.SAMPLER_2D:s(n,r);break;case i.SAMPLER_CUBE:u(n,r);break;default:console.warn("> SQR.Shader > WARNING! Unknown uniform type ( 0x"+n.type.toString(16)+" )")}return g};var s=function(e,t){var i=SQR.gl,n=e.texId;e.texref=t,i.activeTexture(i.TEXTURE0+n),t?(i.bindTexture(i.TEXTURE_2D,t.tex||t),t.isAnimated&&t.update()):i.bindTexture(i.TEXTURE_2D,null),i.uniform1i(e.location,n)},u=function(e,t){var i=SQR.gl,n=e.texId;e.texref=t,i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_CUBE_MAP,t.tex||t),i.uniform1i(e.location,n)};return g.updateTextures=function(){SQR.gl;for(var e=0,t=N.length;e<t;e++){var i=N[e];i.texref&&g.setUniform(i,i.texref)}return g},g.use=function(){return SQR.gl.useProgram(A),g},g.attribPointers=function(e){var t=SQR.gl,i=h.length;e=e.buffer||e;for(var n=0;n<i;n++){var r=h[n],o=e.attributes[r.name];if(!o)throw"> SQR.Shader expects attribute "+r.name+" but geometry doesn't provide it";r.enabled||t.enableVertexAttribArray(r.location),t.vertexAttribPointer(r.location,o.size,t.FLOAT,!1,e.strideByteSize,o.byteOffset),r.enabled=!0}return g},M&&M.doNotCompile||(g.compile(),g.inspect()),g},SQR.Texture=function(e,t){var a,s={},u=SQR.gl,c=t||{};s.setSource=function(e,t){if(!(e instanceof HTMLVideoElement||e instanceof Image||e instanceof HTMLCanvasElement))throw console.error("Invalid source: "+e),"SQR.Texture > provided source is not a valid source for texture";a=e;var i,n,r=(c=t||c).wrapS||c.wrap,o=c.wrapT||c.wrap;return u.bindTexture(u.TEXTURE_2D,M),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,void 0===c.flip||c.flip),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,void 0!==c.premultiplyAlpha&&c.premultiplyAlpha),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,a),l()?(c.mipmap&&u.generateMipmap(u.TEXTURE_2D),i=c.mipmap?u.LINEAR_MIPMAP_LINEAR:u.LINEAR,n=u.LINEAR):i=n=u.LINEAR,r||(r=u.CLAMP_TO_EDGE),o||(o=u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,c.magFilter||c.filter||n),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,c.minFilter||c.filter||i),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,o),u.bindTexture(u.TEXTURE_2D,null),s.isAnimated=c&&c.isAnimated||e instanceof HTMLVideoElement,s};var l=function(){var e=a.width,t=a.height;return 0<e&&0<t&&0==(e&e-1)&&0==(t&t-1)};s.getSource=function(){return a},s.setParameter=function(e,t){u.bindTexture(u.TEXTURE_2D,M),u.texParameteri(u.TEXTURE_2D,e,t),u.bindTexture(u.TEXTURE_2D,null)},s.update=function(){var e=SQR.gl;return e.bindTexture(e.TEXTURE_2D,M),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),s},s.destroy=function(){u.deleteTexture(s.tex)};var M=u.createTexture();return s.tex=M,e&&s.setSource(e,t),s},SQR.Transform=function(e,t){if(!(this instanceof SQR.Transform))return new SQR.Transform(e,t);var i=this;i._transformState=0,i.uid=t,i.name=e||"sqr.transform."+SQR.TransformCount++,i.active=!0,i.directMatrixMode=!1,i.matrix=new SQR.Matrix44,i.position=new SQR.V3,i.globalPosition=new SQR.V3,i.forward=new SQR.V3,i.quaternion=new SQR.Quaternion,i.rotation=new SQR.V3,i.scale=new SQR.V3(1,1,1),i.useQuaternion=!1,i.isStatic=!1,i.normalMatrix=new SQR.Matrix33,i.globalMatrix=new SQR.Matrix44,i.viewMatrix=new SQR.Matrix44,i.inverseWorldMatrix,i.boneMatrix=new SQR.Matrix44,i.poseMatrix=new SQR.Matrix44,i.inversePoseMatrix=new SQR.Matrix44,i.lookAt=null,i.transparent=!1,i.srcFactor=null,i.dstFactor=null,i.useDepth=!0,i.depthMask=!0,i.lineWidth=1,i.children=[],i.numChildren=0},SQR.Transform.prototype.setAsBoneRoot=function(){this.computePoseMatrix()},SQR.Transform.prototype.computePoseMatrix=function(){var e=this;e.bone=!0,e.transformWorld(),e.parent&&e.parent.bone?(e.parent.poseMatrix.copyTo(e.poseMatrix),e.poseMatrix.multiply(e.matrix)):e.matrix.copyTo(e.poseMatrix);for(var t=0;t<e.numChildren;t++){e.children[t].computePoseMatrix()}return e.poseMatrix.inverse(e.inversePoseMatrix),e},SQR.Transform.prototype.setBlending=function(e,t,i){this.transparent=e,this.srcFactor=t||SQR.gl.SRC_ALPHA,this.dstFactor=i||SQR.gl.ONE_MINUS_SRC_ALPHA},SQR.Transform.prototype.add=function(){for(var e=this,t=0;t<arguments.length;t++){var i=arguments[t];i.parent&&i.parent.remove(i),i.onAdd&&i.onAdd(e),-1==(i.parent=e).children.indexOf(i)&&e.children.push(i)}return e.numChildren=e.children.length,e},SQR.Transform.prototype.remove=function(){for(var e=this,t=0;t<arguments.length;t++){var i=arguments[t],n=e.children.indexOf(i);-1!=n&&(i.parent=null,e.children.splice(n,1),i.onRemove&&i.onRemove(e))}return e.numChildren=e.children.length,e},SQR.Transform.prototype.removeAll=function(){this.children.length=0,this.numChildren=0},SQR.Transform.prototype.contains=function(e){return-1<this.children.indexOf(e)},SQR.Transform.prototype.recurse=function(e,t){t||e(this);for(var i=0;i<this.numChildren;i++)this.children[i].recurse(e)},SQR.Transform.prototype.findByName=function(t){var i;return this.recurse(function(e){if(e.name==t)return i=e,null}),i},SQR.Transform.prototype.findById=function(t){var i;return this.recurse(function(e){if(e.uid&&e.uid==t)return i=e,null}),i},SQR.Transform.prototype.findByPath=function(e){for(var t=e.split("/"),i=this;pp=t.shift();){if(!i)return;i=i.findByName(pp)}return i},SQR.Transform.prototype.draw=function(e){var t=this,i=e&&e.replacementShader,n=i?e.replacementShader:t.shader;if(n.setUniform("uMatrix",t.globalMatrix),n.setUniform("uViewMatrix",t.viewMatrix),n.setUniform("uNormalMatrix",t.normalMatrix),!i&&n.uniforms)for(var r=0,o=(a=Object.keys(n.uniforms)).length;r<o;r++)n.setUniform(a[r],n.uniforms[a[r]]);if(!i&&t.uniforms){var a;for(r=0,o=(a=Object.keys(t.uniforms)).length;r<o;r++)n.setUniform(a[r],t.uniforms[a[r]])}var s=SQR.gl;t.useDepth?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),s.depthMask(t.depthMask),s.lineWidth(t.lineWidth),t.buffer.draw(this),t.afterDraw&&t.afterDraw()},SQR.Transform.prototype.transformWorld=function(){var e=this;if(1!=e._transformState){if(!e.directMatrixMode){var t=e.position,i=e.scale;if(e.useQuaternion){var n=e.quaternion;e.matrix.setTQS(t.x,t.y,t.z,n.w,n.x,n.y,n.z,i.x,i.y,i.z)}else{var r=e.rotation;e.matrix.setTRS(t.x,t.y,t.z,r.x,r.y,r.z,i.x,i.y,i.z)}}e.lookAt&&(e.matrix.lookAt(e.lookAt.position),e.matrix.scale(i.x,i.y,i.z)),e.parent?(e.parent.globalMatrix.copyTo(e.globalMatrix),e.globalMatrix.multiply(e.matrix),e.bone&&(e.parent.boneMatrix.copyTo(e.boneMatrix),e.boneMatrix.multiply(e.matrix))):(e.matrix.copyTo(e.globalMatrix),e.bone&&e.matrix.copyTo(e.boneMatrix));var o=e.globalMatrix;o.extractPosition(e.globalPosition),e.forward.set(o.data[8],o.data[9],o.data[10]),e.isStatic&&(e._transformState=1),e.beforeDraw&&e.beforeDraw(e)}},SQR.Transform.prototype.viewDepth=function(){return this.viewMatrix.data[14]},SQR.Transform.prototype.transformView=function(e){var t=this;e?(e.copyTo(t.viewMatrix),t.viewMatrix.multiply(t.globalMatrix)):t.globalMatrix.copyTo(t.viewMatrix),t.globalMatrix.inverseMat3(t.normalMatrix)},SQR.Transform.prototype.computeInverseMatrix=function(){var e=this;return e.inverseWorldMatrix||(e.inverseWorldMatrix=new SQR.Matrix44),e.globalMatrix.inverse(e.inverseWorldMatrix),e.inverseWorldMatrix},SQR.Transform.prototype.computeBoneMatrix=function(){return this.boneMatrix.multiply(this.inversePoseMatrix),this.boneMatrix},SQR.TransformCount=0,SQR.FrameBuffer=function(i,n,e,t){i=i||window.innerWidth,n=n||window.innerHeight,t=t||{};var r={},o=SQR.gl;if(r.texture=o.createTexture(),r.depthBuffer=o.createRenderbuffer(),e){o.bindTexture(o.TEXTURE_CUBE_MAP,r.texture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);for(var a=0;a<6;a++)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,o.RGBA,i,n,0,o.RGBA,o.UNSIGNED_BYTE,null);o.bindRenderbuffer(o.RENDERBUFFER,r.depthBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,i,n);var s=function(e){var t=o.createFramebuffer();return o.bindFramebuffer(o.FRAMEBUFFER,t),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.texture,0),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,r.depthBuffer),o.bindFramebuffer(o.FRAMEBUFFER,null),t};r.faces={right:s(0),left:s(1),up:s(2),down:s(3),front:s(4),back:s(5)},o.bindTexture(o.TEXTURE_2D,null),o.bindRenderbuffer(o.RENDERBUFFER,null)}else{if(r.fbo=o.createFramebuffer(),o.bindFramebuffer(o.FRAMEBUFFER,r.fbo),o.bindTexture(o.TEXTURE_2D,r.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,i,n,0,o.RGBA,o.UNSIGNED_BYTE,null),t.mipmap&&o.generateMipmap(o.TEXTURE_2D),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t.magFilter||t.filter||o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t.minFilter||t.filter||o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t.wrapS||t.wrap||o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t.wrapT||t.wrap||o.CLAMP_TO_EDGE),o.bindRenderbuffer(o.RENDERBUFFER,r.depthBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,i,n),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,r.texture,0),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,r.depthBuffer),t.leaveBind)return;o.bindTexture(o.TEXTURE_2D,null),o.bindRenderbuffer(o.RENDERBUFFER,null),o.bindFramebuffer(o.FRAMEBUFFER,null)}return r.bind=function(e){var t=r.faces?r.faces[e]:r.fbo;o.viewport(0,0,i,n),o.bindFramebuffer(o.FRAMEBUFFER,t)},r.setParameter=function(e,t){o.bindTexture(o.TEXTURE_2D,r.texture),o.texParameteri(o.TEXTURE_2D,e,t),o.bindTexture(o.TEXTURE_2D,null)},r.unbind=function(){o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,r.texture),t.mipmap&&o.generateMipmap(o.TEXTURE_2D)},r.resize=function(e,t){i=e,n=t,o.bindFramebuffer(o.FRAMEBUFFER,r.fbo),o.bindTexture(o.TEXTURE_2D,r.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,i,n,0,o.RGBA,o.UNSIGNED_BYTE,null),o.bindRenderbuffer(o.RENDERBUFFER,r.depthBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,i,n),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindRenderbuffer(o.RENDERBUFFER,null)},r},SQR.Collider=function(e){var t=this;this.center=new SQR.V3,this.type=e,this.radius,this.box,this.buffer,this.hit=!1,this.calculateBoundingBox=function(){var e=Number.MAX_VALUE,n={minX:e,maxX:-e,minY:e,maxY:-e,minZ:e,maxZ:-e};return t.buffer.iterate("aPosition",function(e,t,i){n.minX=Math.min(n.minX,t[e+0]),n.maxX=Math.max(n.maxX,t[e+0]),n.minY=Math.min(n.minY,t[e+1]),n.maxY=Math.max(n.maxY,t[e+1]),n.minZ=Math.min(n.minZ,t[e+2]),n.maxZ=Math.max(n.maxZ,t[e+2])}),n}},SQR.Collider.SPHERE=1,SQR.Collider.BOX=2,SQR.Collider.MESH=3,SQR.Collider.Sphere=function(e,t){var i=new SQR.Collider(SQR.Collider.SPHERE);return i.radius=e||0,t&&i.center.copyFrom(t),i},SQR.Collider.Box=function(e){var t=new SQR.Collider(SQR.Collider.BOX);return t.box=e,t},SQR.Collider.Mesh=function(e){var t=new SQR.Collider(SQR.Collider.MESH);return t.buffer=e,t.box=t.calculateBoundingBox(),t},SQR.Color=function(e,t,i,n){if(!(this instanceof SQR.Color))return new SQR.Color(e,t,i,n);"string"==typeof e?(this.setHex(e),this.a=null==t?1:t):e&&null!=e.r?(this.setRGB(e.r,e.g,e.b),null!=e.a?this.a=e.a:this.a=null!=t?t:1):(this.setRGB(e,t,i),this.a=null==n?1:n)},SQR.Color.prototype.setRGB=function(e,t,i,n){var r=this;return r.r=e||0,r.g=t||0,r.b=i||0,r.a=null!=n?n:1,r},SQR.Color.prototype.setHex=function(e){var t=this;return"string"==typeof e&&(e=-1==(e=0==e.indexOf("#")?e.substring(1):e).indexOf("0x")?"0x"+e:e,e=parseInt(e)),t.r=(e>>16&255)/255,t.g=(e>>8&255)/255,t.b=(255&e)/255,t.a=1,t},SQR.Color.prototype.setCSS=function(e){var t=this;if(-1<e.indexOf("#"))this.setHex(e);else{var i=e.match(/\(([^\)]+)\)/);i=i[1].split(","),t.r=parseInt(i[0])/255,t.g=parseInt(i[1])/255,t.b=parseInt(i[2])/255;var n=-1<e.indexOf("a");t.a=n?parseFloat(i[3]):1}return t},SQR.Color.prototype.toCSS=function(){var e=this,t=255*e.r|0,i=255*e.g|0,n=255*e.b|0,r=e.a<1?", "+e.a.toPrecision(2):"";return(e.a<1?"rgba":"rgb")+"("+t+", "+i+", "+n+r+")"},SQR.Color.prototype.toHex=function(){var e=function(e){var t=Math.round(255*e).toString(16);return 1==t.length?"0"+t:t};return"#"+e(this.r)+e(this.g)+e(this.b)},SQR.Color.prototype.copyFrom=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},SQR.Color.prototype.lighten=function(e){return this.mul(e)},SQR.Color.prototype.clone=function(){return new SQR.Color(c.r,c.g,c.b)},SQR.Color.prototype.mul=function(e){var t=this;return t.r=Math.min(1,t.r*e),t.g=Math.min(1,t.g*e),t.b=Math.min(1,t.b*e),t},SQR.Color.prototype.lerp=function(e,t,i){var n=1-i;return this.r=e.r*n+t.r*i,this.g=e.g*n+t.g*i,this.b=e.b*n+t.b*i,this},SQR.Color.prototype.toUniform=function(e){var t=e==SQR.gl.FLOAT_VEC4,i=this;return i._array||(i._array=new Float32Array(t?4:3)),i._array[0]=i.r,i._array[1]=i.g,i._array[2]=i.b,t&&(i._array[3]=i.a),i._array},Math.clamp=function(e,t,i){return i<t&&(i=[t,t=i][0]),e<=t?t:i<=e?i:e},Math.clamp01=function(e){return e<=0?0:1<=e?1:e},Math.absMin=function(e,t){return e<=-t||t<=e?e:0<=e?t:-t},Math.map=function(e,t,i){return e<=t?0:i<=e?1:(e-t)/(i-t)},SQR.Matrix2D=function(){var t,i,s,n,r,o,a,u,c,l,M,A,g,d,h,f,D,N,y,p;this.data=new Float32Array(9),this.identity=function(e){return(e=e||this.data)[0]=1,e[3]=0,e[6]=0,e[1]=0,e[4]=1,e[7]=0,e[2]=0,e[5]=0,e[8]=1,this},this.transformVector=function(e){return s=this.data,n=e.x,r=e.y,e.x=s[0]*n+s[1]*r+s[2],e.y=s[3]*n+s[4]*r+s[5],e},this.setTranslation=function(e,t,i){return(s=i||this.data)[0]=1,s[3]=0,s[6]=e,s[1]=0,s[4]=1,s[7]=t,s[2]=0,s[5]=0,s[8]=1,this},this.getTranslation=function(e){return s=this.data,(e=e||new SQR.V2).x=s[2],e.y=s[5],e},this.setScale=function(e,t,i){return(s=i||this.data)[0]=e,s[3]=0,s[6]=0,s[1]=0,s[4]=t,s[7]=0,s[2]=0,s[5]=0,s[8]=1,this},this.setShear=function(e,t,i){return(s=i||this.data)[0]=1,s[3]=e,s[6]=0,s[1]=t,s[4]=1,s[7]=0,s[2]=0,s[5]=0,s[8]=1,this},this.setRotation=function(e,t){s=t||this.data;var i=Math.cos(e),n=Math.sin(e);return s[0]=i,s[3]=-n,s[6]=0,s[1]=n,s[4]=i,s[7]=0,s[2]=0,s[5]=0,s[8]=1,this},this.setTRS=function(e,t,i,n,r){s=this.data;var o=Math.cos(i),a=Math.sin(i);return s[0]=o*n,s[3]=-a*r,s[6]=e,s[1]=a*n,s[4]=o*r,s[7]=t,s[2]=0,s[5]=0,s[8]=1,this},this.translate=function(e,t){return this.identity(SQR.Matrix2D.__temp),this.setTranslation(e,t,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.rotate=function(e){return this.identity(SQR.Matrix2D.__temp),this.setRotation(e,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.scale=function(e,t){return this.identity(SQR.Matrix2D.__temp),this.setScale(e,t,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.shear=function(e,t){return this.identity(SQR.Matrix2D.__temp),this.setRotation(e,t,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.multiply=function(e){return t=this.data,i=e.data||e,o=t[0],a=t[3],u=t[6],c=t[1],l=t[4],M=t[7],t[2],t[5],t[8],A=i[0],g=i[3],d=i[6],h=i[1],f=i[4],D=i[7],N=i[2],y=i[5],p=i[8],t[0]=o*A+a*h+u*N,t[3]=o*g+a*f+u*y,t[6]=o*d+a*D+u*p,t[1]=c*A+l*h+M*N,t[4]=c*g+l*f+M*y,t[7]=c*d+l*D+M*p,this},this.copyTo=function(e){return t=this.data,(i=e.data||e)[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],e},this.copyFrom=function(e){return t=e.data||e,(i=this.data)[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},this.identity()},SQR.Matrix2D.__temp=new Float32Array(9),SQR.Matrix33=function(){this.data=new Float32Array(9),this.identity=function(){var e=this.data;return e[0]=1,e[3]=0,e[6]=0,e[1]=0,e[4]=1,e[7]=0,e[2]=0,e[5]=0,e[8]=1,this},this.copyTo=function(e){for(var t=this.data,i=e.data||e,n=0;n<9;n++)i[n]=t[n];return this},this.copyFrom=function(e){for(var t=this.data,i=e.data||e,n=0;n<9;n++)t[n]=i[n];return this},this.transformVector=function(e,t){var i=this.data,n=e.x,r=e.y,o=e.z;return(t=t||e).x=i[0]*n+i[3]*r+i[6]*o,t.y=i[1]*n+i[4]*r+i[7]*o,t.z=i[2]*n+i[5]*r+i[8]*o,t},this.determinant=function(){var e=this.data;return e[0]*(e[4]*e[8]-e[7]*e[5])+e[3]*(e[7]*e[2]-e[1]*e[8])+e[6]*(e[1]*e[5]-e[4]*e[2])},this.inverse=function(e){var t=this.data;e=e||this.data;var i,n=t[0],r=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],M=t[8],A=M*s-u*l,g=-M*a+u*c,d=l*a-s*c;return(t=n*A+r*g+o*d)?(i=1/t,e[0]=A*i,e[1]=(-M*r+o*l)*i,e[2]=(u*r-o*s)*i,e[3]=g*i,e[4]=(M*n-o*c)*i,e[5]=(-u*n+o*a)*i,e[6]=d*i,e[7]=(-l*n+r*c)*i,e[8]=(s*n-r*a)*i):console.warn("Attempt to inverse a singular matrix33. ",this.data),e},this.transpose=function(){var e=this.data,t=e[0],i=e[3],n=e[6],r=e[1],o=e[4],a=e[7],s=e[2],u=e[5],c=e[8];e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c}},SQR.Matrix44=function(e){this.data=e||new Float32Array(16),this.identity=function(e){var t=e||this.data;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},this.transformVector=function(e,t){var i=this.data,n=e.x,r=e.y,o=e.z,a=e.w;return(t=t||e).x=i[0]*n+i[4]*r+i[8]*o+i[12]*a,t.y=i[1]*n+i[5]*r+i[9]*o+i[13]*a,t.z=i[2]*n+i[6]*r+i[10]*o+i[14]*a,t},this.rotateVector=function(e,t){var i=this.data,n=e.x,r=e.y,o=e.z;e.w;return(t=t||e).x=i[0]*n+i[4]*r+i[8]*o,t.y=i[1]*n+i[5]*r+i[9]*o,t.z=i[2]*n+i[6]*r+i[10]*o,t},this.multiply=function(e){var t,i,n,r,o,a,s,u,c,l,M,A,g,d,h,f,D,N,y,p,T,w,E,L,m,I,x,S,j,v,z,O,C=this.data,Q=e.data||e;return t=C[0],i=C[1],n=C[2],r=C[3],o=C[4],a=C[5],s=C[6],u=C[7],c=C[8],l=C[9],M=C[10],A=C[11],g=C[12],d=C[13],h=C[14],f=C[15],D=Q[0],N=Q[1],y=Q[2],p=Q[3],T=Q[4],w=Q[5],E=Q[6],L=Q[7],m=Q[8],I=Q[9],x=Q[10],S=Q[11],j=Q[12],v=Q[13],z=Q[14],O=Q[15],C[0]=t*D+o*N+c*y+g*p,C[1]=i*D+a*N+l*y+d*p,C[2]=n*D+s*N+M*y+h*p,C[3]=r*D+u*N+A*y+f*p,C[4]=t*T+o*w+c*E+g*L,C[5]=i*T+a*w+l*E+d*L,C[6]=n*T+s*w+M*E+h*L,C[7]=r*T+u*w+A*E+f*L,C[8]=t*m+o*I+c*x+g*S,C[9]=i*m+a*I+l*x+d*S,C[10]=n*m+s*I+M*x+h*S,C[11]=r*m+u*I+A*x+f*S,C[12]=t*j+o*v+c*z+g*O,C[13]=i*j+a*v+l*z+d*O,C[14]=n*j+s*v+M*z+h*O,C[15]=r*j+u*v+A*z+f*O,this},this.setTQS=function(e,t,i,n,r,o,a,s,u,c,l){var M=l||this.data;this.identity(l);var A=r*r,g=o*o,d=a*a;return SQR.flipMatrix?(M[0]=(1-2*g-2*d)*s,M[1]=(2*r*o-2*a*n)*s,M[2]=(2*r*a+2*o*n)*s,M[4]=(2*r*o+2*a*n)*u,M[5]=(1-2*A-2*d)*u,M[6]=(2*o*a-2*r*n)*u,M[8]=(2*r*a-2*o*n)*c,M[9]=(2*o*a+2*r*n)*c):(M[0]=(1-2*g-2*d)*s,M[4]=(2*r*o-2*a*n)*s,M[8]=(2*r*a+2*o*n)*s,M[1]=(2*r*o+2*a*n)*u,M[5]=(1-2*A-2*d)*u,M[9]=(2*o*a-2*r*n)*u,M[2]=(2*r*a-2*o*n)*c,M[6]=(2*o*a+2*r*n)*c),M[10]=(1-2*A-2*g)*c,M[12]=e,M[13]=t,M[14]=i,l||this},this.setTRS=function(e,t,i,n,r,o,a,s,u,c){var l=c||this.data;this.identity(c);var M=Math.sin(n),A=Math.cos(n),g=Math.sin(r),d=Math.cos(r),h=Math.sin(o),f=Math.cos(o);return SQR.flipMatrix?(l[0]=(d*f+g*M*h)*a,l[1]=(-d*h+g*M*f)*a,l[2]=g*A*a,l[4]=h*A*s,l[5]=f*A*s,l[6]=-M*s,l[8]=(-g*f+d*M*h)*u,l[9]=(h*g+d*M*f)*u):(l[0]=(d*f+g*M*h)*a,l[4]=(-d*h+g*M*f)*a,l[8]=g*A*a,l[1]=h*A*s,l[5]=f*A*s,l[9]=-M*s,l[2]=(-g*f+d*M*h)*u,l[6]=(h*g+d*M*f)*u),l[10]=d*A*u,l[12]=e,l[13]=t,l[14]=i,c||this},this.setScale=function(e,t,i,n){var r=n||this.data;return r[0]=e,r[5]=t,r[10]=i,n||this},this.setTranslation=function(e,t,i,n){var r=n||this.data;return r[12]=e,r[13]=t,r[14]=i,n||this},this.setRotation=function(e,t,i,n){var r=n||this.data,o=Math.sin(e),a=Math.cos(e),s=Math.sin(t),u=Math.cos(t),c=Math.sin(i),l=Math.cos(i);return r[0]=u*l+s*o*c,r[1]=-u*c+s*o*l,r[2]=s*a,r[4]=c*a,r[5]=l*a,r[6]=-o,r[8]=-s*l+u*o*c,r[9]=c*s+u*o*l,r[10]=u*a,n||this},this.translate=function(e,t,i){return this.identity(SQR.Matrix44.__temp),this.setTranslation(e,t,i,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.rotate=function(e,t,i){return this.identity(SQR.Matrix44.__temp),this.setRotation(e,t,i,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.scale=function(e,t,i){return this.identity(SQR.Matrix44.__temp),this.setScale(e,t,i,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.copyTo=function(e){for(var t=this.data,i=e.data||e,n=0;n<16;n++)i[n]=t[n];return this},this.copyFrom=function(e){for(var t=this.data,i=e.data||e,n=0;n<16;n++)t[n]=i[n];return this},this.copyRotationTo=function(e){var t=this.data,i=e.data||e;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[4],i[4]=t[5],i[5]=t[6],i[6]=t[8],i[7]=t[9],i[8]=t[10],e},this.extractPosition=function(e){var t=this.data;return e.set(t[12],t[13],t[14]),e},this.determinant=function(){var e=this.data;return e[0]*(e[5]*e[10]-e[9]*e[6])+e[4]*(e[9]*e[2]-e[1]*e[10])+e[8]*(e[1]*e[6]-e[5]*e[2])},this.inverse=function(e){var t=this.data,i=e?e.data||e:this.data,n=t[0],r=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],M=t[8],A=t[9],g=t[10],d=t[11],h=t[12],f=t[13],D=t[14],N=t[15],y=n*u-r*s,p=n*c-o*s,T=n*l-a*s,w=r*c-o*u,E=r*l-a*u,L=o*l-a*c,m=M*f-A*h,I=M*D-g*h,x=M*N-d*h,S=A*D-g*f,j=A*N-d*f,v=g*N-d*D,z=y*v-p*j+T*S+w*x-E*I+L*m;return z?(z=1/z,i[0]=(u*v-c*j+l*S)*z,i[1]=(o*j-r*v-a*S)*z,i[2]=(f*L-D*E+N*w)*z,i[3]=(g*E-A*L-d*w)*z,i[4]=(c*x-s*v-l*I)*z,i[5]=(n*v-o*x+a*I)*z,i[6]=(D*T-h*L-N*p)*z,i[7]=(M*L-g*T+d*p)*z,i[8]=(s*j-u*x+l*m)*z,i[9]=(r*x-n*j-a*m)*z,i[10]=(h*E-f*T+N*y)*z,i[11]=(A*T-M*E-d*y)*z,i[12]=(u*I-s*S-c*m)*z,i[13]=(n*S-r*I+o*m)*z,i[14]=(f*p-h*w-D*y)*z,i[15]=(M*w-A*p+g*y)*z,e):null},this.inverseMat3=function(e){var t=this.data,i=e.data,n=this.determinant();if(Math.abs(n)<1e-4)return console.warn("> SQR.Matrix44 - Attempt to inverse a singular matrix44. ",this.data),console.trace(),e;var r=t[0],o=t[4],a=t[8],s=(t[12],t[1]),u=t[5],c=t[9],l=(t[13],t[2]),M=t[6],A=t[10];t[14];return n=1/n,i[0]=(u*A-c*M)*n,i[1]=(a*M-o*A)*n,i[2]=(o*c-a*u)*n,i[3]=(c*l-s*A)*n,i[4]=(r*A-a*l)*n,i[5]=(a*s-r*c)*n,i[6]=(s*M-u*l)*n,i[7]=(o*l-r*M)*n,i[8]=(r*u-o*s)*n,e},this.transpose=function(e){var t=this.data,i=e?e.data||e:this.data,n=t[0],r=t[4],o=t[8],a=t[1],s=t[5],u=t[9],c=t[2],l=t[6],M=t[10];i[0]=n,i[1]=r,i[2]=o,i[4]=a,i[5]=s,i[6]=u,i[8]=c,i[9]=l,i[10]=M},this.lookAt=function(e,t){var i=this.data,n=SQR.V3.__tv1,r=SQR.V3.__tv2,o=SQR.V3.__tv3;return t=t||SQR.V3.up,o.set(i[12],i[13],i[14]),o.sub(o,e).norm(),0===o.magsq()&&(o.z=1),n.cross(t,o).norm(),0===n.magsq()&&(o.x+=1e-4,n.cross(t,o).norm()),r.cross(o,n),i[0]=n.x,i[4]=r.x,i[8]=o.x,i[1]=n.y,i[5]=r.y,i[9]=o.y,i[2]=n.z,i[6]=r.z,i[10]=o.z,this},e||this.identity()},SQR.Matrix44.__temp=new Float32Array(16),SQR.ProjectionMatrix=function(){"undefined"==typeof Float32Array&&(Float32Array=Array),this.data=new Float32Array(16),this.copyTo=function(e){for(var t=this.data,i=e.data||e,n=0;n<16;n++)i[n]=t[n];return e},this.identity()},SQR.ProjectionMatrix.getBoundsAtDistance=function(e,t,i,n){var r=(i=i||window.innerWidth)/(n=n||window.innerHeight),o=t*Math.tan(e/180*Math.PI/2);return{w:o*r,h:o}},SQR.ProjectionMatrix.prototype.identity=function(){var e=this.data;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},SQR.ProjectionMatrix.prototype.screenPixels2d=function(){return this.orthographic(window.innerWidth,0,window.innerHeight,0,-1,1e3),this},SQR.ProjectionMatrix.prototype.orthographic=function(e,t,i,n,r,o){var a=this.data;this.near=r;var s=t-e,u=i-n,c=(this.far=o)-r,l=(t+e)/s,M=(i+n)/u,A=(o+r)/c;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2/u,a[9]=0,a[13]=-M,a[2]=0,a[6]=0,a[10]=-2/c,a[14]=-A,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},SQR.ProjectionMatrix.prototype.perspective=function(e,t,i,n){e=e||60,i=i||1,n=n||1e3;var r=this.data,o=i*Math.tan(e*Math.PI/360),a=n-i;return r[0]=i/(o*t),r[4]=0,r[8]=0,r[12]=0,r[1]=0,r[5]=i/o,r[9]=0,r[13]=0,r[2]=0,r[6]=0,r[10]=-(n+i)/a,r[14]=-2*n*i/a,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this.fov=e,this.near=i,this.far=n,this},SQR.ProjectionMatrix.prototype.transformVector=function(e,t){var i=e.x,n=e.y,r=e.z,o=e.w,a=this.data;return(t=t||e).x=a[0]*i+a[4]*n+a[8]*r+a[12]*o,t.y=a[1]*i+a[5]*n+a[9]*r+a[13]*o,t.z=a[2]*i+a[6]*n+a[10]*r+a[14]*o,t},SQR.Quaternion=function(e,t,i,n){this.set(n,e,t,i)},SQR.Quaternion.prototype.set=function(e,t,i,n){return this.w=n||1,this.x=e||0,this.y=t||0,this.z=i||0,this},SQR.Quaternion.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.z=this.z,e.w=this.w,this},SQR.Quaternion.prototype.copyFrom=function(e){return e instanceof Array||e instanceof Float32Array?(this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3]):(this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w),this},SQR.Quaternion.prototype.identity=function(){return this.set(),this},SQR.Quaternion.prototype.mul=function(e,t){var i=(t=t||this).w*e.w-t.x*e.x-t.y*e.y-t.z*e.z,n=t.w*e.x+t.x*e.w+t.y*e.z-t.z*e.y,r=t.w*e.y-t.x*e.z+t.y*e.w+t.z*e.x,o=t.w*e.z+t.x*e.y-t.y*e.x+t.z*e.w;return t.set(n,r,o,i),t.normalize(),t},SQR.Quaternion.prototype.dot=function(e){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},SQR.Quaternion.prototype.lookAt=function(e,t){var i=SQR.Quaternion.__tv1,n=SQR.Quaternion.__tv2,r=SQR.Quaternion.__tv3;e.copyTo(i),t.copyTo(r),i.norm(),-1==i.z&&(i.x=1e-4,i.norm()),n.cross(r,i),r.cross(i,n),this.w=.5*Math.sqrt(1+n.x+r.y+i.z);var o=4*this.w;return this.x=(i.y-r.z)/o,this.y=(n.z-i.x)/o,this.z=(r.x-n.y)/o,this.normalize(),this},SQR.Quaternion.prototype.fromAngleAxis=function(e,t,i,n){var r=Math.sin(e/2);return this.x=t*r,this.y=i*r,this.z=n*r,this.w=Math.cos(e/2),this},SQR.Quaternion.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},SQR.Quaternion.prototype.normalize=function(){var e=this.mag();return this.x/=e,this.y/=e,this.z/=e,this.w/=e,this},SQR.Quaternion.prototype.neg=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this},SQR.Quaternion.prototype.inverse=function(){var e=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;this.x=-this.x/e,this.y=-this.y/e,this.z=-this.z/e,this.w=this.w/e},SQR.Quaternion.prototype.toMatrix=function(e){throw"SQR.Quaternion.toMatrix() is not implemented. Check SQR.Matrix44.TQS()"},SQR.Quaternion.slerp=function(e,t,i,n){if(n=n||new SQR.Quaternion,0===i)return n.copyFrom(e);if(1===i)return n.copyFrom(t);var r=SQR.Quaternion.dot(e,t);r<0&&(e.neg(),r=SQR.Quaternion.dot(e,t));var o=Math.acos(r),a=Math.sqrt(1-r*r),s=Math.sin((1-i)*o)/a,u=Math.sin(i*o)/a;return 1<=Math.abs(r)?(s=1,u=0):Math.abs(a)<.001&&(u=s=.5),n.w=e.w*s+t.w*u,n.x=e.x*s+t.x*u,n.y=e.y*s+t.y*u,n.z=e.z*s+t.z*u,n},SQR.Quaternion.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},SQR.Quaternion.prototype.slerp=function(e,t,i){return SQR.Quaternion.slerp(e,t,i,this),this},SQR.Quaternion.__tv1=new SQR.Quaternion,SQR.Quaternion.__tv2=new SQR.Quaternion,SQR.Quaternion.__tv3=new SQR.Quaternion,SQR.V2=function(e,t){this.set(e,t),this.size=2},SQR.V2.prototype.set=function(e,t){return this.x=e||0,this.y=t||0,this},SQR.V2.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e},SQR.V2.prototype.copyFrom=function(e){return e instanceof Array?(this.x=e[0],this.y=e[1]):(this.x=e.x,this.y=e.y),this},SQR.V2.prototype.clone=function(){return new SQR.V2(this.x,this.y)},SQR.V2.prototype.magsq=function(){return this.x*this.x+this.y*this.y},SQR.V2.prototype.mag=function(){return Math.sqrt(this.magsq())},SQR.V2.prototype.isZero=function(){return 0==this.x&&0==this.y},SQR.V2.prototype.mul=function(e){return this.x*=e,this.y*=e,this},SQR.V2.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},SQR.V2.prototype.norm=function(){var e=1/this.mag();return this.set(this.x*e,this.y*e),this},SQR.V2.prototype.add=function(e,t){return t=t||this,this.x=e.x+t.x,this.y=e.y+t.y,this},SQR.V2.prototype.sub=function(e,t){return t=t||this,this.x=e.x-t.x,this.y=e.y-t.y,this},SQR.V2.prototype.lerp=function(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this},SQR.V2.dot=function(e,t){return e.x*t.x+e.y*t.y},SQR.V2.prototype.perp=function(){return this.set(this.y,-this.x),this},SQR.V2.prototype.toUniform=function(){return this.toArray()},SQR.V2.prototype.toArray=function(){return this.array||(this.array=new Float32Array(2)),this.array[0]=this.x,this.array[1]=this.y,this.array},SQR.V3=function(e,t,i){this.set(e,t,i),this.size=3,SQR.V3.instances++},SQR.V3.prototype.set=function(e,t,i,n){return this.x=e||0,this.y=t||0,this.z=i||0,this.w=n||1,this},SQR.V3.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,null!=e.z&&(e.z=this.z),e},SQR.V3.prototype.copyFrom=function(e){return e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0),this},SQR.V3.prototype.clone=function(){return new SQR.V3(this.x,this.y,this.z)},SQR.V3.prototype.magsq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},SQR.V3.prototype.mag=function(){return Math.sqrt(this.magsq())},SQR.V3.prototype.isZero=function(){return Math.abs(this.x)<SQR.EPSILON&&Math.abs(this.y)<SQR.EPSILON&&Math.abs(this.z)<SQR.EPSILON},SQR.V3.prototype.mul=function(e){return this.x*=e,this.y*=e,this.z*=e,this},SQR.V3.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},SQR.V3.prototype.norm=function(){var e=1/this.mag();return this.set(this.x*e,this.y*e,this.z*e),this},SQR.V3.prototype.add=function(e,t){return t=t||this,this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},SQR.V3.prototype.sub=function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},SQR.V3.prototype.lerp=function(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this},SQR.V3.prototype.random=function(){return this.x=2*Math.random()-1,this.y=2*Math.random()-1,this.z=2*Math.random()-1,this},SQR.V3.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},SQR.V3.prototype.cross=function(e,t){var i=e.y*t.z-e.z*t.y,n=e.z*t.x-e.x*t.z,r=e.x*t.y-e.y*t.x;return this.set(i,n,r,this.w),this},SQR.V3.prototype.toUniform=function(){return this.toArray()},SQR.V3.prototype.toArray=function(){return this.array||(this.array=new Float32Array(3)),this.array[0]=this.x,this.array[1]=this.y,this.array[2]=this.z,this.array},SQR.V3.prototype.toString=function(){return x},SQR.V3.prototype.toScreenSpace=function(e,t){e=e||window.innerWidth,t=t||window.innerHeight,this.x=this.x/this.z*e/2+e/2,this.y=this.y/this.z*t/2+t/2,this.y=t-this.y},SQR.V3.prototype.addNormal=function(e){this.normal||(this.normal=new SQR.V3),this.normal.add(this.normal,e)},SQR.V3.prototype.resetNormal=function(e){this.normal&&this.normal.set()},SQR.V3.up=new SQR.V3(0,1,0),SQR.V3.forward=new SQR.V3(0,0,1),SQR.V3.__tv1=new SQR.V3,SQR.V3.__tv2=new SQR.V3,SQR.V3.__tv3=new SQR.V3,SQR.V3.instances=0,SQR.Intersection={},SQR.Intersection.rayTest=function(e,t){if(!t.collider)return console.log("Intersection test failed. "+t.name+" has no collider."),!1;switch(SQR.Intersection.__tv1||(SQR.Intersection.__tv1=new SQR.V3,SQR.Intersection.__tv2=new SQR.V3,SQR.Intersection.__tv3=new SQR.V3,SQR.Intersection.__tv4=new SQR.V3,SQR.Intersection.__tv5=new SQR.V3,SQR.Intersection.__tv6=new SQR.V3,SQR.Intersection.__tv7=new SQR.V3),t.collider.type){case SQR.Collider.SPHERE:return SQR.Intersection.raySphere(e,t);case SQR.Collider.BOX:return SQR.Intersection.rayBox(e,t);case SQR.Collider.MESH:return SQR.Intersection.rayMesh(e,t);default:throw console.log(t.collider),"> SQR.Intersection > unknown collider type on "+t.name}},SQR.Intersection.rayMesh=function(e,t){if(t.collider.box){if(!SQR.Intersection.rayBox(e,t))return!1}else e.makeLocal(t);for(var i=t.buffer.getDataArray(),n=t.buffer.getIndexArray(),r=t.buffer.attributes.aPosition.offset,o=!1,a=SQR.Intersection.__tv1,s=SQR.Intersection.__tv2,u=SQR.Intersection.__tv3,c=0;c<n.length;c+=3){var l=n[c+0]*t.buffer.strideSize+r,M=n[c+1]*t.buffer.strideSize+r,A=n[c+2]*t.buffer.strideSize+r;if(a.set(i[l],i[l+1],i[l+2]),s.set(i[M],i[M+1],i[M+2]),u.set(i[A],i[A+1],i[A+2]),o=o||SQR.Intersection.rayTriangle(e,a,s,u))break}return o},SQR.Intersection.rayTriangle=function(e,t,i,n,r){var o=SQR.Intersection.__tv4,a=(r=SQR.Intersection.__tv5,SQR.Intersection.__tv6),s=SQR.Intersection.__tv7;a.sub(t,i),s.sub(n,t),r.cross(a,s).norm();var u=SQR.V3.dot(r,e.localDirection);if(!(u<0))return!1;var c,l,M,A,g,d,h=SQR.V3.dot(r,t)-SQR.V3.dot(r,e.localOrigin);if(!(h<=0))return!1;h/=u,o.copyFrom(e.localDirection),(o=o.norm().mul(h)).add(e.localOrigin),Math.abs(r.x)>Math.abs(r.y)?Math.abs(r.x)>Math.abs(r.z)?(c=o.y-t.y,l=i.y-t.y,M=n.y-t.y,A=o.z-t.z,g=i.z-t.z,d=n.z-t.z):(c=o.x-t.x,l=i.x-t.x,M=n.x-t.x,A=o.y-t.y,g=i.y-t.y,d=n.y-t.y):Math.abs(r.y)>Math.abs(r.z)?(c=o.x-t.x,l=i.x-t.x,M=n.x-t.x,A=o.z-t.z,g=i.z-t.z,d=n.z-t.z):(c=o.x-t.x,l=i.x-t.x,M=n.x-t.x,A=o.y-t.y,g=i.y-t.y,d=n.y-t.y);var f=l*d-g*M;if(0==f)return!1;var D=(c*d-A*M)*(f=1/f);if(!(0<=D))return!1;var N=(l*A-g*c)*f;return 0<=N&&(0<=1-D-N&&h)},SQR.Intersection.raySphere=function(e,t){var i=SQR.Intersection.__tv1,n=t.collider.radius,r=n*n;if(e.makeLocal(t),i.sub(t.collider.center,e.localOrigin),i.lengthSq<r)return!1;var o=SQR.V3.dot(i,e.localDirection);return!(o<=0)&&(0<=(t=r-(i.magsq()-o*o))&&Math.abs(o)-Math.sqrt(t))},SQR.Intersection.rayBox=function(e,t){var i=t.collider.box;e.makeLocal(t);var n=0,r=0,o=0,a=!0;if(e.localOrigin.x<i.minX?(n=i.minX-e.localOrigin.x,n/=e.localDirection.x,a=!1,-1):e.localOrigin.x>i.maxX&&(n=i.maxX-e.localOrigin.x,n/=e.localDirection.x,a=!1,1),e.localOrigin.y<i.minY?(r=i.minY-e.localOrigin.y,r/=e.localDirection.y,a=!1,-1):e.localOrigin.y>i.maxY&&(r=i.maxY-e.localOrigin.y,r/=e.localDirection.y,a=!1,1),e.localOrigin.z<i.minZ?(o=i.minZ-e.localOrigin.z,o/=e.localDirection.z,a=!1,-1):e.localOrigin.z>i.maxZ&&(o=i.maxZ-e.localOrigin.z,o/=e.localDirection.z,a=!1,1),a)return-1;var s=0,u=n;switch(u<r&&(s=1,u=r),u<o&&(s=2,u=o),s){case 0:if((M=e.localOrigin.y+e.localDirection.y*u)<i.minY||M>i.maxY)return!1;if((c=e.localOrigin.z+e.localDirection.z*u)<i.minZ||c>i.maxZ)return!1;break;case 1:var c;if((l=e.localOrigin.x+e.localDirection.x*u)<i.minX||l>i.maxX)return!1;if((c=e.localOrigin.z+e.localDirection.z*u)<i.minZ||c>i.maxZ)return!1;break;case 2:var l,M;if((l=e.localOrigin.x+e.localDirection.x*u)<i.minX||l>i.maxX)return!1;if((M=e.localOrigin.y+e.localDirection.y*u)<i.minY||M>i.maxY)return!1}return u},SQR.Mesh=function(){if(!(this instanceof SQR.Mesh))return new SQR.Mesh;var f=this;f.polys=[],f.vertices=[],f.uvs=[],f.size=0,f.addVertex=function(e,t,i){var n=new SQR.Vertex(e,t,i);return f.vertices.push(n),f.vertices.length-1},f.addUV=function(e,t){t=new SQR.V2(e,t);return f.uvs.push(t),f.uvs.length-1},f.addFace=function(){var e=new SQR.Poly(f);return e.V.apply(e,arguments),f.polys.push(e),f.size+=e.triangles.length,e},f.calculateNormals=function(e){f.smooth=e;for(var t=0,i=f.polys.length;t<i;t++)f.polys[t].calculateNormal();if(f.smooth)for(t=0,i=f.vertices.length;t<i;t++)f.vertices[t].polys&&f.vertices[t].calculateNormal();return f},f.flip=function(){for(var e=0,t=f.polys.length;e<t;e++)f.polys[e].flip();return f},f.calculateTangents=function(){console.log("SQR.Mesh.calculateTangents is not implemented yet!")};f.update=function(){if(0!=f.polys.length){for(var e,t,i,n=f.buffer||(e=f.polys[0],t=f.size,i={aPosition:3},e.normal&&(i.aNormal=3),0<e.uvs.length&&(i.aUV=2),f.buffer=SQR.Buffer().layout(i,t),f.buffer),r=n.attributes.aPosition,o=0,a=[],s=0,u=f.polys.length;s<u;s++)for(var c=f.polys[s],l=0,M=c.triangles.length;l<M;l++){var A=c.triangles[l],g=f.vertices[c.vertices[A]],d=(r=g.position,f.smooth?g.normal:c.normal),h=f.uvs[c.uvs[A]];a.length=0,a.push(r.x,r.y,r.z,d.x,d.y,d.z,h.x,h.y),n.set(null,o,a),o++}return n.update(),n.mesh||(n.mesh=f),n}console.warn("> SQR.Mesh.update > no polys found to create buffer from.")},f.V=f.addVertex,f.F=f.addFace,f.T=f.addUV},SQR.Mesh.fromJSON=function(e,t,i){var n;if(i=i||{},t)n=e[t];else if(e.vertices)n=e;else for(var r in e){n=e[r];break}if(!n)throw"> SQR.Mesh - mesh not found in data (name: "+t+")";var o={aPosition:"vertices",aNormal:"normals",aColor:"colors",aUV:"uv1",aUV2:"uv2",aTangent:"tangent",aWeight:"boneWeights",aIndex:"boneIndices",indices:"tris"},a=function(e){var t=n[e]||n[o[e]];return t&&0<t.length?t:0==t.length&&"aUV2"==e?a("aUV"):null},s=i.layout||e.layout||SQR.v3n3u2(),u=i.vertexSize||s.aPosition,c=(n.vertices||n.aPosition).length/u,l=SQR.Buffer().layout(s,c);for(var M in s){(r=a(M))&&l.data(M,r)}var A=a("indices");return A&&l.index(A),l.update()},SQR.Poly=function(e){this.mesh=e,this.triangles=[]},SQR.Poly.prototype.addVertices=function(){var e=this;if(e.size=arguments.length,e.size<3)throw"> SQR.Poly.addVertices > A poly needs at least 3 vertices.";e.vertices=[];for(var t=0;t<e.size;t++){var i=arguments[t];e.mesh.vertices[i].addPoly(e),e.vertices.push(i)}return 3<=e.size&&e.triangles.push(0,1,2),4<=e.size&&e.triangles.push(2,1,3),e},SQR.Poly.prototype.addUV=function(e,t,i,n){return this.uvs=[e,t,i],n&&this.uvs.push(n),this},SQR.Poly.prototype.flip=function(){var e=this.vertices,t=this.uvs,i=e[1];e[1]=e[2],e[2]=i,t&&(i=t[1],t[1]=t[2],t[2]=i),e.normal?e.normal.neg():this.normal?this.normal.neg():console.log("> SQR.Poly.flip > please consider calculating normal first, then flipping")},SQR.Poly.prototype.calculateNormal=function(){var e=this,t=this.vertices,i=e.mesh.vertices,n=SQR.V3.__tv1,r=SQR.V3.__tv2;return e.normal=e.normal||new SQR.V3,n.sub(i[t[0]].position,i[t[1]].position),n.isZero()&&3<e.size&&n.sub(i[t[0]].position,i[t[3]].position),r.sub(i[t[2]].position,i[t[0]].position),e.normal.cross(n,r).norm(),e},SQR.Poly.prototype.V=SQR.Poly.prototype.addVertices,SQR.Poly.prototype.T=SQR.Poly.prototype.addUV,SQR.Primitives.createPlane=function(e,t,i,n,r,o,a){a=a||{};var s,u,c=-(e=.5*e)+(r=r||0),l=-(t=.5*t)+(o=o||0),M=2*e/(i=i||1),A=2*t/(n=n||1),g=new SQR.Mesh;for(s=0;s<i+1;s++)for(u=0;u<n+1;u++){var d=c+s*M,h=l+u*A;a.zUp?g.V(d,h,0):g.V(d,0,h),g.T(s/i,u/n)}for(s=0;s<i;s++)for(u=0;u<n;u++){d=c+s*M,h=l+u*A;var f=(s+0)*(n+1)+u,D=(s+1)*(n+1)+u;g.F(f,f+1,D,D+1).T(f,f+1,D,D+1)}return g.calculateNormals(a.smooth),a.flip&&g.flip(),g.update()},SQR.Primitives.createPostEffect=function(e,t,i){i=i||SQR.Buffer().layout(SQR.v2u2(),6).data("aPosition",-1,1,1,1,1,-1,-1,1,1,-1,-1,-1).data("aUV",0,1,1,1,1,0,0,1,1,0,0,0).update();var n=new SQR.Transform("post-effect");return n.buffer=i,e&&(n.shader=SQR.Shader(e,t)),n},SQR.Primitives.createSphere=function(e,t,i,n){var r=new SQR.Mesh;e=e||50,t=Math.max(3,Math.floor(t)||8),i=Math.max(3,Math.floor(i)||6),n=n||{};var o,a,s=2*Math.PI,u=Math.PI;for(a=0;a<=i;a++)for(o=0;o<t;o++){var c=o/(t-1),l=a/i,M=-e*Math.cos(c*s)*Math.sin(l*u),A=e*Math.cos(l*u),g=e*Math.sin(c*s)*Math.sin(l*u);r.V(M,A,g);r.T(c,1-l)}for(a=0;a<i;a++){var d=0==a,h=a==i-1;for(o=0;o<t;o++){var f=a+1,D=(o+1)%t,N=a*t+o,y=a*t+D,p=f*t+o,T=f*t+D;d?r.F(N,T,p).T(N,T,p):h?r.F(N,y,T).T(N,y,T):r.F(N,y,p,T).T(N,y,p,T)}}return r.calculateNormals(n.smooth),n.flip&&r.flip(),r.update()},SQR.Primitives.createCube=function(e,t,i,n){e=e||1,t=t||1,i=i||1,n=n||{};var r=new SQR.Mesh,o=r.V(-.5*e,.5*t,.5*i),a=r.V(.5*e,.5*t,.5*i),s=r.V(-.5*e,-.5*t,.5*i),u=r.V(.5*e,-.5*t,.5*i),c=r.V(-.5*e,.5*t,-.5*i),l=r.V(.5*e,.5*t,-.5*i),M=r.V(-.5*e,-.5*t,-.5*i),A=r.V(.5*e,-.5*t,-.5*i),g=r.T(0,1),d=r.T(1,1),h=r.T(0,0),f=r.T(1,0);return r.F(o,a,s,u).T(g,d,h,f),r.F(l,c,A,M).T(g,d,h,f),r.F(c,o,M,s).T(g,d,h,f),r.F(a,l,u,A).T(g,d,h,f),r.F(c,l,o,a).T(g,d,h,f),r.F(s,u,M,A).T(g,d,h,f),r.calculateNormals(n.smooth),n.flip&&r.flip(),r.update()},SQR.Vertex=function(e,t,i){this.position=new SQR.V3(e,t,i),this.normal=new SQR.V3},SQR.Vertex.prototype.addPoly=function(e){this.polys=this.polys||[],this.polys.push(e)},SQR.Vertex.prototype.calculateNormal=function(){var e=this;e.normal.set();for(var t=0,i=e.polys.length;t<i;t++)e.normal.add(e.polys[t].normal);e.normal.norm()},SQR.CanvasRenderer=function(n){var t={},i=null;if(n||(n=document.createElement("canvas")),n instanceof HTMLElement||(n=document.querySelector(n)),!n.getContext)throw"> SQR.Context - Invalid canvas reference.";var r=n.getContext("2d");return r.setLineDash||(r.setLineDash=function(){}),t.canvas=n,t.context=r,t.setSize=function(e,t,i){return i=i||1,n.width=e*i,n.height=t*i,n.style.width=e+"px",n.style.height=t+"px",i},t.setClearColor=function(e){return i=e,t},t.render=function(e){i?(-1<i.indexOf("rgba")&&r.clearRect(0,0,n.width,n.height),r.fillStyle=i,r.fillRect(0,0,n.width,n.height)):r.clearRect(0,0,n.width,n.height),e&&e.draw(r)},t},SQR.Transform2d=function(e){var n={};return n.name=e||"sqr.transform."+SQR.Transform2dCount++,n.position=new SQR.V3(0,0,0),n.rotation=0,n.scale=new SQR.V2(1,1),n.alpha=1,n.children=[],n.numChildren=0,n.add=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];-1==(t.parent=n).children.indexOf(t)&&n.children.push(t)}return n.numChildren=n.children.length,n},n.remove=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e],i=n.children.indexOf(t);if(-1==i)return!1;t.parent=null,n.children.splice(i,1)}return n.numChildren=n.children.length,n},n.removeAll=function(){n.children.length=0,n.numChildren=0},n.contains=function(e){return-1<n.children.indexOf(e)},n.recurse=function(e,t){t||e(n);for(var i=0;i<n.numChildren;i++)n.children[i].recurse(e)},n.draw=function(e){var t=e;t.save(),t.translate(n.position.x,n.position.y),t.rotate(n.rotation),t.scale(n.scale.x,n.scale.y);for(var i=0;i<n.numChildren;i++)n.children[i].draw(t);n.alpha<1&&(t.globalAlpha=n.alpha),n.shape&&n.shape(t,n),t.restore()},n},SQR.Transform2dCount=0,SQR.Gyro=function(){var t,s={x:0,y:0,z:0,w:1},e={},u=!1,i=!1,n=0,r=0,o=0;e.getOrientation=function(e){return i||e||g(),s},e.hasGyro=function(){return u},e.isSlow=function(){return i&&(r<3||60<e.delta())},e.delta=function(){return 0==r?0:parseInt(o/r)},e.externalProcess=function(e,t,i,n){A(e,t,i,n)};var c=function(e,t){return{w:e.w*t.w-e.x*t.x-e.y*t.y-e.z*t.z,x:e.w*t.x+e.x*t.w+e.y*t.z-e.z*t.y,y:e.w*t.y-e.x*t.z+e.y*t.w+e.z*t.x,z:e.w*t.z+e.x*t.y-e.y*t.x+e.z*t.w}},a=.5*Math.PI,l={x:Math.sin(.5*a),y:0,z:0,w:Math.cos(.5*a)},M=function(e){t&&(n=(new Date).getTime()-t,r++,o+=n),t=(new Date).getTime(),A(e.alpha,e.beta,e.gamma,window.orientation)},A=function(e,t,i,n){if(null!=e&&null!=window.orientation){u=!0;var r=function(e,t,i){var n=-t,r=-e;z=i;var o=Math.cos(n/2),a=Math.cos(r/2),s=Math.cos(z/2),u=Math.sin(n/2),c=Math.sin(r/2),l=Math.sin(z/2);return n=u*a*s-o*c*l,r=o*c*s+u*a*l,z=o*a*l+u*c*s,{x:n,y:r,z:z,w:o*a*s-u*c*l}}(e/180*Math.PI,t/180*Math.PI,i/180*Math.PI),o=window.orientation/180*Math.PI,a={x:0,y:0,z:Math.sin(.5*o),w:Math.cos(.5*o)};s=c(l,s=r),s=c(a,s)}},g=function(){window.addEventListener("deviceorientation",M,!0),i=!0};return e}();var TWEEN=TWEEN||function(){var n=[];return{getAll:function(){return n},removeAll:function(){n=[]},add:function(e){n.push(e)},remove:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1)},update:function(e,t){if(0===n.length)return!1;var i=0;for(e=void 0!==e?e:TWEEN.now();i<n.length;)n[i].update(e)||t?i++:n.splice(i,1);return!0}}}();function assign(e,t){for(var i=Object.keys(t),n=i.length,r=0;r<n;r+=1)e[i[r]]=t[i[r]];return e}"undefined"==typeof window&&"undefined"!=typeof process?TWEEN.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?TWEEN.now=window.performance.now.bind(window.performance):void 0!==Date.now?TWEEN.now=Date.now:TWEEN.now=function(){return(new Date).getTime()},TWEEN.Tween=function(e){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=TWEEN.Easing.Linear.None,this._interpolationFunction=TWEEN.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null},TWEEN.Tween.prototype=assign(Object.create(Object.prototype),{to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){for(var t in TWEEN.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?e:TWEEN.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(TWEEN.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object),this.stopChainedTweens()),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,i,n;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0),i=1<(i=(e-this._startTime)/this._duration)?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[t]){var r=this._valuesStart[t]||0,o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,n):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[t]=r+(o-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,n),1===i){if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var a=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=a}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}}),TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n),o=TWEEN.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],n):1<t?o(e[i],e[i-1],i-n):o(e[r],e[i<r+1?i:r+1],n-r)},Bezier:function(e,t){for(var i=0,n=e.length-1,r=Math.pow,o=TWEEN.Interpolation.Utils.Bernstein,a=0;a<=n;a++)i+=r(1-t,n-a)*r(t,a)*e[a]*o(n,a);return i},CatmullRom:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n),o=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(r=Math.floor(n=i*(1+t))),o(e[(r-1+i)%i],e[r],e[(r+1)%i],e[(r+2)%i],n-r)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-n)-e[0]):1<t?e[i]-(o(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):o(e[r?r-1:0],e[r],e[i<r+1?i:r+1],e[i<r+2?i:r+2],n-r)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=TWEEN.Interpolation.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:function(){var n=[1];return function(e){var t=1;if(n[e])return n[e];for(var i=e;1<i;i--)t*=i;return n[e]=t}}(),CatmullRom:function(e,t,i,n,r){var o=.5*(i-e),a=.5*(n-t),s=r*r;return(2*t-2*i+o+a)*(r*s)+(-3*t+3*i-2*o-a)*s+o*r+t}}},function(e){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==e&&(e.TWEEN=TWEEN)}(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.WebVRPolyfill=t()}(this,function(){"use strict";var me="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e,t,i=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},r=function(e,t){for(var i=0,n=e.length;i<n;i++)t[i]=e[i]},n=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},o=(function(e,t){e.exports=function(){var i,e,t,n,r,o,a,s=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(e,t,i){return e+(t-e)*i},M=(a=/iPad|iPhone|iPod/.test(navigator.platform),function(){return a}),A=(o=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome"),function(){return o}),c=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android"),function(){return r}),l=(t=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),n=t?parseInt(t[1],10):null,function(){return n}),g=function(){var e=!1;if(65===l()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var i=t[1].split("."),n=u(i,4),r=(n[0],n[1],n[2]),o=n[3];e=3325===parseInt(r,10)&&parseInt(o,10)<148}}return function(){return e}}(),d=(e=-1!==navigator.userAgent.indexOf("R7 Build"),function(){return e}),h=function(){var e=90==window.orientation||-90==window.orientation;return d()?!e:e},f=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},D=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},N=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},y=function(e,t,i,n){var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t),e.compileShader(r);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,i),e.compileShader(o);var a=e.createProgram();for(var s in e.attachShader(a,r),e.attachShader(a,o),n)e.bindAttribLocation(a,n[s],s);return e.linkProgram(a),e.deleteShader(r),e.deleteShader(o),a},p=function(e,t){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r="",o=0;o<n;o++){var a=e.getActiveUniform(t,o);r=a.name.replace("[0]",""),i[r]=e.getUniformLocation(t,r)}return i},T=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},E=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},L=function(e){if(M()){var t=e.style.width,i=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(i)+"px",setTimeout(function(){e.style.width=t,e.style.height=i},100)}window.canvas=e},m=function(){var Oe=Math.PI/180,Ce=.25*Math.PI,Qe=new Float32Array([0,0,0,1]),be=new Float32Array([0,0,0]);function n(e,t,i,n,r,o){var a,s,u,c,l,M,A,g,d,h;a=e,s=n||null,u=o.depthNear,c=o.depthFar,l=Math.tan(s?s.upDegrees*Oe:Ce),M=Math.tan(s?s.downDegrees*Oe:Ce),A=Math.tan(s?s.leftDegrees*Oe:Ce),g=Math.tan(s?s.rightDegrees*Oe:Ce),d=2/(A+g),h=2/(l+M),a[0]=d,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=h,a[6]=0,a[7]=0,a[8]=-(A-g)*d*.5,a[9]=(l-M)*h*.5,a[10]=c/(u-c),a[11]=-1,a[12]=0,a[13]=0,a[14]=c*u/(u-c),a[15]=0;var f,D,N,y,p,T,w,E,L,m,I,x,S,j,v,z,O,C,Q,b,R,k,U,P,_,B,Y,F,G,H,V,W,X,Z,J,K,q,$,ee,te,ie,ne,re,oe,ae,se,ue,ce,le,Me,Ae,ge,de,he,fe,De,Ne,ye,pe,Te,we,Ee,Le,me,Ie,xe,Se,je,ve=i.orientation||Qe,ze=i.position||be;f=t,N=ze,y=(D=ve)[0],p=D[1],T=D[2],w=D[3],I=y*(E=y+y),x=y*(L=p+p),S=y*(m=T+T),j=p*L,v=p*m,z=T*m,O=w*E,C=w*L,Q=w*m,f[0]=1-(j+z),f[1]=x+Q,f[2]=S-C,f[3]=0,f[4]=x-Q,f[5]=1-(I+z),f[6]=v+O,f[7]=0,f[8]=S+C,f[9]=v-O,f[10]=1-(I+j),f[11]=0,f[12]=N[0],f[13]=N[1],f[14]=N[2],f[15]=1,r&&(R=b=t,J=(k=r)[0],K=k[1],q=k[2],R===b?(b[12]=R[0]*J+R[4]*K+R[8]*q+R[12],b[13]=R[1]*J+R[5]*K+R[9]*q+R[13],b[14]=R[2]*J+R[6]*K+R[10]*q+R[14],b[15]=R[3]*J+R[7]*K+R[11]*q+R[15]):(U=R[0],P=R[1],_=R[2],B=R[3],Y=R[4],F=R[5],G=R[6],H=R[7],V=R[8],W=R[9],X=R[10],Z=R[11],b[0]=U,b[1]=P,b[2]=_,b[3]=B,b[4]=Y,b[5]=F,b[6]=G,b[7]=H,b[8]=V,b[9]=W,b[10]=X,b[11]=Z,b[12]=U*J+Y*K+V*q+R[12],b[13]=P*J+F*K+W*q+R[13],b[14]=_*J+G*K+X*q+R[14],b[15]=B*J+H*K+Z*q+R[15])),te=(ee=$=t)[0],ie=ee[1],ne=ee[2],re=ee[3],oe=ee[4],ae=ee[5],se=ee[6],ue=ee[7],ce=ee[8],le=ee[9],Me=ee[10],Ae=ee[11],ge=ee[12],de=ee[13],he=ee[14],fe=ee[15],(je=(De=te*ae-ie*oe)*(Se=Me*fe-Ae*he)-(Ne=te*se-ne*oe)*(xe=le*fe-Ae*de)+(ye=te*ue-re*oe)*(Ie=le*he-Me*de)+(pe=ie*se-ne*ae)*(me=ce*fe-Ae*ge)-(Te=ie*ue-re*ae)*(Le=ce*he-Me*ge)+(we=ne*ue-re*se)*(Ee=ce*de-le*ge))&&(je=1/je,$[0]=(ae*Se-se*xe+ue*Ie)*je,$[1]=(ne*xe-ie*Se-re*Ie)*je,$[2]=(de*we-he*Te+fe*pe)*je,$[3]=(Me*Te-le*we-Ae*pe)*je,$[4]=(se*me-oe*Se-ue*Le)*je,$[5]=(te*Se-ne*me+re*Le)*je,$[6]=(he*ye-ge*we-fe*Ne)*je,$[7]=(ce*we-Me*ye+Ae*Ne)*je,$[8]=(oe*xe-ae*me+ue*Ee)*je,$[9]=(ie*me-te*xe-re*Ee)*je,$[10]=(ge*Te-de*ye+fe*De)*je,$[11]=(le*ye-ce*Te-Ae*De)*je,$[12]=(ae*Le-oe*Ie-se*Ee)*je,$[13]=(te*Ie-ie*Le+ne*Ee)*je,$[14]=(de*Ne-ge*pe-he*De)*je,$[15]=(ce*pe-le*Ne+Me*De)*je)}return function(e,t,i){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,n(e.leftProjectionMatrix,e.leftViewMatrix,t,i._getFieldOfView("left"),i._getEyeOffset("left"),i),n(e.rightProjectionMatrix,e.rightViewMatrix,t,i._getFieldOfView("right"),i._getEyeOffset("right"),i),0))}}(),I=function(e){var t,i=e.indexOf("://");t=-1!==i?i+3:0;var n=e.indexOf("/",t);return-1===n&&(n=e.length),e.substring(0,n)},x=(i={},function(e,t){void 0===i[e]&&(console.warn("webvr-polyfill: "+t),i[e]=!0)}),S=function(e,t){var i=t?"Please use "+t+" instead.":"";x(e,e+" has been deprecated. This may not work on native WebVR displays. "+i)},j=function(e,t,i){if(t){for(var n=[],r=null,o=0;o<t.length;++o){var a=t[o];switch(a){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),n.push(null,null);break}r||(r=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(s),n.push(e.getParameter(a),null);break;case e.ACTIVE_TEXTURE:r=e.getParameter(e.ACTIVE_TEXTURE),n.push(null);break;default:n.push(e.getParameter(a))}}i(e);for(var o=0;o<t.length;++o){var a=t[o],u=n[o];switch(a){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,u);break;case e.COLOR_CLEAR_VALUE:e.clearColor(u[0],u[1],u[2],u[3]);break;case e.COLOR_WRITEMASK:e.colorMask(u[0],u[1],u[2],u[3]);break;case e.CURRENT_PROGRAM:e.useProgram(u);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,u);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,u);break;case e.TEXTURE_BINDING_2D:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,u);break;case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_CUBE_MAP,u);break;case e.VIEWPORT:e.viewport(u[0],u[1],u[2],u[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:u?e.enable(a):e.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}r&&e.activeTexture(r)}}else i(e)},v=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),z=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function O(e,t,i,n){this.gl=e,this.cardboardUI=t,this.bufferScale=i,this.dirtySubmitFrameBindings=n,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,M()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=y(e,v,z,this.attribs),this.uniforms=p(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}O.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},O.prototype.onResize=function(){var e=this.gl,t=this,i=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];j(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},O.prototype.patch=function(){if(!this.isPatched){var r=this,t=this.gl.canvas,o=this.gl;M()||(t.width=f()*this.bufferScale,t.height=D()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return r.bufferWidth},set:function(e){r.bufferWidth=e,r.realCanvasWidth.set.call(t,e),r.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return r.bufferHeight},set:function(e){r.bufferHeight=e,r.realCanvasHeight.set.call(t,e),r.onResize()}})),this.lastBoundFramebuffer=o.getParameter(o.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(e,t){r.lastBoundFramebuffer=t||r.framebuffer,r.realBindFramebuffer.call(o,e,r.lastBoundFramebuffer)},this.cullFace=o.getParameter(o.CULL_FACE),this.depthTest=o.getParameter(o.DEPTH_TEST),this.blend=o.getParameter(o.BLEND),this.scissorTest=o.getParameter(o.SCISSOR_TEST),this.stencilTest=o.getParameter(o.STENCIL_TEST),o.enable=function(e){switch(e){case o.CULL_FACE:r.cullFace=!0;break;case o.DEPTH_TEST:r.depthTest=!0;break;case o.BLEND:r.blend=!0;break;case o.SCISSOR_TEST:r.scissorTest=!0;break;case o.STENCIL_TEST:r.stencilTest=!0}r.realEnable.call(o,e)},o.disable=function(e){switch(e){case o.CULL_FACE:r.cullFace=!1;break;case o.DEPTH_TEST:r.depthTest=!1;break;case o.BLEND:r.blend=!1;break;case o.SCISSOR_TEST:r.scissorTest=!1;break;case o.STENCIL_TEST:r.stencilTest=!1}r.realDisable.call(o,e)},this.colorMask=o.getParameter(o.COLOR_WRITEMASK),o.colorMask=function(e,t,i,n){r.colorMask[0]=e,r.colorMask[1]=t,r.colorMask[2]=i,r.colorMask[3]=n,r.realColorMask.call(o,e,t,i,n)},this.clearColor=o.getParameter(o.COLOR_CLEAR_VALUE),o.clearColor=function(e,t,i,n){r.clearColor[0]=e,r.clearColor[1]=t,r.clearColor[2]=i,r.clearColor[3]=n,r.realClearColor.call(o,e,t,i,n)},this.viewport=o.getParameter(o.VIEWPORT),o.viewport=function(e,t,i,n){r.viewport[0]=e,r.viewport[1]=t,r.viewport[2]=i,r.viewport[3]=n,r.realViewport.call(o,e,t,i,n)},this.isPatched=!0,L(t)}},O.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;M()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){L(t)},1)}},O.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},O.prototype.submitFrame=function(){var e=this.gl,t=this,i=[];if(this.dirtySubmitFrameBindings||i.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),j(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||M())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),M()){var n=e.canvas;n.width==t.bufferWidth&&n.height==t.bufferHeight||(t.bufferWidth=n.width,t.bufferHeight=n.height,t.onResize())}},O.prototype.updateDeviceInfo=function(n){var e=this.gl,r=this,t=[e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING];j(e,t,function(e){var t=r.computeMeshVertices_(r.meshWidth,r.meshHeight,n);if(e.bindBuffer(e.ARRAY_BUFFER,r.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),!r.indexCount){var i=r.computeMeshIndices_(r.meshWidth,r.meshHeight);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i,e.STATIC_DRAW),r.indexCount=i.length}})},O.prototype.computeMeshVertices_=function(e,t,i){for(var n=new Float32Array(2*e*t*5),r=i.getLeftEyeVisibleTanAngles(),o=i.getLeftEyeNoLensTanAngles(),a=i.getLeftEyeVisibleScreenRect(o),s=0,u=0;u<2;u++){for(var c=0;c<t;c++)for(var l=0;l<e;l++,s++){var M=l/(e-1),A=c/(t-1),g=M,d=A,h=w(r[0],r[2],M),f=w(r[3],r[1],A),D=Math.sqrt(h*h+f*f),N=i.distortion.distortInverse(D),y=h*N/D,p=f*N/D;M=(y-o[0])/(o[2]-o[0]),A=(p-o[3])/(o[1]-o[3]),M=2*(a.x+M*a.width-.5),A=2*(a.y+A*a.height-.5),n[5*s+0]=M,n[5*s+1]=A,n[5*s+2]=g,n[5*s+3]=d,n[5*s+4]=u}var T=r[2]-r[0];r[0]=-(T+r[0]),r[2]=T-r[2],T=o[2]-o[0],o[0]=-(T+o[0]),o[2]=T-o[2],a.x=1-(a.x+a.width)}return n},O.prototype.computeMeshIndices_=function(e,t){for(var i=new Uint16Array(2*(e-1)*(t-1)*6),n=e/2,r=t/2,o=0,a=0,s=0;s<2;s++)for(var u=0;u<t;u++)for(var c=0;c<e;c++,o++)0!=c&&0!=u&&(c<=n==u<=r?(i[a++]=o,i[a++]=o-e-1,i[a++]=o-e,i[a++]=o-e-1,i[a++]=o,i[a++]=o-1):(i[a++]=o-1,i[a++]=o-e,i[a++]=o,i[a++]=o-e,i[a++]=o-1,i[a++]=o-e-1));return i},O.prototype.getOwnPropertyDescriptor_=function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i.get&&void 0!==i.set||(i.configurable=!0,i.enumerable=!0,i.get=function(){return this.getAttribute(t)},i.set=function(e){this.setAttribute(t,e)}),i};var C=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),Q=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),b=Math.PI/180;function R(e){this.gl=e,this.attribs={position:0},this.program=y(e,C,Q,this.attribs),this.uniforms=p(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function k(e){this.coefficients=e}R.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},R.prototype.listen=function(i,n){var r=this.gl.canvas;this.listener=function(e){var t=r.clientWidth/2;e.clientX>t-42&&e.clientX<t+42&&e.clientY>r.clientHeight-42?i(e):e.clientX<42&&e.clientY<42&&n(e)},r.addEventListener("click",this.listener,!1)},R.prototype.onResize=function(){var e=this.gl,h=this,t=[e.ARRAY_BUFFER_BINDING];j(e,t,function(i){var o=[],a=i.drawingBufferWidth/2,e=Math.max(screen.width,screen.height)*window.devicePixelRatio,t=i.drawingBufferWidth/e,n=t*window.devicePixelRatio,r=4*n/2,s=42*n,u=28*n/2,c=14*n;function l(e,t){var i=(90-e)*b,n=Math.cos(i),r=Math.sin(i);o.push(.3125*n*u+a,.3125*r*u+u),o.push(t*n*u+a,t*r*u+u)}o.push(a-r,s),o.push(a-r,i.drawingBufferHeight),o.push(a+r,s),o.push(a+r,i.drawingBufferHeight),h.gearOffset=o.length/2;for(var M=0;M<=6;M++){var A=60*M;l(A,1),l(A+12,1),l(A+20,.75),l(A+40,.75),l(A+48,1)}function g(e,t){o.push(c+e,i.drawingBufferHeight-c-t)}h.gearVertexCount=o.length/2-h.gearOffset,h.arrowOffset=o.length/2;var d=r/Math.sin(45*b);g(0,u),g(u,0),g(u+d,d),g(d,u+d),g(d,u-d),g(0,u),g(u,2*u),g(u+d,2*u-d),g(d,u-d),g(0,u),g(d,u-r),g(28*n,u-r),g(d,u+r),g(28*n,u+r),h.arrowVertexCount=o.length/2-h.arrowOffset,i.bindBuffer(i.ARRAY_BUFFER,h.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(o),i.STATIC_DRAW)})},R.prototype.render=function(){var e=this.gl,t=this,i=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];j(e,i,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},R.prototype.renderNoState=function(){var e,t,i,n,r,o,a,s,u,c,l=this.gl;l.useProgram(this.program),l.bindBuffer(l.ARRAY_BUFFER,this.vertexBuffer),l.enableVertexAttribArray(this.attribs.position),l.vertexAttribPointer(this.attribs.position,2,l.FLOAT,!1,8,0),l.uniform4f(this.uniforms.color,1,1,1,1),e=this.projMat,t=0,i=l.drawingBufferWidth,n=0,r=l.drawingBufferHeight,s=1/(t-i),u=1/(n-r),c=1/((o=.1)-(a=1024)),e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*s,e[13]=(r+n)*u,e[14]=(a+o)*c,e[15]=1,l.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.drawArrays(l.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),l.drawArrays(l.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},k.prototype.distortInverse=function(e){for(var t=0,i=1,n=e-this.distort(t);1e-4<Math.abs(i-t);){var r=e-this.distort(i),o=i-r*((i-t)/(r-n));t=i,i=o,n=r}return i},k.prototype.distort=function(e){for(var t=e*e,i=0,n=0;n<this.coefficients.length;n++)i=t*(i+this.coefficients[n]);return(i+1)*e};var U=Math.PI/180,P=180/Math.PI,_=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0};_.prototype={constructor:_,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*n-a*i,c=s*i+a*t-r*n,l=s*n+r*i-o*t,M=-r*t-o*i-a*n;return this.x=u*s+M*-r+c*-a-l*-o,this.y=c*s+M*-o+l*-r-u*-a,this.z=l*s+M*-a+u*-o-c*-r,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var i=e.x,n=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this}};var B,Y,F=function(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1};function G(e){this.width=e.width||f(),this.height=e.height||D(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}F.prototype={constructor:F,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,i){var n=Math.cos(e/2),r=Math.cos(t/2),o=Math.cos(i/2),a=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(i/2);return this.x=a*r*o+n*s*u,this.y=n*s*o-a*r*u,this.z=n*r*u+a*s*o,this.w=n*r*o-a*s*u,this},setFromEulerYXZ:function(e,t,i){var n=Math.cos(e/2),r=Math.cos(t/2),o=Math.cos(i/2),a=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(i/2);return this.x=a*r*o+n*s*u,this.y=n*s*o-a*r*u,this.z=n*r*u-a*s*o,this.w=n*r*o+a*s*u,this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(i),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e.x,n=e.y,r=e.z,o=e.w,a=t.x,s=t.y,u=t.z,c=t.w;return this.x=i*c+o*a+n*u-r*s,this.y=n*c+o*s+r*a-i*u,this.z=r*c+o*u+i*s-n*a,this.w=o*c-i*a-n*s-r*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this.x,n=this.y,r=this.z,o=this.w,a=o*e.w+i*e.x+n*e.y+r*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),1<=a)return this.w=o,this.x=i,this.y=n,this.z=r,this;var s=Math.acos(a),u=Math.sqrt(1-a*a);if(Math.abs(u)<.001)return this.w=.5*(o+this.w),this.x=.5*(i+this.x),this.y=.5*(n+this.y),this.z=.5*(r+this.z),this;var c=Math.sin((1-t)*s)/u,l=Math.sin(t*s)/u;return this.w=o*c+this.w*l,this.x=i*c+this.x*l,this.y=n*c+this.y*l,this.z=r*c+this.z*l,this},setFromUnitVectors:function(e,t){return void 0===B&&(B=new _),(Y=e.dot(t)+1)<1e-6?(Y=0,Math.abs(e.x)>Math.abs(e.z)?B.set(-e.y,e.x,0):B.set(0,-e.z,e.y)):B.crossVectors(e,t),this.x=B.x,this.y=B.y,this.z=B.z,this.w=Y,this.normalize(),this}};var H=new G({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),V=new G({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),W={CardboardV1:new Z({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new Z({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function X(e,t){this.viewer=W.CardboardV2,this.updateDeviceParams(e),this.distortion=new k(this.viewer.distortionCoefficients);for(var i=0;i<t.length;i++){var n=t[i];W[n.id]=new Z(n)}}function Z(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}X.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},X.prototype.getDevice=function(){return this.device},X.prototype.setViewer=function(e){this.viewer=e,this.distortion=new k(this.viewer.distortionCoefficients)},X.prototype.determineDevice_=function(e){if(!e)return M()?(console.warn("Using fallback iOS device measurements."),V):(console.warn("Using fallback Android device measurements."),H);var t=.0254/e.xdpi,i=.0254/e.ydpi,n=f(),r=D();return new G({widthMeters:t*n,heightMeters:i*r,bevelMeters:.001*e.bevelMm})},X.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,i=this.distortion,n=e.screenLensDistance,r=(t.widthMeters-e.interLensDistance)/2,o=e.interLensDistance/2,a=e.baselineLensDistance-t.bevelMeters,s=t.heightMeters-a,u=P*Math.atan(i.distort(r/n)),c=P*Math.atan(i.distort(o/n)),l=P*Math.atan(i.distort(a/n)),M=P*Math.atan(i.distort(s/n));return{leftDegrees:Math.min(u,e.fov),rightDegrees:Math.min(c,e.fov),downDegrees:Math.min(l,e.fov),upDegrees:Math.min(M,e.fov)}},X.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,n=Math.tan(-U*e.fov),r=Math.tan(U*e.fov),o=Math.tan(U*e.fov),a=Math.tan(-U*e.fov),s=t.widthMeters/4,u=t.heightMeters/2,c=e.baselineLensDistance-t.bevelMeters-u,l=e.interLensDistance/2-s,M=-c,A=e.screenLensDistance,g=i.distort((l-s)/A),d=i.distort((M+u)/A),h=i.distort((l+s)/A),f=i.distort((M-u)/A),D=new Float32Array(4);return D[0]=Math.max(n,g),D[1]=Math.min(r,d),D[2]=Math.min(o,h),D[3]=Math.max(a,f),D},X.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,n=new Float32Array(4),r=i.distortInverse(Math.tan(-U*e.fov)),o=i.distortInverse(Math.tan(U*e.fov)),a=i.distortInverse(Math.tan(U*e.fov)),s=i.distortInverse(Math.tan(-U*e.fov)),u=t.widthMeters/4,c=t.heightMeters/2,l=e.baselineLensDistance-t.bevelMeters-c,M=e.interLensDistance/2-u,A=-l,g=e.screenLensDistance,d=(M-u)/g,h=(A+c)/g,f=(M+u)/g,D=(A-c)/g;return n[0]=Math.max(r,d),n[1]=Math.min(o,h),n[2]=Math.min(a,f),n[3]=Math.max(s,D),n},X.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,i=this.device,n=t.screenLensDistance,r=(i.widthMeters-t.interLensDistance)/2,o=t.baselineLensDistance-i.bevelMeters,a=(e[0]*n+r)/i.widthMeters,s=(e[1]*n+o)/i.heightMeters,u=(e[2]*n+r)/i.widthMeters,c=(e[3]*n+o)/i.heightMeters;return{x:a,y:c,width:u-a,height:s-c}},X.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},X.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},X.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:P*Math.atan(e.outerDist),rightDegrees:P*Math.atan(e.innerDist),downDegrees:P*Math.atan(e.bottomDist),upDegrees:P*Math.atan(e.topDist)}},X.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,i=this.device,n=t.screenLensDistance,r=i.widthMeters/n,o=i.heightMeters/n,a=i.width/r,s=i.height/o,u=Math.round((e.eyePosX-e.outerDist)*a),c=Math.round((e.eyePosY-e.bottomDist)*s);return{x:u,y:c,width:Math.round((e.eyePosX+e.innerDist)*a)-u,height:Math.round((e.eyePosY+e.topDist)*s)-c}},X.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,i=this.distortion,n=e.screenLensDistance,r=e.interLensDistance/2/n,o=t.widthMeters/n,a=t.heightMeters/n,s=o/2-r,u=(e.baselineLensDistance-t.bevelMeters)/n,c=e.fov,l=i.distortInverse(Math.tan(U*c)),M=Math.min(s,l),A=Math.min(r,l),g=Math.min(u,l),d=Math.min(a-u,l);return{outerDist:M,innerDist:A,topDist:d,bottomDist:g,eyePosX:s,eyePosY:u}},X.Viewers=W;var J={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function K(e,t){if(this.dpdb=J,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var i=new XMLHttpRequest,n=this;i.open("GET",e,!0),i.addEventListener("load",function(){n.loading=!1,200<=i.status&&i.status<=299?(n.dpdb=JSON.parse(i.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),i.send()}}function q(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function $(e,t){this.set(e,t)}function ee(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new $,this.currentGyroMeasurement=new $,this.previousGyroMeasurement=new $,M()?this.filterQ=new F(-1,0,0,1):this.filterQ=new F(1,0,0,1),this.previousFilterQ=new F,this.previousFilterQ.copy(this.filterQ),this.accelQ=new F,this.isOrientationInitialized=!1,this.estimatedGravity=new _,this.measuredGravity=new _,this.gyroIntegralQ=new F}function te(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new F,this.previousTimestampS=null,this.deltaQ=new F,this.outQ=new F}function ie(e,t,i,n){this.yawOnly=i,this.accelerometer=new _,this.gyroscope=new _,this.filter=new ee(e,n),this.posePredictor=new te(t,n),this.isFirefoxAndroid=c(),this.isIOS=M();var r=l();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=g(),this.filterToWorldQ=new F,M()?this.filterToWorldQ.setFromAxisAngle(new _(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new _(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new F,this.worldToScreenQ=new F,this.originalPoseAdjustQ=new F,this.originalPoseAdjustQ.setFromAxisAngle(new _(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),h()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new F,this.orientationOut_=new Float32Array(4),this.start()}K.prototype.getDeviceParams=function(){return this.deviceParams},K.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},K.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,i=f(),n=D();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var r=0;r<e.devices.length;r++){var o=e.devices[r];if(o.rules)if("ios"==o.type||"android"==o.type){if(M()==("ios"==o.type)){for(var a=!1,s=0;s<o.rules.length;s++){var u=o.rules[s];if(this.matchRule_(u,t,i,n)){a=!0;break}}if(a){var c=o.dpi[0]||o.dpi,l=o.dpi[1]||o.dpi;return new q({xdpi:c,ydpi:l,bevelMm:o.bw})}}}else console.warn("Device["+r+"] has invalid type.");else console.warn("Device["+r+"] has no rules section.")}return console.warn("No DPDB device match."),null},K.prototype.matchRule_=function(e,t,i,n){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var r=e.res[0],o=e.res[1];if(Math.min(i,n)!=Math.min(r,o)||Math.max(i,n)!=Math.max(r,o))return!1}return!0},$.prototype.set=function(e,t){this.sample=e,this.timestampS=t},$.prototype.copy=function(e){this.set(e.sample,e.timestampS)},ee.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},ee.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var i,n=t-this.previousGyroMeasurement.timestampS;i=n,!(isNaN(i)||i<=.001||1<i)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ee.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var i=new F;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n,r=new F;r.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),r.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",P*(1<(n=r).w?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(n.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var o=new F;o.copy(this.filterQ),o.multiply(r),this.filterQ.slerp(o,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ee.prototype.getOrientation=function(){return this.filterQ},ee.prototype.accelToQuaternion_=function(e){var t=new _;t.copy(e),t.normalize();var i=new F;return i.setFromUnitVectors(new _(0,0,-1),t),i.inverse(),i},ee.prototype.gyroToQuaternionDelta_=function(e,t){var i=new F,n=new _;return n.copy(e),n.normalize(),i.setFromAxisAngle(n,e.length()*t),i},te.prototype.getPrediction=function(e,t,i){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=i,e;var n=new _;n.copy(t),n.normalize();var r=t.length();if(r<20*U)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(P*r).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var o=r*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(n,o),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=i,this.outQ},ie.prototype.getPosition=function(){return null},ie.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||(n=(new F).setFromAxisAngle(new _(0,0,-1),0),r=new F,-90===window.orientation?r.setFromAxisAngle(new _(0,1,0),Math.PI/-2):r.setFromAxisAngle(new _(0,1,0),Math.PI/2),n.multiply(r)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((i=new F).setFromAxisAngle(new _(1,0,0),-Math.PI/2),i),e=this._deviceOrientationQ;var t=new F;return t.copy(e),t.multiply(this.deviceOrientationFilterToWorldQ),t.multiply(this.resetQ),t.multiply(this.worldToScreenQ),t.multiplyQuaternions(this.deviceOrientationFixQ,t),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_}var i,n,r,o=this.filter.getOrientation();e=this.posePredictor.getPrediction(o,this.gyroscope,this.previousTimestampS);var t=new F;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),t.multiply(e),t.multiply(this.worldToScreenQ),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},ie.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),h()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},ie.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new F;var t=e.alpha,i=e.beta,n=e.gamma;t=(t||0)*Math.PI/180,i=(i||0)*Math.PI/180,n=(n||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(i,t,-n)},ie.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},ie.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,i=e.rotationRate,n=e.timeStamp/1e3,r=n-this.previousTimestampS;return r<0?x("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"):r<=.001||1<r?x("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."):(this.accelerometer.set(-t.x,-t.y,-t.z),d()?this.gyroscope.set(-i.beta,i.alpha,i.gamma):this.gyroscope.set(i.alpha,i.beta,i.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n)),void(this.previousTimestampS=n)},ie.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},ie.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){var i=t.type.toLowerCase();"devicemotion"===i&&this.updateDeviceMotion_(t.deviceMotionEvent)}},ie.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new _(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new _(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},ie.prototype.start=function(){var e,t,i;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),M()&&(e=window.self!==window.top,t=I(document.referrer),i=I(window.location.href),e&&t!==i)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},ie.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var ne=new _(1,0,0),re=new _(0,0,1),oe={};screen.orientation?oe=screen.orientation:screen.msOrientation?oe=screen.msOrientation:Object.defineProperty(oe,"angle",{get:function(){return window.orientation||0}});var ae=new F;ae.setFromAxisAngle(ne,-Math.PI/2),ae.multiply((new F).setFromAxisAngle(re,Math.PI/2));var se=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new F,this._worldToScreenQ=new F,this._outQ=new F,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onOrientationChange(),this.init()}return s(t,[{key:"init",value:function(){var e=null;try{(e=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start()),window.addEventListener("orientationchange",this._onOrientationChange)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new ie(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(ae),t.multiply(this._sensorQ),t.multiply(this._worldToScreenQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}},{key:"_onOrientationChange",value:function(){var e=-oe.angle*Math.PI/180;this._worldToScreenQ.setFromAxisAngle(re,e)}}]),t}();function ue(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var i=document.createElement("img");i.src=this.icon;var t=i.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(i);var n=document.createElement("div"),t=n.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(n);var r=document.createElement("div"),t=r.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(r);var o=document.createElement("div");o.style.float="left",o.innerHTML="No Cardboard viewer?";var a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank";var t=a.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",r.appendChild(o),r.appendChild(a),this.overlay=e,this.text=n,this.hide()}ue.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),i=t.style;h()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},ue.prototype.hide=function(){this.overlay.style.display="none"},ue.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},ue.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},ue.prototype.update=function(){this.disableShowTemporarily(),!h()&&T()?this.show():this.hide()},ue.prototype.loadIcon_=function(){this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var ce="CardboardV1",le="WEBVR_CARDBOARD_VIEWER";function Me(e){try{this.selectedKey=localStorage.getItem(le)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=e||ce),this.dialog=this.createDialog_(X.Viewers),this.root=null,this.onChangeCallbacks_=[]}Me.prototype.show=function(e){(this.root=e).appendChild(this.dialog);var t=this.dialog.querySelector("#"+this.selectedKey);t.checked=!0,this.dialog.style.display="block"},Me.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Me.prototype.getCurrentViewer=function(){return X.Viewers[this.selectedKey]},Me.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},Me.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},Me.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},Me.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&X.Viewers[this.selectedKey]){this.fireOnChange_(X.Viewers[this.selectedKey]);try{localStorage.setItem(le,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Me.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var i=document.createElement("div"),n=i.style;n.position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",i.addEventListener("click",this.hide.bind(this));var r=document.createElement("div"),n=r.style;for(var o in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",r.appendChild(this.createH1_("Select your viewer")),e)r.appendChild(this.createChoice_(o,e[o].label));return r.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(i),t.appendChild(r),t},Me.prototype.createH1_=function(e){var t=document.createElement("h1"),i=t.style;return i.color="black",i.fontSize="20px",i.fontWeight="bold",i.marginTop=0,i.marginBottom="24px",t.innerHTML=e,t},Me.prototype.createChoice_=function(e,t){var i=document.createElement("div");i.style.marginTop="8px",i.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",e),n.setAttribute("type","radio"),n.setAttribute("value",e),n.setAttribute("name","field");var r=document.createElement("label");return r.style.marginLeft="4px",r.setAttribute("for",e),r.innerHTML=t,i.appendChild(n),i.appendChild(r),i},Me.prototype.createButton_=function(e,t){var i=document.createElement("button");i.innerHTML=e;var n=i.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",i.addEventListener("click",t),i},"undefined"!=typeof window?window:void 0!==me||"undefined"!=typeof self&&self;var Ae,ge,de=(function(e,t){var i;i=function(){return function(i){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=i,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,i){var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=i(1),o="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(e){.5<this.noSleepVideo.currentTime&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return n(e,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=a},function(e,t,i){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},e.exports=i()}(ge={exports:{}},ge.exports),(Ae=ge.exports)&&Ae.__esModule?Ae.default:Ae),he=1e3,fe=[0,0,.5,1],De=[.5,0,.5,1],Ne=window.requestAnimationFrame,ye=window.cancelAnimationFrame;function pe(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return S("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function Te(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=he++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return S("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new pe({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&T()&&(this.wakelock_=new de)}Te.prototype.getFrameData=function(e){return m(e,this._getPose(),this)},Te.prototype.getPose=function(){return S("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},Te.prototype.resetPose=function(){return S("VRDisplay.prototype.resetPose"),this._resetPose()},Te.prototype.getImmediatePose=function(){return S("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},Te.prototype.requestAnimationFrame=function(e){return Ne(e)},Te.prototype.cancelAnimationFrame=function(e){return ye(e)},Te.prototype.wrapForFullscreen=function(e){if(M())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var i=this.fullscreenElement_.parentElement;i.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),i.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},Te.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},Te.prototype.requestPresent=function(u){var c=this.isPresenting,l=this;return u instanceof Array||(S("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),u=[u]),new Promise(function(t,e){if(l.capabilities.canPresent)if(0==u.length||u.length>l.capabilities.maxLayers)e(new Error("Invalid number of layers."));else{var i=u[0];if(i.source){var n=i.leftBounds||fe,r=i.rightBounds||De;if(c){var o=l.layer_;o.source!==i.source&&(o.source=i.source);for(var a=0;a<4;a++)o.leftBounds[a]=n[a],o.rightBounds[a]=r[a];return l.wrapForFullscreen(l.layer_.source),l.updatePresent_(),void t()}if(l.layer_={predistorted:i.predistorted,source:i.source,leftBounds:n.slice(0),rightBounds:r.slice(0)},l.waitingForPresent_=!1,l.layer_&&l.layer_.source){var s=l.wrapForFullscreen(l.layer_.source);l.addFullscreenListeners_(s,function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;l.isPresenting=s===e,l.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),l.waitingForPresent_=!1,l.beginPresent_(),t()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),l.removeFullscreenWrapper(),l.disableWakeLock(),l.endPresent_(),l.removeFullscreenListeners_()),l.fireVRDisplayPresentChange_()},function(){l.waitingForPresent_&&(l.removeFullscreenWrapper(),l.removeFullscreenListeners_(),l.disableWakeLock(),l.waitingForPresent_=!1,l.isPresenting=!1,e(new Error("Unable to present.")))}),function(e){if(A())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(s)?(l.enableWakeLock(),l.waitingForPresent_=!0):(M()||A())&&(l.enableWakeLock(),l.isPresenting=!0,l.beginPresent_(),l.fireVRDisplayPresentChange_(),t())}l.waitingForPresent_||M()||(N(),e(new Error("Unable to present.")))}else t()}else e(new Error("VRDisplay is not capable of presenting."))})},Te.prototype.exitPresent=function(){var i=this.isPresenting,n=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(e,t){i?(!N()&&M()&&(n.endPresent_(),n.fireVRDisplayPresentChange_()),A()&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.endPresent_(),n.fireVRDisplayPresentChange_()),e()):t(new Error("Was not presenting to VRDisplay."))})},Te.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},Te.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},Te.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},Te.prototype.addFullscreenListeners_=function(e,t,i){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=i,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),i&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",i,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",i,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",i,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",i,!1))},Te.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var i=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",i,!1),e.removeEventListener("webkitfullscreenerror",i,!1),document.removeEventListener("mozfullscreenerror",i,!1),e.removeEventListener("msfullscreenerror",i,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},Te.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},Te.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},Te.prototype.beginPresent_=function(){},Te.prototype.endPresent_=function(){},Te.prototype.submitFrame=function(e){};var we={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!(Te.prototype.getEyeParameters=function(e){return null}),DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},Ee={LEFT:"left",RIGHT:"right"};function Le(e){var t=E({},we);e=E(t,e||{}),Te.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new pe({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new se(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new K(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new X(this.dpdb_.getDeviceParams(),e.ADDITIONAL_VIEWERS),this.viewerSelector_=new Me(e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new ue),M()&&window.addEventListener("resize",this.onResize_.bind(this))}return(Le.prototype=Object.create(Te.prototype))._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Le.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Le.prototype._getFieldOfView=function(e){var t;if(e==Ee.LEFT)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=Ee.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},Le.prototype._getEyeOffset=function(e){var t;if(e==Ee.LEFT)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=Ee.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},Le.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),i=this._getFieldOfView(e),n={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(n,"fieldOfView",{enumerable:!0,get:function(){return S("VRFieldOfView","VRFrameData's projection matrices"),i}}),n},Le.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Le.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Le.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=f()*this.bufferScale_,e.canvas.height=D()*this.bufferScale_,this.cardboardUI_=new R(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new R(e)),this.distorter_=new O(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(h()&&T()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Le.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Le.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Le.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},Le.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Le.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),L(t.canvas)}},Le.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Le.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},Le.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Le.VRDisplay=Te,Le}()}(e={exports:{}},e.exports),e.exports),a=(t=o)&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,s={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function u(e){this.config=n(n({},s),e),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&i())&&(this.enable(),this.getVRDisplays().then(function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()}))}u.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(i()){var e=new a({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},u.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(e){e instanceof t?n.call(this,e):(n.call(this,i),e.pose=i.pose,r(i.leftProjectionMatrix,e.leftProjectionMatrix),r(i.rightProjectionMatrix,e.rightProjectionMatrix),r(i.leftViewMatrix,e.leftViewMatrix),r(i.rightViewMatrix,e.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=a.VRDisplay,window.VRFrameData=a.VRFrameData},u.prototype.getVRDisplays=function(){var t,i=this,n=this.config;if(!this.hasNative)return Promise.resolve(this.getPolyfillDisplays());var r,e=this.native.getVRDisplays.call(navigator),o=new Promise(function(e){t=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),e([])},n.GET_VR_DISPLAYS_TIMEOUT)});return(r=[e,o],Promise.race?Promise.race(r):new Promise(function(e,t){for(var i=0;i<r.length;i++)r[i].then(e,t)})).then(function(e){return clearTimeout(t),0<e.length?e:i.getPolyfillDisplays()})},u.version="0.10.6",u.VRFrameData=a.VRFrameData,u.VRDisplay=a.VRDisplay;var c=Object.freeze({default:u}),l=c&&u||c;return void 0!==me&&me.window&&(me.document||(me.document=me.window.document),me.navigator||(me.navigator=me.window.navigator)),l}),PSH.EmbeddedGallery=function(o,e,t,i,n){var a,s=100,r=EXT.select(".gallery"),u=EXT.select(".dots"),c=EXT.select(".desc"),l=EXT.select(".desc-text"),M=EXT.select(".thumbs"),A=EXT.select(".thumbs ul"),g=EXT.select(".thumbs .thumbs-show"),d=EXT.select(".thumbs .thumbs-hide"),h=EXT.select(".next-thumb"),f=EXT.select(".prev-thumb"),D=EXT.select(".num"),N=EXT.select(".prev"),y=EXT.select(".next"),p=[],T=[],w=function(){!1},E=function(){PSH.setThumbs(i.has("thumbs")?i.num("thumbs"):1),Application.resize.on(I),I()},L=function(){PSH.ViewerUtil.hasThumbs()&&(t.thumbBarHidden.value=!1,M.ext.transition({transform:{y:0}},200,"ease"),g.ext.hide())};g.ext.on("click",L),d.ext.on("click",function(){t.thumbBarHidden.value=!0,M.ext.transition({transform:{y:96}},200,"ease"),g.ext.show()});var m=function(){if(n.ext.show(),o.index=Math.max(0,o.index),o.index=Math.min(o.length-1,o.index),0<p.length)for(var e=0;e<p.length;e++)p[e].classList.toggle("selected",e==o.index);if(0<T.length){for(e=0;e<T.length;e++)T[e].classList.toggle("selected",e==o.index);g.ext.hide(),D.innerHTML=o.index+1+"/"+T.length,L()}},I=function(){if(0<T.length)if(window.innerWidth>T.length*s){A.ext.x=.5*(window.innerWidth-T.length*s),A.ext.transform(),h.ext.hide(),f.ext.hide();for(var e=0;e<T.length;e++)T[e].loadThumb()}else h.ext.show(),f.ext.show(),S(0,0)};PSH.setThumbs=function(e){1==e?(M.ext.show(),y.ext.hide(),N.ext.hide(),u.ext.hide()):-1==e?(M.ext.hide(),u.ext.hide(),y.ext.hide(),N.ext.hide()):(M.ext.hide(),y.ext.show(),N.ext.show(),u.ext.show())};var x=PSH.ViewerUtil.getCollection();o.list.forEach(function(e,i){var n=EXT.create("li"),t=EXT.create("img");t.setAttribute("draggable","false");var r=!1;n.ext.on("click",function(){z||o.index!=i&&(o.index=i,clearTimeout(a),a=setTimeout(w,1e3),!0,Application.navigate.trigger("share/"+o.c+"/collection/"+x.id+document.location.search))}),Simplrz.touch||(n.ext.on("mouseover",function(){if(!j)if(x.desc[i]){PSH.StringFormat.desc(x.desc[i],l,!1),c.style.opacity=1;var e=n.ext.rect(),t=c.ext.rect();c.ext.x=e.left+.5*e.width,c.ext.x-=t.width/2,c.ext.x=Math.max(0,c.ext.x),c.ext.x=Math.min(window.innerWidth,c.ext.x),c.ext.transform()}else c.style.opacity=0}),n.ext.on("mouseout",function(){c.style.opacity=0})),n.loadThumb=function(){if(!r&&x){r=!0;var e=PSH.IMAGE_PATH.replace("%1",x.uuids[i]+"/01-cover").replace("%2","jpg");t.src=e}},i<48&&n.loadThumb(),n.appendChild(t),T.push(n),A.appendChild(n)}),A.style.width=o.length*s+"px",o.length<=20&&o.list.forEach(function(e,t){var i=EXT.create("li");i.ext.on("click",function(){o.index=t,clearTimeout(a),a=setTimeout(w,1e3),!0,Application.navigate.trigger("share/"+o.c+"/collection/"+x.id+document.location.search)}),p.push(i),u.appendChild(i)}),M.ext.hide(),u.ext.show();var S=function(e,t){null==t&&(t=A.ext.x);var i=t+e*s*2;i=Math.min(i,0),i=Math.max(i,T.length*-s+window.innerWidth-36),A.ext.transition({transform:{x:i}},400,"ease");for(var n=Math.abs(Math.floor(i/s)),r=0;r<T.length;r++)r<=n+48&&T[r].loadThumb()};h.ext.on("click",function(){S(1)}),f.ext.on("click",function(){S(-1)}),y.ext.on("click",function(){o.index++,o.index==o.list.length&&(o.index=0),m(),clearTimeout(a),a=setTimeout(w,1e3),!0,Application.navigate.trigger("share/"+o.c+"/collection/"+x.id+document.location.search)}),N.ext.on("click",function(){o.index--,-1==o.index&&(o.index=o.list.length-1),m(),clearTimeout(a),a=setTimeout(w,1e3),!0,Application.navigate.trigger("share/"+o.c+"/collection/"+x.id+document.location.search)}),m(),t.vrMode.on(function(e,t){e?r.ext.hide():r.ext.show()}),Application.route.on(function(i,e){"collection"!=i.parts[1]&&(o.index=-1,o.c=-1,o.list.forEach(function(e,t){e==i.parts[1]&&(o.c=e,o.index=t)}),m())});var j=!1,v=-1,z=!1,O=0,C=0,Q=function(e){j=!0,C=(new Date).getTime(),v=e.targetTouches?e.targetTouches[0].pageX:e.pageX},b=function(e){if(j){var t=e.targetTouches?e.targetTouches[0].pageX:e.pageX,i=window.innerWidth,n=A.ext.x+(t-v);n=Math.min(n,0),n=Math.max(n,T.length*-s+i-38),i<T.length*s&&(A.ext.x=n,A.ext.transform(),O+=Math.abs(t-v)),(10<O||200<(new Date).getTime()-C)&&(z=!0),v=t}},R=function(e){j=!1,v=-1,O=0,setTimeout(function(){z=!1},1)};A.ext.on("mousedown",Q),A.ext.on("mousemove",b),document.addEventListener("mouseup",R),A.ext.on("touchstart",Q),A.ext.on("touchmove",b),document.addEventListener("touchend",R),PSH.ViewerUtil.shouldAutoplay()?E():(PSH.setThumbs(i.has("thumbs")?i.num("thumbs"):1),t.activate.on(E))},PSH.ViewerOverlay=function(e,i){var n,r=EXT.select(".info"),o=r.ext.select(".user"),a=r.ext.select(".user .name"),s=r.ext.select(".user .icon"),u=r.ext.select(".desc"),c=EXT.select(".buttons"),l=EXT.select(".drawer"),M=EXT.select(".link-back"),A=(EXT.select(".inst"),EXT.select(".inst span")),g=EXT.select(".fs-disabled-info"),t=EXT.select(".vr-rotate-info"),d=PSH.Fullscreen(EXT.select(".fs"),e),h=EXT.select(".fullscreen"),f=EXT.select(".vr"),D=EXT.select(".ios-close-btn"),N=!1,y=!0,p=function(){window.innerWidth<window.innerHeight&&e.vrMode.value?t.style.visibility="visible":t.style.visibility="hidden"};h.ext.on("click",function(){PSH.ViewerUtil.iOSFSHackEnabled()&&Simplrz.iOS?window.open(document.location.href):d.enabled?d.toggle():g.ext.show()}),f.ext.on("click",function(){PSH.GA.event("embed","vr"),PSH.ViewerUtil.isStandalone()||PSH.ViewerUtil.iOSOverride()?e.vrMode.value=!e.vrMode.value:PSH.ViewerUtil.iOSFSHackEnabled()&&Simplrz.iOS?window.open(document.location.href+"&directvr=1"):d.enabled?e.vrMode.value=!e.vrMode.value:g.ext.show()}),D.ext.on("click",function(){window.close()}),e.vrMode.on(function(e){!e||Simplrz.iOS&&PSH.ViewerUtil.isStandalone()?c.ext.show():c.ext.hide(),t.ext.toggle(e),p()}),Application.resize.on(p),g.ext.select("button").ext.on("click",g.ext.hide),t.ext.select("button").ext.on("click",t.ext.hide);var T=function(){if(!n){var t;n=new Value(!1);Application.resize.on(function(){n.value||r.ext.transform({y:-window.innerHeight})}),n.on(function(e){e?(clearTimeout(t),r.ext.show(),r.ext.transform({y:.4*-window.innerHeight}),r.ext.transition({transform:{y:0}},200,"cubic-bezier(0,.63,.64,1)",0)):(r.ext.transform({y:.6*-window.innerHeight}),r.ext.transition({transform:{y:-window.innerHeight}},200,"cubic-bezier(0,.63,.64,1)"),t=setTimeout(function(){r.ext.hide()},200))}),l.ext.on("click",function(e){!n.value&&window.ga&&PSH.GA.event("drawer","open"),n.value=!n.value}),r.ext.on("click",function(e){var t=e.target.nodeName.toLowerCase();"span"!=t&&"a"!=t&&(n.value=!1)})}};PSH.setAlpha=function(e){var t=Math.max(.6,e||1);M.style.opacity=t,c.style.opacity=t,A.style.opacity=Math.min(1,t)},PSH.setFullscreen=function(e){e?h.ext.show():h.ext.hide()},PSH.setVR=function(e){e?f.ext.show():f.ext.hide()},PSH.setLogoPos=function(e){M.setAttribute("class","link-back"),e&&M.classList.add(e)},PSH.setMargin=function(e){e=Math.clamp(e,6,30),e+="px",M.style.margin=e,c.style.margin=e,A.style.marginBottom=e},PSH.setChromeless=function(e){e?l.ext.hide():l.ext.show()},PSH.setLogo=function(e,t){if(!PSH.ViewerUtil.isKuula()||1==e){var i=PSH.CDNPATH+"assets/viewer/logo.svg";M.ext.show();var n=M.ext.select("img");n.ext.hide(),n.ext.on("load",function(){n.ext.show()});var r=PSH.ViewerUtil.hasCollection()?PSH.ViewerUtil.getCollection().user:PSH.ViewerUtil.getPostData().user;if(PSH.ViewerUtil.isProUser()&&"-1"==e);else if(PSH.ViewerUtil.isProUser()&&"0"!==e){if(1!=r.data.settings.logo)return void(n.src=i);var o=PSH.IMAGE_PATH.replace("%1","users/"+r.data.name.toLowerCase()+"-logo").replace("%2","png"),a=t?"?"+Math.random():"";if(n.src=o+a,y=!1,r.data.website){var s=PSH.StringFormat.sanitizeURL(r.data.website);0!=s.indexOf("http")&&(s="http://"+s),M.setAttribute("href",s)}}else n.src=i,y&&M.setAttribute("href","https://kuula.co/about")}},PSH.setLogoSize=function(e){e=Math.clamp(e,PSH.ViewerUtil.isProUser()?30:70,1e3),M.style.width=e+"px"};return{linkBack:M,display:function(t){if(t,function(){if(!N){PSH.setFullscreen(PSH.ViewerUtil.showFullscreen());var e=function(){PSH.setVR(PSH.ViewerUtil.showVR()&&PSH.Webvr.supported)};PSH.Webvr.isReady?e():PSH.Webvr.ready.on(e),PSH.setLogo(i.val("logo")||0,!0),PSH.setLogoSize(i.val("logosize")||70),PSH.setMargin(i.val("margin")),i.bool("logopos")?PSH.setLogoPos(i.val("logopos")):PSH.ViewerUtil.hasCollection()&&PSH.ViewerUtil.hasThumbs()&&PSH.setLogoPos("tl"),PSH.setAlpha(i.val("alpha")),N=!0}}(),PSH.ViewerUtil.userOwnsPost(t)&&PSH.ViewerUtil.isChromeless(t)?l.ext.hide():l.ext.show(),a.innerHTML=t.user.getName(),o.setAttribute("href","https://kuula.co/profile/"+t.user.data.name),g.ext.select("a").setAttribute("href","https://kuula.co/post/"+t.id),t.description){var e=t.description;e=PSH.StringFormat.desc(e,u,PSH.ViewerUtil.isProUser())}t.user.getIcon(function(e){s.ext.bg(e.src),t.user.hasPicture()?s.innerHTML="":s.innerHTML=t.user.getInitial()}),M.ext.on("click",function(){PSH.GA.event("linkback","click")}),T()}}},PSH.ViewerUtil=function(t){var i,s,n=0,r=function(){return s?s.user.getType()>=PSH.UserData.PRO:i?i.user.getType()>=PSH.UserData.PRO:o()},e=function(){return 0==document.referrer.indexOf("https://twitter.com")},o=function(){var e=document.referrer;return(0==e.indexOf("https://kuula.co")||0==e.indexOf("https://blog.kuula.co"))&&-1==e.indexOf("/embed/")},a=function(){var e=document.referrer;return(0==e.indexOf("https://kuula.co")||0==e.indexOf("http://localhost"))&&-1<e.indexOf("/embed/")},u=function(){return t.bool("iosfs")},c=function(){return t.bool("iosov")},l=function(){return window.self==window.top};return{setPostData:function(e){i=e},getPostData:function(){return i},setPriority:function(e){n=e?1:0},isEmbedded:function(){try{return window.self!==window.top}catch(e){return!0}},getIds:function(t){var e=document.location.pathname.split("/").reverse(),i=e.indexOf("collection");if(this.hasCollection()&&!s){var n=e[i-1],r=function(e){s={id:e.payload.id,user:PSH.UserData().update(e.payload.user),uuids:e.payload.uuids,desc:e.payload.desc,ids:e.payload.ids},t(e.payload.ids)};if(KUULA_COLLECTION&&KUULA_COLLECTION.id==n){r(JSON.parse(atob(KUULA_COLLECTION.data)))}else{var o=PSH.COLLECTION_PATH.replace("%1",n);Loader.loadJSON(o,r)}}else{i=e.indexOf("share");var a=e[i-1].split(":");t(a)}},getRenderMode:function(){var e=document.location.pathname.split("/").reverse(),t=e.indexOf("share");return e[t-2]},shouldAutoplay:function(){return 0<n&&EmbedSession.hasLock()||e()||a()||l()},showFullscreen:function(){return!(Simplrz.iOS&&l()||Simplrz.iOS&&!u()||e()||Simplrz.vrbrowser)&&(!t.has("fs")||t.bool("fs"))},showVR:function(){return!(Simplrz.iOS&&!l()&&!u()&&!c()||e())&&(!!r()&&(!t.has("vr")||t.bool("vr")))},showClose:function(){return l()&&u()},hideInstruction:function(){return t.bool("hideinst")||l()&&u()},isChromeless:function(e){return!(!r()&&!o())&&(!t.has("chromeless")||t.bool("chromeless"))},isStandalone:l,iOSFSHackEnabled:u,hasCollection:function(){return-1<document.location.pathname.split("/").reverse().indexOf("collection")},getCollection:function(){return s},hasThumbs:function(){return!t.has("thumbs")||1==t.num("thumbs")},userOwnsPost:function(e){return!e||!s||s.user.data.id==i.user.data.id},isProUser:r,isTwitter:e,isKuula:o,isEmbedEditor:a,isJSEmbed:function(){return t.bool("enablejs")},iOSOverride:c}},window.getKuulaConfig=function(e){return{config:{version:"1",deeplinks:!0,debug:e.debug,build:e.build},billing:{key:e.sk},track:{ga:"UA-73999210-1",aw:"AW-842461753",awReg:"TuY2CK323nMQueTbkQM",awProSTM:"VixeCKifu3sQueTbkQM",awProSTY:"-yLwCNftv3sQueTbkQM",awProPP:"6qU0CMmfu3sQueTbkQM",fb:e.fb},maps:{url:"//maps.googleapis.com/maps/api/js",key:"AIzaSyClGeGCyWMNve0TPvTG5_EJHXPIMtbr5tc",style:[]},filters:[{name:"none",color:"#333"},{name:"xprocess",color:"#108bae"},{name:"cooler",color:"#4a6c9a"},{name:"greyscale",color:"#777"},{name:"vintage",color:"#beb99c"},{name:"bloom",color:"#cb7a12"}],pageTags:{"basic-bmy":0,"pro-bmy":8,"pro-bm":12,"pro-by":96,"ent-bmy":96,"pro-yd":Math.round(100-8/12*100)+"%"},pages:{features:{html:"content/features.html",css:"content/features.css",cssClass:"features",js:"content/Features.js",jsFunc:"Features",title:"Kuula Features"},vr:{html:"content/vr.html",css:"content/vr.css",cssClass:"vrhome",js:"content/VRHome.js",jsFunc:"VRHome",title:"Virtual Reality",padding:80},pricing:{html:"content/pricing.html",css:"content/pricing.css",cssClass:"pricing",js:"content/Pricing.js",jsFunc:"Pricing",padding:80},pro:{html:"content/pro.html",css:"content/pro.css",cssClass:"pro-page",padding:80},realestate:{html:"content/realestate.html",css:"content/pro.css",cssClass:"pro-page",padding:80},virtualtours:{html:"content/virtualtours.html",css:"content/pro.css",cssClass:"pro-page",padding:80},architecture:{html:"content/architecture.html",css:"content/pro.css",cssClass:"pro-page",padding:80},construction:{html:"content/construction.html",css:"content/pro.css",cssClass:"pro-page",padding:80},changelog:{html:"content/changelog.html",css:"content/pro.css",cssClass:"changelog",padding:80}},helps:{"upload-post":{title:"Upload post"},"delete-post":{title:"Delete post"},"virtual-tours":{title:"Creating Virtual Tours"},"map-floor-plan":{title:"Adding maps and floor plans"},collections:{title:"Working with collections"},"embed-pro-features":{title:"Embed PRO features"},unlisted:{title:"Unlisted posts and collections PRO"},"batch-upload":{title:"Batch Upload PRO"},"embed-code":{title:"Embed Code Options"},"formatting-descriptions":{title:"Formatting Post Descriptions"},"vr-embed":{title:"VR mode in embeds"},"lens-flare":{title:"Sun & lens flare settings"},"partial-panos":{title:"Partial panoramas"},"stickers-and-text":{title:"Adding stickers & text to photos"},hotspots:{title:"Adding hotspots to photos"},"gaze-navigation":{title:"VR Gaze Navigation"},"ios-homescreen":{title:"Optimizing VR on iPhones/iOS"},"oculus-go-webvr":{title:"Viewing post and tours on Oculus Go and Samsung Gear VR"},"vr-mode":{title:"Browsing in Virtual Reality"}}}},PSH.CollectionData=function(n){return(n=n||{isNew:!0}).user&&(n.user=PSH.UserData().update(n.user)),n.isAdded&&(n.isAdded="1"==n.isAdded),n.isCollection=!0,n.getCover=function(e){var t=0==n.tiny||e?"-cover":"-tinyp-cover",i=n.uuid+"/01"+t;return PSH.IMAGE_PATH.replace("%1",i).replace("%2","jpg")},n},PSH.CollectionData.createAll=function(e){var t=[];return e.forEach(function(e){t.push(new PSH.CollectionData(e))}),t},PSH.CollectionData.MAX_COLLECTIONS=1e3,PSH.CommentData=function(e){return e.user=PSH.UserData().update(e.user),e.getAge=function(){return PSH.StringFormat.now()-e.created},e},PSH.CommentData.create=function(t,i){var e=(new Date).getTime()/1e3|0;return{content:i,user:t.user,getAge:function(){return PSH.StringFormat.now()-e},getFormData:function(){var e=new FormData;return e.append("cmd",PSH.CommentService.ADD),e.append("content",i),e.append("post",t.currentPost.id),e}}},PSH.CommentData.createAll=function(e){var t=[];return e.forEach(function(e){t.push(PSH.CommentData(e))}),t},PSH.MetaData=function(e,t){var n=e,r=t,o=t?(new DOMParser).parseFromString(t,"text/xml"):null,s=Math.sqrt(2),u={get exif(){return n},get xmp(){return o},get exifString(){return JSON.stringify(n)},get xmpString(){return r},get heading(){return parseFloat(u.xmpTag("PoseHeadingDegrees")||0)},get pitch(){return parseFloat(u.xmpTag("PosePitchDegrees")||0)},get roll(){return parseFloat(u.xmpTag("PoseRollDegrees")||0)},hasData:function(){return null!=n&&""!=n},hasCameraInfo:function(){return""!=u.getModel().join("")},hasLocation:function(){return n&&null!=n.GPSLatitude&&null!=n.GPSLongitude},tag:function(e){if(null==n)return null;var t=n[e];return t?"string"==typeof t?t.trim():t:null},xmpTag:function(e,t){if(!o)return t;var i=o.querySelector(e);return i?i.textContent:t},xmpNode:function(e,t){return o?o.querySelector(e):null},xmpValue:function(e,t,i){if(!o||!o.evaluate)return null;var n,r=o.evaluate("//@GPano:"+e+"|//"+e+"|//GPano:"+e,o,function(e){if("GPano"==e)return"http://ns.google.com/photos/1.0/panorama/"},XPathResult.ANY_TYPE,null);for(n=r.iterateNext();n;){if(n)return parseFloat(n.textContent);n=r.iterateNext()}return null},getLatitude:function(){var e=n.GPSLatitude,t=n.GPSLatitudeRef;return e?PSH.MathUtil.dms2Float(e[0],e[1],e[2],t):null},getLongitude:function(){var e=n.GPSLongitude,t=n.GPSLongitudeRef;return e?PSH.MathUtil.dms2Float(e[0],e[1],e[2],t):null},getModel:function(){var e=[],t=u.tag("Model"),i=u.tag("Make");t&&i&&-1==t.indexOf(i)&&(t=i+" "+t),t?(t=(t=t.replace("SM-C200","Gear 360")).replace("SM-R210","Gear 360 (2017)"),e.push(t)):e.push("");var n=u.tag("FocalLength");n?e.push(n+"mm"):e.push("");var r=u.tag("ExposureTime");r?(r<1&&(r="1/"+Math.round(1/r)),e.push(r+"s")):e.push("");var o=u.tag("ApertureValue");o?(o=(o=Math.pow(s,o))==Number.POSITIVE_INFINITY?"&infin;":o.toPrecision(2),e.push(""+o)):e.push("");var a=u.tag("ISOSpeedRatings");return a?e.push("ISO "+a):e.push(""),e},parse:function(e,i){EXIF.getData(e,function(e,t){n=e,o=(r=t)?(new DOMParser).parseFromString(t,"text/xml"):null,delete n.thumbnail,delete n.MakerNote,delete n.UserComment,i&&i()})},getCrop:function(){var e=u.xmpValue("CroppedAreaImageHeightPixels");if(!e)return!1;var t=u.xmpValue("CroppedAreaImageWidthPixels"),i=u.xmpValue("FullPanoHeightPixels"),n=u.xmpValue("FullPanoWidthPixels");if(t==n&&e==i)return!1;var r=u.xmpValue("CroppedAreaTopPixels"),o=(u.xmpValue("CroppedAreaLeftPixels"),i/e),a=(r=i-(e+r))/i*-o;return-.01<a&&(a=0),[n/t,o,(n-t)/n*-1,a]},log:function(){}};return u},PSH.PhotoData=function(u,c){var a=this,s=null;this.getSource=function(e,t){e=e||Number.POSITIVE_INFINITY;var i,n=0,r=screen.width<768?4:16;r*=Math.max(screen.width,screen.height),r=Math.min(e,r);var o=PSH.Glut.isOldIOS();t||(r=Math.max(4097,r));for(var a=0;a<u.sizes.length;a++){var s=parseInt(u.sizes[a]);if(n<s&&s<=r&&(!o||PSH.MathUtil.isNpot(s))){n=s,i=u.sizes[a];break}}return i||(i=u.sizes[u.sizes.length-1]),PSH.IMAGE_PATH.replace("%1",c+"/"+u.name+"-"+i).replace("%2","jpg")},this.getSize=function(e,t){return t&&-1<u.sizes.indexOf(""+t)?t:(e=e||0,u.sizes?u.sizes[e]:0)},this.getImage=function(e,t,i,n){if(u.localImages)for(var r=0;r<u.localImages.length;r++){var o=u.localImages[r];if("share"!=o.size&&o.size<=e){t(o.canvas);break}}else s=PSH.ImageCache.load(a.getSource(e),t,i,n)},this.getCurrentLoadedImage=function(){return s},this.clear=function(){s&&(s.abort(),s=null)}},PSH.PhotoOptions=function(e){var r=e,t=JSON.parse(JSON.stringify(e));e.sun&&e.sun.constructor===Array&&(e.sun=(new SQR.V3).copyFrom(e.sun));var i=function(e,t){var i=r,n=PSH.PhotoOptions.defaultOptions();return null!=i[e]?i[e]:null!=n[e]&&n[e]},n={get heading(){return i("heading")},get roll(){return i("roll")},get pitch(){return i("pitch")},get zoom(){return i("zoom")},get pitchLimit(){return i("pitchLimit")},get crop(){return i("crop")},get flat(){return i("flat")},get orientation(){return i("orientation")},get filter(){return i("filter")},get filterintensity(){return i("filterintensity")},get sun(){return i("sun")},get format(){return i("format")},get lensflare(){return i("lensflare")},get glare(){return i("glare")},get sunIntensity(){return i("sunIntensity")},get tinyRot(){return i("tinyRot")},get tinyScale(){return i("tinyScale")},get tinyBulge(){return i("tinyBulge")},get tinyInvert(){return i("tinyInvert")},get tinyOffsetX(){return i("tinyOffsetX")},get tinyOffsetY(){return i("tinyOffsetY")},get tinySaved(){return i("tinySaved")},get showInfo(){return i("showInfo")},get showLocation(){return i("showLocation")},get info(){return i("info")},get location(){return i("location")},get latlng(){return i("latlng")},get originalSize(){return r.original},set heading(e){r.heading=o(e,"heading")},set zoom(e){r.zoom=o(e,"zoom")},set pitchLimit(e){r.pitchLimit=o(e,"pitchLimit")},set crop(e){r.crop=o(e,"crop")},set flat(e){r.flat=o(e,"flat")},set orientation(e){r.orientation=o(e,"orientation")},set filter(e){r.filter=o(e,"filter")},set filterintensity(e){r.filterintensity=o(e)},set sun(e){r.sun=o(e)},set lensflare(e){r.lensflare=o(e,"lensflare")},set glare(e){r.glare=o(e)},set sunIntensity(e){r.sunIntensity=o(e)},set tinyRot(e){r.tinyRot=o(e,"tiny")},set tinyScale(e){r.tinyScale=o(e,"tiny")},set tinyBulge(e){r.tinyBulge=o(e,"tiny")},set tinyInvert(e){r.tinyInvert=o(e,"tiny")},set tinyOffsetX(e){r.tinyOffsetX=o(e,"tiny")},set tinyOffsetY(e){r.tinyOffsetY=o(e,"tiny")},set tinySaved(e){r.tinySaved=o(e),console.log("DEPRECATED PhotoOption.tinySaved")},set showInfo(e){r.showInfo=o(e,"info")},set showLocation(e){r.showLocation=o(e,"info")},set info(e){r.info=e},set location(e){r.location=e},set latlng(e){r.latlng=e},toJSON:function(){return JSON.stringify(r)},setOriginalSize:function(e,t,i){switch(r.original={width:e,height:t},i){case 3:r.orientation=1*Math.PI;break;case 6:r.orientation=-.5*Math.PI;break;case 8:r.orientation=.5*Math.PI;break;case 1:default:r.orientation=0}},isRotated:function(){return!!r.orientation&&r.orientation!=Math.PI},getMapsLink:function(){var e="https://www.google.com/maps/place/"+r.latlng[0]+"+"+r.latlng[1];return encodeURI(e)}},o=function(e){return e};return n.makeEditable=function(e){o=e||null},n.forceChange=function(){o()},n.revert=function(){r=JSON.parse(JSON.stringify(t)),o(null,"revert")},n.seal=function(){t=JSON.parse(JSON.stringify(r))},n},PSH.PhotoOptions.defaultOptions=function(){return{heading:.5*Math.PI,roll:0,pitch:0,crop:!1,flat:!1,orientation:0,zoom:0,pitchLimit:0,lensflare:0,glare:.1,sunIntensity:.1,tinyRot:0,tinyScale:.5,tinyBulge:.5,tinyInvert:0,tinyOffsetX:0,tinyOffsetY:0,tinySaved:!1,sun:null,filter:"none",filterintensity:1,format:"jpg",showInfo:!1,showLocation:!1,location:null,latlng:null,info:null}},PSH.PostData=function(n){var i,t;(n=n||{cover:"01",tiny:0,isUpload:!1}).tiny=parseInt(n.tiny||0),n.likes=parseInt(n.likes||0),n.flat=parseInt(n.flat||0);var r=function(e){return e};if(n.photos){var e=n.photos[0];t=new PSH.PhotoData(e,n.uuid),n.options=new PSH.PhotoOptions(e.options||PSH.PhotoOptions.defaultOptions()),n.meta=PSH.MetaData(e.exif,e.xmp),n.addons=e.addons?JSON.parse(e.addons):null,t.options=n.options,t.meta=n.meta,n.hasPhoto=!0}Object.defineProperty(n,"photo",{get:function(){return t},set:function(e){t=e,n.meta=PSH.MetaData(),n.hasPhoto=null!=e}}),n.user&&(n.user=PSH.UserData().update(n.user));var o=n.privacy;Object.defineProperty(n,"privacy",{get:function(){return o},set:function(e){n.publish="private"!=e&&"private"==o,o=r(e)}});var a=n.description;Object.defineProperty(n,"description",{get:function(){return a||""},set:function(e){a=r(e)}});var s=n.tiny;Object.defineProperty(n,"tiny",{get:function(){return s||0},set:function(e){s=r(e)}}),n.getCover=function(e){var t=n.tiny<2?"-cover":"-tinyp-cover",i=n.uuid+"/"+n.cover+t;return i=PSH.IMAGE_PATH.replace("%1",i).replace("%2","jpg"),e&&(i+="?c="+Math.round(1e8*Math.random())),i},n.getTinyPlanetCover=function(e){var t=n.uuid+"/"+n.cover+"-tinyp-cover";return t=PSH.IMAGE_PATH.replace("%1",t).replace("%2","jpg"),e&&(t+="?c="+Math.round(1e8*Math.random())),t},n.setCover=function(e){n.updatedCover=r(e,"cover")},n.setTinyCover=function(e){n.updatedTinyCover=r(e,"tinyc")},n.setShareImage=function(e){n.shareImage=r(e,"share")},n.getAge=function(){return PSH.StringFormat.now()-n.created},n.getCrop=function(){return n.options.crop||n.meta.getCrop()||!1},n.isFeatured=function(){return 0<parseInt(n.featured)};var u=!(n.getOptions=function(){return n.options}),c=[],l=function(){i&&i.optionsChanged.trigger(c),u=!1,c.length=0},M=function(e,t){return t&&c.push(t),i&&!u&&(u=!0,setTimeout(l,0)),e};return n.update=function(){M()},n.makeEditable=function(e){return i=e,n.options.makeEditable(M),r=M,n},n.destroy=function(){n.options.makeEditable(!1),i=null},n},PSH.PostData.createAll=function(e){var t=[];return e.forEach(function(e){t.push(new PSH.PostData(e))}),t},PSH.UserData=function(e){var i,n,r,o,t="https://files.kuula.io/users/",a=location.protocol+"//"+location.host+"/projects/kuula/storage/users/",s=t+"%1.jpg",u=t+"%1-icon.jpg";PSH.LOCAL_IMAGES&&(s=a+"%1.jpg",u=a+"%1-icon.jpg");var c=function(){var e=1+i.name.charCodeAt(0)%5;return PSH.CDNPATH+"assets/default-profile/0%1.jpg".replace("%1",e)},l={get data(){return i},get status(){return n}};return l.newNotifications=new Value(0),n=PSH.STATUS_DEFAULT,l.update=function(e,t){return(i=e)&&(i.type=parseInt(i.type),i.settings=i.settings||{}),n=null!=t?t:PSH.STATUS_DEFAULT,l.loggedIn()&&e.stats&&(l.newNotifications.value=e.stats.newnotif),l},l.notFound=function(){return 1==i.status},l.getInitial=function(){return i.name.substring(0,1).toUpperCase()},l.getProfileComplete=function(){var e=100;return i.displayname&&""!=i.displayname||(e-=20),0==i.picture&&(e-=20),i.url&&""!=i.url||(e-=20),i.bio&&""!=i.bio||(e-=20),e},l.getName=function(){return i.displayname||i.name},l.getType=function(){return i.type||0},l.getTypeLabel=function(){switch(i.type){case"10":return"Editor";case"1":return"Pro";default:return"Regular"}},l.canUpload=function(){if(l.loggedIn()){var e=i.stats.maxUsage,t=i.stats.usage;return!!l.isPro()||t<e}return!1},l.limitReachLevel=function(){if(l.loggedIn()){var e=i.stats.maxUsage,t=i.stats.usage;return l.isPro()?0:t/e}return 1},l.getPicture=function(e,t){if(o)e(o);else{(o=new Image).addEventListener("load",function(){e(o,!1)}),o.addEventListener("error",function(){e(o,!0)});var i=l.getPicturePath()+(t?"?cache="+Math.floor(1e3*Math.random()):"");o.src=i}},l.hasPicture=function(){return 1==i.picture},l.getPicturePath=function(){return 1==i.picture?s.replace("%1",l.data.name.toLowerCase()):c()},l.getIconPath=function(){return 1==i.picture?u.replace("%1",l.data.name.toLowerCase()):c()},l.getIcon=function(e){if(r)e(r);else{r=new Image;var t=function(){r.removeEventListener("load",t),e(r)};r.addEventListener("load",t),r.src=l.getIconPath()}},l.onPictureUpdate=function(){o=r=null},l.isSelf=function(e){return l.loggedIn()&&i&&e&&e.data.id==i.id},l.canEdit=function(e){return e&&(!0===e.isUpload||l.loggedIn()&&l.data.id==e.user.data.id||l.isAdmin())},l.isOwner=function(e){return e&&l.loggedIn()&&l.data.id==e.user.data.id},l.isPro=function(){return l.data&&l.data.type>=PSH.UserData.PRO},l.isEditor=function(){return l.data&&0<l.data.role},l.isAdmin=function(){return l.loggedIn()&&l.data&&1==l.data.admin},l.logout=function(){i=null,pictAsset=null,iconAsset=null,n=PSH.STATUS_LOGGED_OUT},l.loggedIn=function(){return n==PSH.STATUS_LOGGED_IN},l},PSH.UserData.FREE=0,PSH.UserData.PRO=1,PSH.UserData.createAll=function(e){var t=[];return e.forEach(function(e){t.push((new PSH.UserData).update(e))}),t},PSH.BaseImage=function(M){var A,g,d,h,f,D={},N={},y=null,p=null,T=new SQR.V2;return D.onImage=function(e){g=e,T.set(g.naturalWidth||g.width,g.naturalHeight||g.height),y=null},D.apply=function(e,t){if(e)A=e;else if(!e&&!A)return void console.error("BaseImage > No image provided");var i=A.options.flat?Math.max(T.x,T.y):T.x,n=Math.min(D.getMaxFramebufferSize(),PSH.MathUtil.nextNpot(i)),r=A.options.flat?n:n/2,o=t?"none":A.options.filter,a=A.options.filterintensity;if(y!=o||p!=a){if(!d||!y){var s=null;PSH.Glut.isOldIOS()?s={wrap:SQR.gl.REPEAT,filter:SQR.gl.LINEAR,mipmap:!0}:A.options.flat||(s={}),d=SQR.Texture(g,s)}if(!PSH.Glut.isOldIOS()){if(h?h.resize(n,r):(h=SQR.FrameBuffer(n,r,!1,{wrap:SQR.gl.REPEAT,filter:SQR.gl.LINEAR,mipmap:!0}),f=new SQR.Primitives.createPostEffect),!N[o]){var u=[{name:o.toUpperCase()}],c="NVIDIA"==A.meta.tag("Make");(!c&&T.x<8192&&A.meta.iso<400||c&&T.x<5e3||A.options.flat)&&u.push({name:"_SHARPEN"}),N[o]=SQR.Shader(PSH.GLSL.blit,{directives:u})}var l=3;"RICOH"==A.meta.tag("Make")&&(l=1.33),"SAMSUNG"==A.meta.tag("Make")&&(l=2),"NVIDIA"==A.meta.tag("Make")&&(l=2),f.shader=N[o],f.shader.use().setUniform("uTexture",d).setUniform("uRenderSize",[T.x*l,T.y*l]).setUniform("uFilterIntensity",a),M.pushSize(n,r,1,!1),h.bind(),M.render2d(f),h.unbind(),M.resetSize(),y=o,p=a}}},D.get=function(){return PSH.Glut.isOldIOS()?d:h.texture},D.baseSize=function(){return T},D.getMaxTextureSize=function(){return SQR.gl.getParameter(SQR.gl.MAX_TEXTURE_SIZE)},D.getMaxFramebufferSize=function(){return SQR.gl.getParameter(SQR.gl.MAX_RENDERBUFFER_SIZE)},D.clear=function(){d&&(d.destroy(),d=null),f&&f.shader.use().setUniform("uTexture",null),h&&(h.bind(),M.clear(),h.unbind()),y=null},D},PSH.Controls=function(s,u,c,l){var r,M=!1,A=0,n=.5*Math.PI,g=new SQR.V2(0),d=new SQR.V2(0,.5),h=new SQR.V2(0,0),f=new SQR.V2(0,0),D=0,N={},y=new SQR.V2,p=new SQR.V2,o=new SQR.V2,a=new SQR.V2,T=SQR.Pointer3d(),w=(new SQR.V3,new SQR.V3(-1,-1,0));N.delta=new SQR.V2,N.zoom=0,N.move=new SQR.V2,N.orientation=new SQR.Quaternion,N.interactionOver=new Trigger,N.down=new Trigger,N.up=new Trigger,N.gazeStart=new Trigger,N.gazeCancel=new Trigger,N.click=new Trigger,N.pointer3d=T,N.hoversCount=0,N.isLocked=function(){return M},N.needsRedraw=!1;var E=function(e,t){if(s.currentPost.options.pitchLimit&&!s.vrMode.value){var i=Math.min(1-s.currentPost.options.pitchLimit,n);return Math.clamp(e,-i,i)}return t?e:Math.clamp(e,-n,n)},L=function(e,t){r||(r=r=u.canvas.ext.rect());var i=e.targetTouches?e.targetTouches[0].pageX:e.pageX,n=e.targetTouches?e.targetTouches[0].pageY:e.pageY;i-=r.left,n-=r.top,t.x=i/r.width,t.y=n/r.height},m=function(e){return r||(r=r=u.canvas.ext.rect()),(e=e.targetTouches?e.targetTouches[0]:e).pageX>r.left&&e.pageX<r.right&&e.pageY>r.top&&e.pageY<r.bottom},I=0,x=0,e=function(e){if(m(e)&&!s.lockedMode.value){x=(new Date).getTime(),I=s.spherical.autoRotate,s.spherical.autoRotate=0,M=!0,L(e,o),a.copyFrom(o),u.canvas.classList.add("grabbing"),w.copyFrom(o),w.x=2*w.x-1,w.y=2*w.y-1,N.mouse=w;var t=s.vrMode.value?f:w,i=l.regularProjection;T.fromMousePosition(l.camera,i,t),N.down.trigger()}},t=function(){N.up.trigger(),M=!1,a.sub(o),u.canvas.classList.remove("grabbing"),N.interactionOver.trigger(a),(new Date).getTime()-x<500&&!s.vrMode.value&&N.click.trigger(),s.spherical.autoRotate=I},i=function(e){if(M&&!s.dragEditMode.value){var t=o.x,i=o.y;L(e,o);var n=1+.5*D;N.delta.x=(o.x-t)*n,N.delta.y=(o.y-i)*n,c.mode==PSH.Kuula.MODE3D&&(g.x-=2*N.delta.x,g.y-=2*N.delta.y,g.y=E(g.y)),c.toggleInstruction&&c.toggleInstruction(0)}L(e,d),w.copyFrom(d),w.x=2*w.x-1,w.y=2*w.y-1},S=function(e){if(!s.lockedMode.value&&!c.editable){var t=PSH.Keyboard.c;switch(e.keyCode){case t("A"):g.x-=.33;break;case t("D"):g.x+=.33;break;case t("W"):g.y-=.33;break;case t("S"):g.y+=.33;break;case t("Q"):case PSH.Keyboard.CURSOR_UP:D+=.1;break;case t("Z"):case PSH.Keyboard.CURSOR_DOWN:D-=.1;break;case PSH.Keyboard.SPACE_KEY:D=0}g.y=E(g.y),c.toggleInstruction&&c.toggleInstruction(0)}},j=function(e){if(L(e.originalEvent,w),w.x=2*w.x-1,w.y=2*w.y-1,N.mouse=w,!s.lockedMode.value&&!s.dragEditMode.value){if(c.scroll&&m(e.originalEvent)&&"wheel"==e.source){var t=s.currentPost.options.flat?.002:-.002;D+=e.deltaY*t}if(((a=Application.route.value.parts[0])==PSH.POST||a==PSH.UPLOAD||a==PSH.EDIT||a==PSH.TINYPLANET||a==PSH.SHARE)&&m(e.originalEvent)&&"touch"==e.source){var i=c.mode==PSH.Kuula.MODE2D?2200:360,n=1+.5*D;if(N.delta.y=e.deltaY/i*n,N.delta.x=e.deltaX/i*n,c.mode!=PSH.Kuula.MODE3D||e.multiTouch||(g.y-=N.delta.y,g.y=E(g.y,!0),g.x-=N.delta.x),e.multiTouch){var r=h.set(e.startX2-e.startX,e.startY2-e.startY).mag(),o=(h.set(e.x2-e.x,e.y2-e.y).mag()-r)*(-1/window.innerHeight);D+=s.currentPost.options.flat?-.25*o:o}c.toggleInstruction&&c.toggleInstruction(0)}var a;D=Math.clamp(D,-1,1)}},v=function(e){s.lockedMode.value||(D=0)},z=function(e){SQR.Gyro.externalProcess(e.data.alpha,e.data.beta,e.data.gamma,e.data.orientation)},O=function(e){y.x=e?0:y.x%SQR.TWOPI,y.y=e?0:y.y%SQR.TWOPI,g.set(0,0),D=N.zoom=s.currentPost.options.zoom,e&&(l.refreshHeading(),A=0)};return N.resize=function(e,t){e,t,r=null},N.update=function(){var e=.1*(g.x-y.x),t=.1*(g.y-y.y),i=.06*(d.x-p.x),n=.06*(d.y-p.y);y.x+=e,y.y+=t,p.x+=i,p.y+=n,c.ambient&&!c.editable&&0==s.spherical.autoRotate&&s.currentPost.options.pitchLimit<.8?A+=.01*(.1-A):A*=.98,N.move.x=p.x*A+y.x,N.move.y=p.y*A+y.y,N.orientation.fromAngleAxis(N.move.y,1,0,0),c.scroll||(D+=s.currentPost.options.zoom-D);var r=.12*(D-N.zoom);N.zoom+=r,c.gyro&&N.orientation.mul(SQR.Gyro.getOrientation(c.externalGyro)),N.delta.mul(.5),M||u.canvas.classList.toggle("pointer",0<N.hoversCount),N.hoversCount=0;var o=s.vrMode.value?f:w,a=s.vrMode.value?l.vrProjectionLandscape:l.regularProjection;T.fromMousePosition(l.camera,a,o)},N.on=function(){N.move.set(0,0),D=N.zoom=s.currentPost.options.zoom,{dx:-1,dy:-1,x:-1,y:-1,z:-1},N.needsRedraw=!0,O(!0),u.canvas.classList.add("grab"),Simplrz.touch?(document.addEventListener("touchstart",e),document.addEventListener("touchend",t)):(document.addEventListener("mousedown",e),document.addEventListener("mouseup",t),document.addEventListener("mousemove",i),document.addEventListener("keydown",S)),c.externalGyro&&window.addEventListener("message",z),u.canvas.ext.on("doubleclick",v),VirtualScroll.on(j),s.spherical.resetHeading.on(O)},N.off=function(){u.canvas.classList.remove("grab"),document.removeEventListener("touchstart",e),document.removeEventListener("touchend",t),document.removeEventListener("mousedown",e),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",i),document.removeEventListener("keydown",S),c.externalGyro&&window.removeEventListener("message",z),u.canvas.ext.off("doubleclick",v),VirtualScroll.off(j),s.spherical.resetHeading.off(O),g.set(0,0),y.set(0,0),d.set(0,0),p.set(0,0)},N.setY=function(e){g.y=e||0},N.rect=function(){return r},N.onOptionsChanged=function(e){e&&-1<e.indexOf("zoom")&&(D=s.currentPost.options.zoom),e&&-1<e.indexOf("pitchLimit")&&(g.y=E(g.y))},N},PSH.GLSL={blit:"//#name blit\n//#vertex\nprecision mediump float;\nattribute vec2 aPosition;\nattribute vec2 aUV;\nvarying vec2 vUV;\nvoid main(void) {\ngl_Position = vec4(aPosition, 0.0, 1.0);\nvUV = aUV; \n}\n//#fragment\nprecision mediump float;\nvarying vec2 vUV;\nuniform sampler2D uTexture;\nuniform float uFilterIntensity;\n#ifdef SHARPEN\nuniform vec2 uRenderSize;\n#endif\n//#include standardLight\n//#include functions\n//#include filters\nvoid main(void) {\n#ifdef SHARPEN\nvec3 c = sharpen(uTexture, vUV, uRenderSize).rgb;\n#else\nvec3 c = texture2D(uTexture, vUV).rgb;\n#endif\nvec2 center = (vUV - vec2(0.5)) * 2.0;\nc = applyFilter(c, center, uFilterIntensity);\ngl_FragColor = vec4(c, 1.0);\n}\n",equirect:"//#name equirect\n//#vertex\nattribute vec3 aNormal;\nattribute vec3 aPosition;\nattribute vec2 aUV;\nuniform mat4 uMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nuniform mat3 uNormalMatrix;\nuniform mat3 uNormalViewMatrix;\nuniform vec3 uEyePosition;\n#ifdef PLANAR\nvarying vec3 vNormal;\n#else\n//#include functions\nvarying vec2 vUV;\n#endif\nconst vec3 forward = vec3(0.0, 0.0, -1.0);\nvoid main() {\n#ifdef PLANAR\nvNormal = aPosition;\n#else\nvUV.x = 1.0 - aUV.x;\nvUV.y = aUV.y;\n#endif\nvec4 position = uViewMatrix * vec4(aPosition, 1.0);\ngl_Position = uProjection * position;\n}\n//#fragment\nprecision highp float;\nuniform sampler2D uTexture;\nuniform float uGlare;\nuniform float uSunIntensity;\nuniform float uOpacity;\n#ifdef PANO\nuniform vec4 uTextureParams;\n#endif\n#ifdef PLANAR\n//#include functions\nvarying vec3 vNormal;\n#else\nvarying vec2 vUV;\n#endif\nvoid main() {\n#ifdef PLANAR\nvec3 n = normalize(vNormal);\nvec2 uv = vec2(0, 0);\nuv.x = (atan(n.z, n.x) / PI2) + 0.5;\nuv.y = acos(n.y) / -PI;\n#else\nvec2 uv = vUV;\n#endif\n#ifdef PANO\nuv.x = fract(uv.x);\nuv.y = fract(uv.y);\nuv = uv * uTextureParams.xy + uTextureParams.zw;\nvec3 c;\nif(uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {\nc = vec3(0.0, 0.0, 0.0);\n} else {\nc = texture2D(uTexture, uv).rgb;\nif(uTextureParams.x > 1.0) c *= smoothstep(0.0, 0.01, uv.x);\nif(uTextureParams.x > 1.0) c *= smoothstep(1.0, 0.99, uv.x);\nif(uTextureParams.y > 1.0) c *= smoothstep(1.0, 0.99, uv.y);\nif(uTextureParams.y > 1.0 && uTextureParams.w < -0.01) c *= smoothstep(0.0, 0.01, uv.y);\n}\n#else\nvec3 c = texture2D(uTexture, uv).rgb;\n#endif\nc = c * uSunIntensity + vec3(uGlare);\ngl_FragColor = vec4(c * uOpacity, 1.0);\n}\n",filters:"//#name filters\nvec3 applyFilter(vec3 o, vec2 center, float i) {\nvec3 c = o;\n#ifdef XPROCESS\nc.r = smoothstep(-0.05, 1.05, c.r) * 0.97;\nc.g += sin(c.g * 6.28) * 0.02;\nc.b = mix(0.1, 0.9, c.b);\n#endif\n#ifdef GREYSCALE\nc = vec3(brightness(c));\nc = pow(c, vec3(1.05));\nc.g *= 1.03;\nc.b *= 1.01;\n#endif\n#ifdef BLOOM\nc = saturation(c, 1.7);\nc.r *= 1.20;\nc.g *= 1.10;\n#endif\n#ifdef COOLER\nvec3 g = vec3(brightness(c));\nc = mix(g, c, 0.7);\nc += sin(c * 6.28) * 0.025;\nc.r *= 0.90;\nc.g *= 0.95;\nc.b *= 1.0;\n#endif\n#ifdef VINTAGE\nfloat g = brightness(c);\nc = mix(c, vec3(g), 0.5);\nc.r *= 1.12;\nc.g *= 1.06;\nc.b *= 0.94;\n#endif\nreturn mix(o, c, i);\n}\n",flat:"//#name flat\n//#vertex\nattribute vec3 aPosition;\nattribute vec2 aUV;\nuniform mat4 uMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nvarying vec2 vUV;\nvoid main(void) {\nvUV = aUV;\ngl_Position = uProjection * uViewMatrix * vec4(aPosition, 1.0);\n}\n//#fragment\nprecision mediump float;\nuniform sampler2D uTexture;\nvarying vec2 vUV;\nvoid main(void) {\n    vec2 uv = vUV;\n    uv.x = 1.0 - uv.x;\nuv = vec2(0.001, 0.001) + uv * 0.998; \nvec4 c = texture2D(uTexture, uv);\ngl_FragColor = vec4(c.rgb, c.a);\n}\n",functions:"//#name functions\n#define PR 0.299\n#define PG 0.587\n#define PB 0.114\n#define PI 3.141592653589793\n#define PI2 6.28318530718\n#define SQ2 1.41421356237\nvec3 saturation(vec3 c, float a) {\nfloat p = sqrt(c.r * c.r * PR + c.g * c.g * PG + c.b * c.b * PB);\nc.r = p + (c.r - p) * a;\nc.g = p + (c.g - p) * a;\nc.b = p + (c.b - p) * a;\nreturn c;\n} \nfloat bezier(float t, float p0, float c0, float c1, float p1) {\nreturn p0 * (1.0 - t) * (1.0 - t) * (1.0 - t) + c0 * 3.0 * t * (1.0 - t) * (1.0 - t) + c1 * 3.0 * t * t * (1.0 - t) + p1 * t * t * t;\n}\nvec4 sharpen(in sampler2D tex, in vec2 coords, in vec2 renderSize) {\nfloat dx = 1.0 / renderSize.x;\nfloat dy = 1.0 / renderSize.y;\nvec4 sum = vec4(0.0);\nsum += -1. * texture2D(tex, coords + vec2( -1.0 * dx ,  0.0 * dy));\nsum += -1. * texture2D(tex, coords + vec2(  0.0 * dx , -1.0 * dy));\nsum +=  5. * texture2D(tex, coords + vec2(  0.0 * dx ,  0.0 * dy));\nsum += -1. * texture2D(tex, coords + vec2(  0.0 * dx ,  1.0 * dy));\nsum += -1. * texture2D(tex, coords + vec2(  1.0 * dx ,  0.0 * dy));\nreturn sum;\n}\n",image:"//#name image\n//#vertex\nattribute vec3 aPosition;\nattribute vec2 aUV;\nuniform mat4 uMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nvarying vec2 vUV;\nvoid main(void) {\nvUV = aUV;\ngl_Position = uProjection * uViewMatrix * vec4(aPosition, 1.0);\n}\n//#fragment\nprecision mediump float;\nuniform sampler2D uTexture;\nuniform vec4 uTextureParams;\nuniform float uOpacity;\nuniform bool uEditMode;\nvarying vec2 vUV;\nvoid main(void) {\n    vec2 uv = vUV * uTextureParams.xy + uTextureParams.zw;\n    uv.x = 1.0 - uv.x;\nvec4 c;\nfloat op = uOpacity;\nif(op == 0.0 && uEditMode) {\nc = vec4(0.0, 0.33, 0.33, 0.33);\n} else {\nc = texture2D(uTexture, uv) * op;\n}\ngl_FragColor = c;\n}\n",lensflare:"//#name lensflare\n//#vertex\nattribute float aDistance;\nattribute float aSize;\nuniform vec3 uSunScreenPos;\nvarying float vRot;\nvoid main() {\nvec2 d = uSunScreenPos.xy;\nd *= 2.0;\nd -= vec2(1.0);\nd = -d;\ngl_Position = vec4(-d + d * aDistance, -0.8 - aDistance * 0.1, 1.0);\ngl_PointSize = aSize;\nvRot = atan(d.x, d.y);\n}\n//#fragment\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D uFlareTexture;\nuniform float uAlpha;\nvarying float vRot;\nvoid main() {\nvec2 pc = gl_PointCoord;\nfloat cs = cos(-vRot);\nfloat ss = sin(-vRot);\npc -= vec2(0.5);\nvec2 pcp;\npcp.x = pc.x * cs - pc.y * ss;\npcp.y = pc.x * ss + pc.y * cs;\npcp += vec2(0.5);\nfloat ca = 0.018;\nvec4 flc = texture2D(uFlareTexture, pcp + vec2( ca, -ca));\nfloat ar = flc.r;\nfloat ag = texture2D(uFlareTexture, pcp + vec2(-ca,  ca)).r;\nfloat ab = texture2D(uFlareTexture, pcp + vec2( ca,  ca)).r;\ngl_FragColor = vec4(flc.r * ar, flc.g * ag, flc.b * ab, uAlpha * 0.5);\n}\n",line:"//#name line\n//#vertex\nattribute vec3 aPosition;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nvoid main() {\ngl_Position = uProjection * uViewMatrix * vec4(aPosition, 1.0);\n}\n//#fragment\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvoid main() {\ngl_FragColor = uColor;\n}\n",pass:"//#name pass\n//#vertex\nprecision mediump float;\nattribute vec2 aPosition;\nattribute vec2 aUV;\nvarying vec2 vUV;\nvoid main(void) {\ngl_Position = vec4(aPosition, 0.0, 1.0);\nvUV = aUV; \n}\n//#fragment\nprecision mediump float;\nvarying vec2 vUV;\nuniform sampler2D uTexture;\n//#include standardLight\n//#include functions\n//#include filters\nvoid main(void) {\nvec3 c = texture2D(uTexture, vUV).rgb;\ngl_FragColor = vec4(c, 1.0);\n}\n",reflection:"//#name reflection\n//#vertex\nattribute vec3 aNormal;\nattribute vec3 aPosition;\nattribute vec2 aUV;\nuniform mat4 uMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nuniform mat3 uNormalMatrix;\nuniform vec3 uEyePosition;\nvarying vec3 vRefVec;\nvarying vec3 vRetVec;\nvarying float vRefFac;\nvarying vec2 vUV;\n//#include functions\nvoid main() {\nvec4 mPosition = uMatrix * vec4(aPosition, 1.0);\nvec3 normal = normalize(uNormalMatrix * aNormal);\nvec3 incident = normalize(mPosition.xyz - uEyePosition);\nvRefVec = reflect(incident, normal);\nvRetVec = refract(incident, normal, 0.2);\nvRefFac = 1.0 * pow(1.0 + dot(incident, normal), 2.0);\nvUV = aUV;\nvec4 mvPosition = uViewMatrix * vec4(aPosition, 1.0);\ngl_Position = uProjection * mvPosition;\n}\n//#fragment\nprecision mediump float;\nconst vec4 BLACK = vec4(0.0, 0.0, 0.1, 1.0);\nuniform sampler2D uTexture;\nuniform float uTextureAspect;\nuniform float uGlare;\nuniform float uSunIntensity;\nuniform vec2 uScreenSize;\nvarying vec3 vRefVec;\nvarying vec3 vRetVec;\nvarying float vRefFac;\nvarying vec2 vUV;\n//#include standardLight\n//#include functions\n//#include filters\nvoid main() {\nvec3 n = normalize(vRefVec);\nvec2 uv = vec2(0, 0);\nuv.x = (atan(n.z, n.x) / PI + 1.0) * 0.5;\nuv.y = 1.0 - asin(n.y) / PI + 0.5;\nvec3 c = texture2D(uTexture, uv).rgb * 0.3;\ngl_FragColor = vec4(c, vRefFac);\n}\n",sprite:"//#name sprite\n//#vertex\nattribute vec3 aPosition;\nuniform mat4 uMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjection;\nuniform mat3 uNormalMatrix;\nuniform float uSize;\nvoid main() {\ngl_Position = uProjection * uViewMatrix * vec4(aPosition, 1.0);\ngl_PointSize = uSize;\n}\n//#fragment\nprecision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uTextureParams;\nuniform float uAspect;\nvoid main() {\nvec2 t = gl_PointCoord * uTextureParams.xy + uTextureParams.zw;\nt.y = 1.0 - t.y;\nif(t.y >= 0.0 && t.y <= 1.0) {\nvec4 tc = texture2D(uTexture, t);\ngl_FragColor = vec4(tc.rgb, tc.a);\n} else {\ndiscard;\n}\n}\n",stereographic:"//#name stereographic\n//#vertex\nattribute vec2 aPosition;\nattribute vec2 aUV;\nvarying vec2 vUV;\nvoid main() {\nvUV = aUV;\ngl_Position = vec4(aPosition, 0.0, 1.0);\n}\n//#fragment\n#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec2 vUV;\nuniform sampler2D uTexture;\nuniform float uAspect;\nuniform float uTime;\nuniform float uHeading;\nuniform vec2 uOffset;\nuniform float uScale;\nuniform float uBulge;\nuniform bool uInvert;\n//#include standardLight\n//#include functions\n//#include filters\nuniform mat4 uTransform;\nvoid main() {\nvec2 rads = vec2(PI * 2.0, PI);\nfloat scale = uScale * 2.0;\nvec2 pnt = vUV + uOffset;\npnt = (pnt - 0.5) * vec2(scale * uAspect, scale);\nfloat x2y2 = pnt.x * pnt.x + pnt.y * pnt.y;\nvec4 sphere_pnt = vec4(2.0 * pnt, x2y2 - 1.0, 0.0) / (x2y2 + 1.0);\nsphere_pnt *= uTransform;\nfloat r = length(sphere_pnt);\nfloat lon = atan(sphere_pnt.y, sphere_pnt.x);\nfloat lat = acos(sphere_pnt.z / r);\nvec2 pUV = vec2(lon, lat) / rads;\npUV.y = clamp(abs(pUV.y), 0.0, 1.0);\npUV.x += uHeading;\nvec3 c = texture2D(uTexture, pUV).rgb;\nvec2 center = (vUV - vec2(0.5)) * 2.0;\ngl_FragColor = vec4(c, 1.0);\n}\n"},PSH.Kuula=function(n,e,t){var r,o,a={},s=!1,u=!1,c=0,l=0;a.name=t&&t.name?t.name:"kuula"+Math.round(100*Math.random()),a.progress=new Trigger,a.error=new Trigger,a.ready=new Trigger,a.firstRender=new Trigger,a.refresh=new Trigger,a.options={mode:PSH.Kuula.MODE3D,zoom:!0,gyro:!0,ambient:!0,editable:!1,scroll:!0,maxSize:-1,curtain:0,toggleInstruction:function(e){var t=EXT.select(".interact-inst");t&&(t.ext.show(),t.style.opacity=0,setTimeout(function(){t.ext.transition({opacity:e},200,"ease-out",1==e?2e3:0)},1))}};var M=PSH.KuulaRenderer(n),A=PSH.BaseImage(M),g=PSH.Scene2D(n,a),d=PSH.Scene3D(n,a),h=PSH.Controls(n,M,a.options,d);M.setScenes(g,d);var i=!(a.load=function(e,t){if(t=t||0,r!=e||o!=t){s&&r.photo.clear(),(new Date).getTime(),M.use(),s=!0,r=e,o=t;var i=A.getMaxTextureSize();0<a.options.maxSize&&a.options.maxSize<i&&(i=a.options.maxSize),r.photo.getImage(i,D,a.progress.trigger,a.error.trigger)}}),f=function(){i?(n.vrMode.value?FrameImpulse.setProvider(PSH.Webvr.display,FrameImpulse.VR):FrameImpulse.setProvider(window),FrameImpulse.on(N)):FrameImpulse.off(N)};PSH.Webvr.present.on(function(e){f()}),n.vrMode.on(function(e,t){e?PSH.Webvr.requestPresent([{source:M.canvas}]):PSH.Webvr.isPresenting&&PSH.Webvr.exitPresent(),a.options.toggleInstruction(0)});var D=function(e){(new Date).getTime();M.use(),A.onImage(e),g.prepare(r,h),d.prepare(r,h),a.setOptions(),g.setImage(A.get()),d.setImage(A.get(),A.baseSize()),g.updateValues(),a.options.editable||r.options.flat||a.options.toggleInstruction(1),h.on(),p.on(),a.ready.trigger(e),n.optionsChanged&&n.optionsChanged.on(a.setOptions),u=!1,t&&t.manualRender?setTimeout(N,0):(i=!0,f()),s=!1};a.setEyeLevel=function(e){h.setY(e)},a.attach=function(){e.appendChild(M.canvas)},a.pause=function(){i=!1,f()},a.setCurtain=function(e){l=e?1:0,e||(c=1),e&&d.clear()},a.resume=function(){i=!0,f()},a.use=function(){M.use()},a.setOptions=function(e){M.use(),A.apply(r),h.onOptionsChanged(e)};var N=function(e,t){n.lockedMode.value||y(e,t)},y=function(e,t){if(M.use(),h.update(),c+=(l-c)*(1==l?1:.04),a.options.curtain=c,h.needsRedraw){switch(a.options.mode){case PSH.Kuula.MODE2D:M.render2d(g.root(),t);break;case PSH.Kuula.MODE3D:var i=n.vrMode.value;i&&PSH.Webvr.readFrame(),M.render3d(d,e),i&&PSH.Webvr.submitFrame()}u||(u=!0,a.firstRender.trigger())}},p=PSH.Snapshot(n,a,M,N,d,A);return a.resize=function(e,t){h.resize(e,t),M.use().resize(e,t),n.lockedMode.value&&y()},a.canvas=function(){return M.canvas},a.unload=function(){r&&(r.photo.clear(),M.use(),A.clear(),d.clear(),g.clear(),M.clear(),p.off(),i=!1,f(),h.off(),r=null,s=!(o=-1),n.optionsChanged&&n.optionsChanged.off(a.setOptions))},window.addEventListener("unload",function(){M.destroy()}),a},PSH.Kuula.MODE3D="m3d",PSH.Kuula.MODE2D="m2d",PSH.KuulaRenderer=function(u){var n,r,o,a,e=!Simplrz.iPad,c=function(){return PSH.Webvr.isPresenting&&PSH.Webvr.isPolyfilled?window.devicePixelRatio:e&&!PSH.Webvr.isPresenting?window.devicePixelRatio:1},l=new SQR.Renderer(null,{antialias:!1,alpha:!1,preserveDrawingBuffer:!1});EXT.extend(l.context.canvas);var s=function(e,t){var i=c();l.context.size(e,t,i),a.resize(e,t),o.resize(e,t);var n=l.context.canvas;u.vrMode.value?(n.style.width="100%",n.style.height="100%"):(n.style.width=e+"px",n.style.height=t+"px")};PSH.LOCAL||u.user&&u.user.isAdmin()||l.context.canvas.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var t={get canvas(){return l.context.canvas},get res(){return c()},use:function(){return l.context.setAsCurrent(),t},setScenes:function(e,t){o=e,a=t},resize:function(e,t,i){s(n=e,r=t,i||c())},pushSize:function(e,t,i,n){var r=l.context.canvas;n?(r.width=e*i,r.height=t*i,l.context.viewport(0,0,e*i,t*i),Simplrz.iOS?r.ext.transform({scaleX:1/i,scaleY:1/i}):(r.style.width=e+"px",r.style.height=t+"px")):l.context.viewport(0,0,e*i,t*i)},resetSize:function(){s(n,r,c())},render2d:function(e,t){t&&o.resize(t,t),l.render(e)},render3d:function(e,t){var i=e.root,n=e.camera;if(u.vrMode.value){var r=c(),o=PSH.Webvr.renderWidth,a=PSH.Webvr.renderHeight,s=a<o;n.projection=s?e.vrProjectionLandscape:e.vrProjectionPortrait,l.autoClear=!0,s?l.context.viewport(0,0,o/2*r,a*r):l.context.viewport(0,0,o*r,a/2*r),l.render(i,n),l.autoClear=!1,s?l.context.viewport(o/2*r,0,o/2*r,a*r):l.context.viewport(0,a/2*r,o*r,a/2*r),l.render(i,n),l.autoClear=!0}else l.autoClear=!0,n.projection=t||e.regularProjection,l.render(i,n)},clear:function(){l.autoClear=!0,l.context.clear()},destroy:function(){l.context.destroy()},setClearColor:function(e,t,i){l.clearColor(e,t,i,1)}};return t},PSH.Scene2D=function(e,t){var s,u,c=new SQR.Primitives.createPostEffect;c.shader=SQR.Shader(PSH.GLSL.stereographic);var l=t.options,M={rot:0,scale:0,bulge:0,invert:0,offset:new SQR.V2},A={rot:0,invert:0,scale:0},g=new SQR.Matrix44;c.beforeDraw=function(){if(s){var e=.6+-.4*u.zoom;Simplrz.touch||(e*=.5);var t=Simplrz.touch?-.2:.1;l.editable?(A.rot=0,A.invert=0,A.scale=0):(A.rot+=u.delta.x*-e,A.invert+=u.delta.y*e,A.scale=u.zoom*t,A.rot=A.rot%1,A.invert=A.invert%1,A.scale=Math.clamp(A.scale,-.2,.025)),M.invert+=.1*(s.options.tinyInvert-M.invert)+A.invert,M.rot+=.1*(s.options.tinyRot-M.rot)+A.rot,M.scale+=.1*(s.options.tinyScale-M.scale)+A.scale,M.bulge+=.1*(s.options.tinyBulge-M.bulge),l.editable&&(Math.abs(u.delta.x)>SQR.EPSILON||Math.abs(u.delta.y)>SQR.EPSILON)&&(M.offset.x-=u.delta.x,M.offset.y+=u.delta.y,s.options.tinyOffsetX=M.offset.x,s.options.tinyOffsetY=M.offset.y);var i=.5+.5*M.invert,n=M.rot-.25,r=.25+6*(1-M.scale),o=.5+1*M.bulge,a=(new SQR.Quaternion).fromAngleAxis(i*SQR.TWOPI,1,0,0);g.identity().setTQS(0,0,0,a.w,a.x,a.y,a.z,o,o,1),c.shader.use().setUniform("uScale",r).setUniform("uOffset",M.offset).setUniform("uHeading",n).setUniform("uTransform",g)}};var i={updateValues:function(e){M.invert=s.options.tinyInvert,M.rot=s.options.tinyRot,M.scale=s.options.tinyScale,M.bulge=s.options.tinyBulge},resize:function(e,t){c.shader.use().setUniform("uAspect",e/t)},prepare:function(e,t){s=e,u=t,M.offset.set(s.options.tinyOffsetX,s.options.tinyOffsetY)},setImage:function(e){c.shader.use().setUniform("uTexture",e)},root:function(){return c}};return i.clear=function(){A.rot=0,A.invert=0,A.scale=0},i.start=function(){M={rot:0,scale:0,bulge:0,invert:0,offset:new SQR.V2}},i},PSH.Scene3D=function(M,A){var g,d,s,u,c,i,n,e={},h=!1,f=!1,D=(Simplrz.touch,Simplrz.touch,80),N=(Simplrz.touch,40),l=PSH.DEV?0:78625,y=new SQR.V2,p=0,T=0,w=0;vrFov=90;var E,L=new SQR.ProjectionMatrix,r=new SQR.ProjectionMatrix,o=new SQR.ProjectionMatrix,a=SQR.Transform(),m=SQR.Transform(),I=SQR.Transform(),x=SQR.Transform(),t=SQR.Transform();I.useQuaternion=!0;var S=!("iPhone"==navigator.platform&&320==window.innerWidth),j=new SQR.Transform;if(j.uniforms={},S){i=SQR.Primitives.createCube(400,400,400,{flip:!0,smooth:!1}),s=SQR.Shader(PSH.GLSL.equirect,{directives:[{name:"PLANAR"}]}),u=SQR.Shader(PSH.GLSL.equirect,{directives:[{name:"PLANAR"},{name:"PANO"}]})}else{i=SQR.Primitives.createSphere(100,64,32,{flip:!0,smooth:!0}),s=SQR.Shader(PSH.GLSL.equirect),u=SQR.Shader(PSH.GLSL.equirect,{directives:[{name:"PANO"}]})}c=SQR.Shader(PSH.GLSL.flat),n=SQR.Primitives.createPlane(1,1,1,1,0,0,{zUp:!0,flip:!0});var v=function(e){O.setEnabled(A.options.mode==PSH.Kuula.MODE3D)},z=PSH.Sun(M,x,j,a,A),O=PSH.AddonManager(M,x,t,A);return a.add(t),I.add(x),m.add(I),a.add(m),x.beforeDraw=function(){var e;if(g&&g.options.sun&&z.update(),j.uniforms.uOpacity=1-A.options.curtain,A.options.gyro&&Simplrz.touch||(w+=.15*(M.spherical.autoRotate-w),T+=.003*w),g.options.flat&&!M.vrMode.value){m.rotation.y=p,I.quaternion.identity();var t,i=d.zoom;if(A.options.editable)i=f?1:i,m.position.z=0,m.position.y=0,y.set();else{var n=d.rect();if(n){y.x-=d.delta.x*n.width,y.y+=d.delta.y*n.height;var r=Math.max(0,i);Simplrz.touch&&(r*=.2),m.position.z=y.x*r,m.position.y=y.y*r,i<=0&&y.mul(.9)}}if(g.options.isRotated()?(t=j.scale.y/E,zoomOut=j.scale.x):(t=j.scale.x/E,zoomOut=j.scale.y),t<zoomOut){var o=zoomOut;zoomOut=t,t=o}if(0<i){var a=g.options.originalSize.width/(window.innerWidth-PSH.Responsive.getSidebarWidth()),s=g.options.originalSize.height/(window.innerHeight-PSH.Responsive.getMobilePostHeight()),u=1/Math.min(a,s);u<1&&(zoomOut*=u)}Math.abs(t-zoomOut)<1&&!f&&(zoomOut-=200);var c=t+(zoomOut-t)*i;e=PSH.MathUtil.getFovAtDistance(c,650)}else if(!h){if(m.rotation.y=p+T+d.move.x,M.vrMode.value)Simplrz.iOS?I.quaternion.copyFrom(d.orientation):I.quaternion.copyFrom(PSH.Webvr.orientation);else{var l=I.quaternion;l.slerp(l,d.orientation,.6)}m.position.z=0,m.position.y=0,y.set(),e=D+N*d.zoom,e=Math.clamp(e,10,170)}M.spherical.fov=e,M.spherical.heading=d.move.x,L.perspective(e,E,1,2e3),M.lookDirection&&M.lookDirection.copyFrom(x.forward).neg()},e.resize=function(e,t){E=e/t,L.perspective(D,1*E,1,2e3),r.perspective(vrFov,.5*E,1,2e3),o.perspective(vrFov,2*E,1,2e3)},e.prepare=function(e,t){p=(g=e).options.heading,T=0,d=t,g.options.flat?(j.buffer=n,j.position.set(650,0,0)):(j.buffer=i,j.position.set(0,0,0)),j.uniforms.uGlare=0,j.uniforms.uSunIntensity=1,z.on(g),O.on(g,d),M.kuulaModeChange&&M.kuulaModeChange.on(v),A.refresh&&A.refresh.on(v),setTimeout(function(){a.add(j)},0)},e.setImage=function(e,t){if(j.uniforms.uTexture=e,g.options.flat){var i=g.options.originalSize;j.scale.set(800,800/i.width*i.height,1),j.shader=c,j.useQuaternion=!1,j.rotation.x=g.options.orientation,j.rotation.y=-.5*Math.PI,y.set(),m.position.z=0,m.position.y=0}else{j.scale.set(1,1,1),j.useQuaternion=!0;var n=!!(PSH.DEV||g.n>l||g.isUpload)&&g.getCrop(),r=(i=g.options.originalSize)?i.width:t.x,o=i?i.height:t.y;if(!n&&2*o<r){var a=.5*r/o;n=[1,a,0,-.5*(a-1)]}n?(j.shader=u,j.uniforms.uTextureParams=n):j.shader=s}},e.onOptionsChanged=function(){},e.root=a,e.camera=x,e.regularProjection=L,e.vrProjectionLandscape=r,e.vrProjectionPortrait=o,e.lockHeading=function(e){h=e},e.lockZoom=function(e){if(f=e){var t=Math.min(j.scale.x/E,j.scale.y);M.spherical.fov=PSH.MathUtil.getFovAtDistance(t,650)}},e.refreshHeading=function(){p=g.options.heading},e.getFov=function(){return M.spherical.fov},e.toggleGizmos=function(e){O.toggleEditorGizmos(e)},e.clear=function(){a.remove(j),z.off(),O.off(),M.kuulaModeChange&&M.kuulaModeChange.off(v),A.refresh&&A.refresh.off(v)},e},PSH.Snapshot=function(e,s,u,c,l,M){var A,g=new SQR.ProjectionMatrix,t=function(a){requestAnimationFrame(function(){var n=s.options.mode,r=Array.isArray(a.size)?a.size:[a.size],o=[];a.filtered||M.apply(null,!0),l.toggleGizmos(!1),s.options.mode=a.mode||PSH.Kuula.MODE3D,l.lockHeading(!0),l.lockZoom(e.currentPost.options.flat),setTimeout(function(){for(var e=0;e<r.length;e++){A=r[e],u.pushSize(A.width||A,A.height||A,1,!0);var t=A.width?A.width/A.height:1;g.perspective(l.getFov(),t,1,2e3),c(g,t);var i=PSH.WebGLExtract(u.canvas,SQR.gl,"image/jpeg",.71,a.flip);o.push(i)}a.filtered||M.apply(null),u.resetSize(),s.options.mode=n,l.lockHeading(!1),l.lockZoom(!1),setTimeout(function(){l.toggleGizmos(!0)},1),a.callback(1<o.length?o:o[0])},0)})};return{on:function(){e.snapshot&&e.snapshot.on(t)},off:function(){e.snapshot&&e.snapshot.off(t)}}},PSH.Sun=function(t,a,s,e,i){var u,r=["pentagon-legacy","pentagon","octagon","round","noise"],c=0,l=0,M=0,A=0,g=new SQR.V3,d=new SQR.Transform;d.shader=SQR.Shader(PSH.GLSL.lensflare),d.buffer=SQR.Buffer().layout({aDistance:1,aSize:1},5).data("aDistance",.55,.76,1.08,1.24,1.46).data("aSize",100,140,200,60,260).update().setMode(SQR.gl.POINTS),d.uniforms={uAlpha:0,uFlareTexture:SQR.Texture(null,{wrap:SQR.gl.CLAMP_TO_EDGE})},d.setBlending(!0,SQR.gl.SRC_ALPHA,SQR.gl.ONE);var n=function(e){if(u.options.sun&&u.options.lensflare&&0!=u.options.lensflare){var t=u.options.lensflare;!0===t&&(u.options.lensflare=1);var i=r[t-1],n=PSH?PSH.CDNPATH:"";SQR.Loader.loadAssets([[n+"assets/lensflare/"+i+".jpg","lst"]],function(e){d.uniforms.uFlareTexture.setSource(e.lst),u&&u.options.lensflare?a.add(d):a.remove(d)})}else a.remove(d)};return{on:function(e){u=e,n(),t.optionsChanged&&t.optionsChanged.on(n)},off:function(){u=null,a.remove(d),t.optionsChanged&&t.optionsChanged.off(n)},update:function(){if(u){var e=g.copyFrom(a.forward).norm().neg(),t=SQR.V3.dot(e,u.options.sun);t=Math.max(t,0);var i=g;i.set().copyFrom(u.options.sun).mul(20),s.viewMatrix.transformVector(i),a.viewMatrix.transformVector(i),a.projection.transformVector(i),i.toScreenSpace(1,1),i.y=1-i.y,d.uniforms.uSunScreenPos=i;var n=t<=0||1.1<i.x||i.x<-.1||1.1<i.y||i.y<-.1;c+=((l=n?0:1)-c)*(0==l?.2:.1),d.uniforms.uAlpha=c;var r=u.options.glare,o=u.options.sunIntensity;M+=((A=t*r)-M)*(A<M?.1:.01),s.uniforms.uGlare=M,s.uniforms.uSunIntensity=1+t*o*.5}}}},PSH.VRPointer=function(a,s,e,u){var c,l,t=!1,M={value:0};return{on:function(e){t||(!function(e){(l=new SQR.Transform).buffer=u.quad(),l.useDepth=!1,l.setBlending(!0,SQR.gl.ONE),l.uniforms={uTextureParams:u.SINGLE_TEXTURE,uTexture:SQR.Texture(null,{premultiplyAlpha:!0,mipmap:!1})},l.shader=u.imageShader(),l.scale.set(24,24,1),l.position.set(0,0,-200),l.lookAt=s;var t=EXT.create("canvas");t.width=64,t.height=64;var i=t.getContext("2d");l.uniforms.uTexture.setSource(t);var n=!1,r=function(){c&&c.stop(),n=!1};PSH.Webvr.up.on(function(e){!n||0!=e&&1!=e||o()});var o=function(){r(),M.value=0,setTimeout(function(){e.click.trigger()},1)};e.gazeStart.on(function(){r(),n=!0,c=new TWEEN.Tween(M).to({value:1},2500).easing(TWEEN.Easing.Quadratic.Out).onComplete(o).start()}),e.gazeCancel.on(function(){r(),c=new TWEEN.Tween(M).to({value:0},300).easing(TWEEN.Easing.Quadratic.In).start()}),a.vrMode.on(function(e){e?s.add(l):s.remove(l)}),l.beforeDraw=function(){i.clearRect(0,0,64,64),i.fillStyle="#4092b4",i.fillRect(30,20,4,24),i.fillRect(20,30,24,4),i.strokeStyle="#4092b4",i.lineWidth=4,i.beginPath(),i.arc(32,32,30,0,SQR.TWOPI*M.value),i.stroke(),l.uniforms.uTexture.setSource(t).update()}}(e),t=!0),a.vrMode.value&&s.add(l)},off:function(){s.remove(l)}}},PSH.Webvr=function(){var t,i,n,r=!1,o=!1,e=new SQR.Quaternion,s=[],a=new Trigger,u=new Trigger,c=new Trigger,l=new Trigger;if(WebVRPolyfill)new WebVRPolyfill({DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",ROTATE_INSTRUCTIONS_DISABLED:!0,CARDBOARD_UI_DISABLED:Simplrz.iOS});var M=null;"VRFrameData"in window&&(M=new VRFrameData);var A=function(e){l.trigger(e)};if(navigator.getVRDisplays&&!Simplrz.iPad)navigator.getVRDisplays().then(function(e){r=0<e.length,console.log("WebVR Wrapper v1.3 / supported:"+r),r&&(t=e[0],window.addEventListener("vrdisplaypresentchange",A),t.isPolyfilled&&(document.addEventListener(Simplrz.touch?"touchstart":"mousedown",function(){t.isPresenting&&u.trigger(0)}),document.addEventListener(Simplrz.touch?"touchend":"mouseup",function(){t.isPresenting&&c.trigger(0)}))),o=!0,a.trigger()});window.PSH.Webvr={get supported(){return r},get isReady(){return o},get isPolyfilled(){return t&&t.isPolyfilled},get renderWidth(){var e=i.renderWidth+n.renderWidth;return t&&t.isPolyfilled?Math.min(window.innerWidth,e):e},get renderHeight(){if(Simplrz.iOS)return window.innerHeight;var e=i.renderHeight;return t&&t.isPolyfilled?Math.min(window.innerHeight,e):e},get isPresenting(){return r&&t&&t.isPresenting},ready:a,present:l,down:u,up:c,get display(){return t},requestPresent:function(e){return i=i||t.getEyeParameters("left"),n=n||t.getEyeParameters("right"),t.requestPresent(e)},exitPresent:function(){t.exitPresent()},get orientation(){return t&&M&&M.pose&&M.pose.orientation&&(e.copyFrom(M.pose.orientation),e.inverse()),e},readFrame:function(){t&&t.getFrameData&&t.getFrameData(M),t&&!t.isPolyfilled&&function(){if(navigator.getGamepads){var e=navigator.getGamepads();if(e&&e.length)for(var t=0;t<e.length;++t){s[t]||(s[t]={buttons:[]});var i=e[t],n=s[t];if(i&&i.buttons)for(var r=0;r<i.buttons.length;r++){n.buttons[r]||(n.buttons[r]={pressed:!1});var o=i.buttons[r],a=n.buttons[r];o.pressed&&!a.pressed&&u.trigger(r),!o.pressed&&a.pressed&&c.trigger(r),a.pressed=o.pressed}}}}()},submitFrame:function(){t&&t.isPresenting&&t.submitFrame()}}},PSH.Addon=function(r,s,n,o,a,u,c,l){var i,M,A,g,d,h,f=!1,D={moved:new Trigger,dropped:new Trigger,get image(){return i},get text(){return M},get line(){return A}},N=!1,y=new SQR.V3,p=new PSH.LatLon,T=[],w=function(e){var t;switch(e.type){case"sticker":case"image":t=PSH.Addons.Billboard(s,o,n,a,u,c),i=i||t;break;case"text":t=PSH.Addons.Text(s,o,n,a,u,c),M=M||t;break;case"line":t=PSH.Addons.Line(s,o,n,a,u,c),A=A||t;break;default:console.log("unknown block type: "+e.type)}return t&&(t.update(d,e),T.push(t)),t},E=function(){if(s.dialogActive.value)return!1;for(var e=!1,t=0,i=T.length;t<i&&(T[t].hitTest&&(e=T[t].hitTest(a.pointer3d)),!e);t++);return e},L=function(){if(u.options.editable&&E()){s.dragEditMode.value=!0,N=!0;var e=a.pointer3d.ray;y.set().add(e.origin,e.direction).norm(),p.fromV3(y);var t=(new PSH.LatLon).fromV3(d.pos.start);p.lat=t.lat-p.lat,p.lon=t.lon-p.lon}},m=function(){var e=E();e&&((d.action||u.options.editable)&&a.hoversCount++,l.hoversCount=1);var t=a.pointer3d.ray;y.set().add(t.origin,t.direction),p.offsetVector(y);for(var i=0,n=T.length;i<n;i++)T[i].hover&&T[i].hover(e&&(d.action||u.options.editable));u.options.editable&&N&&(d.pos.start.copyFrom(y),d.horizontalOnly&&(d.pos.start.y=0)),u.options.editable&&N&&D.moved.trigger(d.pos.start),s.vrMode.value&&e&&!f&&!u.options.editable&&d.action&&1==d.action.type&&a.gazeStart.trigger(),s.vrMode.value&&!e&&f&&!u.options.editable&&d.action&&1==d.action.type&&a.gazeCancel.trigger(),f=e},I=function(){s.dragEditMode.value=!1,u.options.editable&&N&&D.dropped.trigger(d.pos.start),N=!1},e=function(e,t){var i=null!=e?e:S();T.forEach(function(e){i?e.on():e.off()}),i?(a.down.on(L),a.up.on(I),a.click.on(x),FrameImpulse.on(m)):(a.down.off(L),a.up.off(I),a.click.off(x),FrameImpulse.off(m))},t=function(){e(null)},x=function(){if(d.action&&!u.options.editable&&u.options.mode==PSH.Kuula.MODE3D&&E())switch(d.action.type){case 1:var e=-1<document.location.pathname.indexOf("share/")?"share":"post",t="";if("post"==e&&Application.route.value.parts[2]==PSH.COLLECTION){var i=Application.route.value.parts;t+="/"+i[2]+"/"+i[3]}if("share"==e){var n=document.location.pathname,r=n.indexOf("/collection");-1<r&&(t+=n.substring(r))}Application.navigate.trigger(e+"/"+d.action.post.id+t+document.location.search);break;case 2:s.showAddonCard.trigger({data:d.action.card});break;case 3:var o=d.action.url,a="https://kuula.co/";0==o.indexOf(a)?Application.navigate.trigger(o.replace(a,"")):(o.match(/^https?:\/\//)||(o="http://"+o),window.open(o));break;case 4:h||(h=EXT.create("audio")).setAttribute("autoplay","true"),0<h.duration&&!h.paused?h.pause():0<h.duration?(h.currentTime=0,h.play()):h.src=d.action.sound}},S=function(){var e=s.user&&s.user.canEdit(r)||r.user.isPro(),t=D.is("sticker")||D.is("text"),i=!s.vrMode.value||!d.action||1==d.action.type,n=!D.is("editor")||u.options.editable;return!(!e&&!t||!i||!n)};return D.update=function(e){for(var t in d=e,D.data=e,D.off(),T=[],d.pos){var i=d.pos[t];i.copyFrom||(d.pos[t]=(new SQR.V3).copyFrom(i))}return d.blocks&&d.blocks.forEach(w),g=PSH.Addons.Billboard(s,o,n,a,u,c),s.embeddedPlayer||g.update(d,{type:"image",name:"select-gizmo",size:48,src:"gizmosgl",texParams:[.25,.25,.25,.75]}),D},D.on=function(){return s.vrMode.on(t),D},D.off=function(){return s.vrMode.off(t),e(!1),g&&g.off(),D},D.addBlock=function(e,t){d.blocks.push(e);var i=w(e);!0!==t&&i.on()},D.getPosition=function(e){return d.pos[e||"start"]},D.destroy=function(){D.off(),T=[]},D.hover=function(){return E()},D.setSelected=function(e){e?g.on():g.off()},D.getData=function(){return d},D.is=function(e){return d.tags&&-1<d.tags.indexOf(e)},D},PSH.AddonCommons=function(){var e,t,i,n,r,o={},a={BASE_URL:(PSH.LOCAL?"":PSH.CDNPATH)+"assets/hotspot/",RADIUS:650,SPRITE_SIZE:32,SINGLE_TEXTURE:[1,1,0,0],EASE_DIST:1.25};return a.forwardVector=new SQR.V3(1,0,0),a.imageShader=function(){return e||(e=SQR.Shader(PSH.GLSL.image)),e},a.lineShader=function(){return t||(t=SQR.Shader(PSH.GLSL.line)),t},a.spriteShader=function(){return i||(i=SQR.Shader(PSH.GLSL.sprite)),i},a.quad=function(){return n||(n=SQR.Primitives.createPlane(1,1,1,1,0,0,{zUp:!0,flip:!0})),n},a.point=function(){return r||(r=SQR.Buffer().layout({aPosition:1},3).data("aPosition",0,0,0).update().setMode(SQR.gl.POINTS)),r},a.load=function(e,t){var i=o[e];i?0==i.status?i.callbacks.push(t):t(i.texture):(i={texture:SQR.Texture(null,{premultiplyAlpha:!0,mipmap:!0}),callbacks:[],status:0},o[e]=i,SQR.Loader.loadImage(a.BASE_URL+e+".png",function(e){i.status=1,i.texture.setSource(e),i.callbacks.forEach(function(e){e(i.texture)}),t(i.texture)}))},a},PSH.AddonCommons.iconSheets=[{sheet:"icons",rowSize:8,colSize:8,size:52,order:"2,3,29,28,0,1,4-11,43-46,12-27,30-42,47-51",credit:[{url:"https://www.flaticon.com/packs/entypo",label:"Daniel Bruce"},{url:"https://www.flaticon.com/packs/interface",label:"Chanut"}]}],PSH.AddonCommons.stickerSheets=[{sheet:"emojione",rowSize:16,colSize:16,size:144,credit:{url:"https://www.emojione.com/emoji/v3",label:"EmojiOne"}}],PSH.AddonCommons.sheets=PSH.AddonCommons.iconSheets.concat(PSH.AddonCommons.stickerSheets),PSH.AddonCommons.getSheet=function(e){for(var t in PSH.AddonCommons.sheets){var i=PSH.AddonCommons.sheets[t];if(i.sheet==e)return i}},PSH.AddonCommons.getGLCoord=function(e,t,i){i=i||[];var n=t%e.rowSize,r=t/e.rowSize|0;return i[0]=1/e.rowSize,i[1]=1/e.colSize,i[2]=1-n*i[0]-i[0],i[3]=1-r*i[1]-i[1],i},PSH.AddonCommons.glToIndex=function(e,t){var i=Math.round((1-t[2])/t[0]-1);return Math.round((1-t[3])/t[1]-1)*e.rowSize+i},PSH.AddonCommons.getCSSCoord=function(e,t){return"-"+100*(t%e.rowSize)+"% -"+100*(t/e.rowSize|0)+"%"},PSH.AddonCommons.getCSSSize=function(e,t){return 100*e.colSize+"% "+100*e.rowSize+"%"},PSH.AddonCommons.createSticker=function(e,t,i,n){return{pos:{start:e},r2d:n||!1,static:!0,tags:["sticker"],blocks:[{type:"image",size:32,src:t.sheet,texParams:PSH.AddonCommons.getGLCoord(t,i)}]}},PSH.AddonCommons.createText=function(e,t){return{pos:{start:e},r2d:t||!1,static:!0,tags:["text"],blocks:[{type:"text",content:"Text",fontsize:28,color:"#ffffff",fontweight:400}]}},PSH.AddonCommons.createHotspot=function(e,t){return{pos:{start:e},r2d:t||!1,static:t||!1,blocks:[{type:"image",size:32,src:"icons",hoverscale:1.2,texParams:[.125,.125,t?.25:.625,t?.5:.875]}]}},PSH.AddonCommons.createLabel=function(e){return{type:"text",content:e,fontsize:28,color:"#ffffff",fontweight:400,offset:{x:0,y:-48,z:0}}},PSH.AddonManager=function(n,r,o,a){var i,s,u,c,l,M,A=PSH.AddonCommons(),g=[],d=new PSH.LatLon,h=PSH.VRPointer(n,r,o,A),f=function(){g.forEach(function(e){e.on()}),n.addonChanged&&n.addonChanged.on(t),n.optionsChanged&&n.optionsChanged.on(y),n.gatherAddonData&&n.gatherAddonData.on(e),n.cancelChanges&&n.cancelChanges.on(p),c.down.on(T),a.refresh.on(y)},D=function(){g.forEach(function(e){e.off()}),s&&s.off(),i&&i.off(),h&&h.off(),n.addonChanged&&n.addonChanged.off(t),n.optionsChanged&&n.optionsChanged.off(y),n.gatherAddonData&&n.gatherAddonData.off(e),n.cancelChanges&&n.cancelChanges.off(p),c&&c.down.off(T),a&&a.refresh.off(y),l&&l.setSelected(!1),l=null},N=function(t){n.embeddedPlayer||(!1!==t&&(t=!0),a.options.editable&&t?(u&&u.options.sun?(s.getPosition("start").copyFrom(u.options.sun),s.on()):s.off(),u&&!u.options.flat&&i.on(),l&&l.setSelected(!0)):(i.off(),s.off(),l&&l.setSelected(!1)),g.forEach(function(e){e.image&&e.image.toggleIconOpacityMarker(a.options.editable&&t)}))},e=function(){n.currentPost.addons=[],g.forEach(function(e){n.currentPost.addons.push(e.getData())})},t=function(e){switch(e.cmd){case"add":var t=PSH.Addon(u,n,r,o,c,a,A,w).update(e.data).on(),i=function(e){a.options.editable&&(g.forEach(function(e){e.setSelected(e==t)}),l=t,n.addonChanged.trigger({cmd:"select",data:t}))};t.dropped.on(i),g.push(t),i();break;case"deselect":l&&(l.setSelected(!1),l=null);break;case"update":l.update(e.data).on();break;case"remove":l&&(l.off(),g.splice(g.indexOf(l),1),l=null)}},y=function(){N(),a.options.editable||g.forEach(function(e){e.setSelected(!1),l=null})},p=function(){M&&(u.addons=M),w.on(u,c)},T=function(){if(a.options.editable){var t=null;g.forEach(function(e){e.hover()&&(t=e)}),t&&l&&l!=t&&(l.setSelected(!1),l=null),t&&t.setSelected(!0)}},w={hoversCount:0,on:function(e,t){u=e,c=t,0<g.length&&(D(),g=[]),s&&s.off(),i&&i.off(),h&&h.off(),u.addons&&(M=JSON.parse(JSON.stringify(u.addons)),u.addons.forEach(function(e){var t=PSH.Addon(u,n,r,o,c,a,A,w).update(e);t.dropped.on(function(e){a.options.editable&&(g.forEach(function(e){e.setSelected(e==t)}),l=t,n.addonChanged.trigger({cmd:"select",data:t}))}),g.push(t)})),h.on(t),n.embeddedPlayer||(i=PSH.Addon(u,n,r,o,c,a,A,w).update({pos:{start:d.set(0,-1*u.options.heading+Math.PI).toV3()},horizontalOnly:!0,tags:["editor"],blocks:[{type:"image",name:"heading-gizmo",size:48,src:"gizmosgl",hoverscale:1.2,texParams:[.25,.25,.5,.75]},{type:"line",color:"#00ffff",startoffset:{lon:.05},endoffset:{lon:.1}},{type:"line",color:"#00ffff",startoffset:{lon:-.05},endoffset:{lon:-.1}}]}),(s=PSH.Addon(u,n,r,o,c,a,A,w).update({pos:{start:u.options.sun},interactive:!0,draggable:!0,tags:["editor"],blocks:[{type:"image",name:"sun-gizmo",size:48,main:!0,src:"gizmosgl",hoverscale:1.2,texParams:[.25,.25,.75,.75]}]})).moved.on(function(e){u.options.sun=e}),i.dropped.on(function(e){d.fromV3(e);var t=-1*(d.lon-Math.PI)%SQR.TWOPI;u.options.heading=t})),f(),N()},toggleEditorGizmos:N,setEnabled:function(e){e?(f(),N()):D()},off:function(){D(),g=[]}};return w},PSH.Addons.Billboard=function(i,t,n,r,o,a){var s=1,u=1,c=1,l=(new PSH.LatLon,(new SQR.V3).set(1,1,1)),M=new SQR.Transform;M.buffer=a.quad(),M.useDepth=!1,M.setBlending(!0,SQR.gl.ONE),M.uniforms={uOpacity:1,uTexture:SQR.Texture(null,{filter:SQR.gl.LINEAR,premultiplyAlpha:!0})},M.collider=SQR.Collider.Box({minX:-.5,maxX:.5,minY:-.5,maxY:.5,minZ:-.1,maxZ:.1});var A,g,d=new SQR.Transform,h={position:new SQR.V3};d.beforeDraw=function(){if(!0===g.r2d){var e=i.currentPost.options.flat?a.forwardVector:n.forward,t=SQR.V3.dot(e,d.globalPosition);h.position.copyFrom(e).mul(t),h.position.sub(d.globalPosition,h.position),d.lookAt=h}else d.lookAt=n},d.add(M);var f=function(o){if(-1==o.src.indexOf("."))a.load(o.src,function(e){l.set(1*o.size,1*o.size,1),M.uniforms.uTexture=e,M.shader=a.imageShader()});else{var e=0==o.src.indexOf("http")?o.src:a.BASE_URL+o.src;SQR.Loader.loadAssets([[e,"image"]],function(e){var t=o.size,i=e.image.naturalHeight/e.image.naturalWidth*o.size,n=e.image;if(o.process){var r=PSH.Addons.ImageProcess[o.process.func];r&&(n=r(n,t,i,o.process))}D(n,t,i)})}return y},D=function(e,t,i){return l.set(t,i,1),M.shader=a.imageShader(),M.uniforms.uTexture.setSource(e),y},N=function(){var e=1;if(!0!==g.static&&(e+=.5*r.zoom),d.position.copyFrom(g.pos[A.start]||g.pos.start),d.position.mul(a.RADIUS),i.currentPost&&i.currentPost.options.flat){var t=a.RADIUS/d.position.x;d.position.mul(t),e*=Math.min(1,1600/i.currentPost.options.originalSize.width)}M.scale.copyFrom(l).mul(e),A.offset&&M.position.copyFrom(A.offset).mul(e),A.rot&&M.rotation.copyFrom(A.rot),null!=A.opacity&&(M.uniforms.uOpacity=A.opacity),M.uniforms.uEditMode=o.options.editable?c:0};M.beforeDraw=function(){N()};var y={on:function(){return t.add(d),y},off:function(){return t.remove(d),y},hitTest:function(e){return t.contains(d)&&SQR.Intersection.rayTest(e.ray,M)},hover:function(e){s=e&&A.hoverscale||1,u+=.2*(s-u),d.scale.x=u,d.scale.y=u},load:f,update:function(e,t){g=e,A=t,N(),M.uniforms.uTextureParams=A.texParams||a.SINGLE_TEXTURE,A.src&&f(A)},setTexture:D,get data(){return A},get size(){return l},setFromSheet:function(e,t){A.src=e,A.texParams=t,a.load(e,function(e){M.uniforms.uTexture=e,M.uniforms.uTextureParams=t})},setOpacity:function(e){e=Math.clamp01(e),A.opacity=e,M.uniforms.uOpacity=e},toggleIconOpacityMarker:function(e){c=e?1:0},setSize:function(e){A.size=e,l.set(e,e,1),N()},setRotation:function(e){A.rot||(A.rot=new SQR.V3),A.rot.z=e,N()},setPosition:N};return y},PSH.Addons.ImageProcess={round:function(e,t,i,n){var r=2*window.devicePixelRatio,o=n.borderwidth*r;t*=r,i*=r;var a=EXT.create("canvas"),s=a.getContext("2d");return a.width=t,a.height=i,s.drawImage(e,0,0,e.width,e.height,0,0,t,i),s.globalCompositeOperation="destination-in",s.fillStyle="red",s.beginPath(),s.arc(t/2,i/2,Math.min(t,i)/2-o/2,0,SQR.TWOPI),s.fill(),s.globalCompositeOperation="source-over",s.strokeStyle=n.bordercolor,s.lineWidth=o,s.beginPath(),s.arc(t/2,i/2,Math.min(t,i)/2-o/2,0,SQR.TWOPI),s.stroke(),a}},PSH.LatLon=function(e,t){this.set(e,t),this._vec=new SQR.V3},PSH.LatLon._vecxz=new SQR.V3,PSH.LatLon.prototype.copyFrom=function(e){return e&&e.lat&&(this.lat=e.lat),e&&e.lon&&(this.lon=e.lon),this},PSH.LatLon.prototype.set=function(e,t){return this.lat=e||0,this.lon=t||0,this},PSH.LatLon.prototype.mul=function(e){return this.lat*=e,this.lon*=e,this},PSH.LatLon.prototype.add=function(e){return e&&e.lat&&(this.lat+=e.lat),e&&e.lon&&(this.lon+=e.lon),this},PSH.LatLon.prototype.toV3=function(){var e=Math.PI/2-this.lat;return this._vec.set(Math.sin(e)*Math.sin(this.lon),Math.cos(e),Math.sin(e)*Math.cos(this.lon)),this._vec},PSH.LatLon.prototype.fromV3=function(e){if(this._vec.copyFrom(e).norm(),this.lon=-Math.atan2(-this._vec.z,-this._vec.x)-Math.PI/2,this.lon<-Math.PI&&(this.lon+=2*Math.PI),Math.abs(e.y)<1e-5)this.lat=0;else{var t=PSH.LatLon._vecxz.set(this._vec.x,0,this._vec.z).norm();this.lat=Math.acos(SQR.V3.dot(t,this._vec)),this._vec.y<0&&(this.lat*=-1)}return this},PSH.LatLon.prototype.offsetVector=function(e){this.tmpLatLon||(this.tmpLatLon=new PSH.LatLon);var t=this.tmpLatLon;return t.fromV3(e),t.add(this),e.copyFrom(t.toV3()),e},PSH.Addons.Line=function(e,t,i,n,r,o){var a,s=Simplrz.touch&&window.innerWidth<768?2.5:1,u=new PSH.LatLon,c=new PSH.LatLon,l=new PSH.LatLon,M=new PSH.LatLon,A=0,g=0,d=new SQR.Transform;d.shader=o.lineShader(),d.buffer=SQR.Buffer().layout({aPosition:3},2).setMode(SQR.gl.LINES),d.useDepth=!1,d.setBlending(!0);var h,f,D=new SQR.Color;d.uniforms={uColor:D};d.beforeDraw=function(){!function(){var e=1;!0!==f.static&&(e+=.5*n.zoom),l.copyFrom(h.startoffset).mul(e),M.copyFrom(h.endoffset).mul(e),u.fromV3(f.pos[h.start]||f.pos.start).add(l),c.fromV3(f.pos[h.end]||f.pos.start).add(M),g=u.lon,a&&a();var t=u.toV3().mul(o.RADIUS*s),i=c.toV3().mul(o.RADIUS*s);d.buffer.data("aPosition",[t.x,t.y,t.z,i.x,i.y,i.z]).update()}()};var N={on:function(){return t.add(d),N},update:function(e,t){h=t,f=e,D.setHex(h.color||"#ffffff"),D.a=h.opacity||D.a,a=f.bounce?function(){var e=Math.abs(n.delta.x)>Math.abs(A);A+=(n.delta.x-A)*(e?.15:.05),u.lon=g+A*o.EASE_DIST}:null},off:function(){return t.remove(d),N}};return N},PSH.Addons.Text=function(e,t,i,n,r,o){var h,f,D=PSH.Addons.Billboard(e,t,i,n,r,o),a=D.update;D.update=function(e,t){a(e,t);var i=t.font||"Arial";PSH.FontLoader.load(i,function(){s(e,t,i)})};var s=function(e,i,t){var n=Math.max(window.devicePixelRatio,2);h||(h=EXT.create("canvas"),f=h.getContext("2d"));var r=Math.round((i.fontsize||14)*n),o=Math.round(1.1*r),a=Math.round(.15*r),s=Math.round(.25*r),u=i.padding||[a,s,a,s],c=i.content.split("\n"),l=0,M=u[0]+.5*o,A=(i.fontweight||400)+" "+r+"px "+t+", sans-serif";f.font=A,c.forEach(function(e){var t=f.measureText(e);l=Math.max(l,t.width)}),h.width=u[1]+u[3]+l,h.height=u[0]+u[2]+c.length*o,i.bgcolor&&i.content&&(f.fillStyle=i.bgcolor,f.fillRect(1,1,h.width-2,h.height-2)),f.textBaseline="middle",f.fillStyle=i.color||"#000000",f.font=A,f.textAlign=i.align||"left",i.blend&&(f.globalCompositeOperation=i.blend),c.forEach(function(e){var t=u[3];"center"==i.align&&(t=.5*h.width),"right"==i.align&&(t=h.width-t),f.fillText(e,t,M),M+=o});var g=h.width/n,d=h.height/n;D.setTexture(h,g,d)};return D},PSH.Debug=function(){var t=EXT.select(".debug");return{logNode:function(e){t&&t.appendChild(e)},log:function(e){t&&(t.innerHTML+="<div class=info>"+e+"</div>")}}}(),PSH.Filters=function(e){var n={};e.config.filters.forEach(function(e){var t="none"==e.name?{doNotCompile:!0}:{doNotCompile:!0,directives:[{name:e.name.toUpperCase()}]};n[e.name]=SQR.Shader(PSH.GLSL.blit,t),n[e.name]._compiled=!1});return{getBlit:function(e){var t,i=n[e];return(t=i)._compiled||(t.compile(),t.inspect(),t._compiled=!0),t}}},PSH.FontLoader=function(){var n=!1,r=!1,o=["Arial","Times New Roman","Georgia","Lucida Console","Comic Sans MS"],a={},s=[],i=function(e){a[e].forEach(function(e){e()})},u=function(e,t){o.push(e),setTimeout(i,1,e)},c=function(e,t){o.push(e),setTimeout(i,1,e)};return{load:function(e,t){if(-1<o.indexOf(e))t();else if(null==a[e]){a[e]=[t];var i=function(){WebFont.load({fontactive:u,fontinactive:c,google:{families:[e]}})};r?i():(s.push(i),n||function(e){n=!0;var t=EXT.create("script"),i=document.scripts[0];t.src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",t.async=!0,t.addEventListener("load",function(){s.forEach(function(e){e()}),r=!0}),i.parentNode.insertBefore(t,i)}())}else a[e].push(t)}}}(),PSH.Fullscreen=function(t,e){var i={onChange:new Trigger},n=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];i.enabled=!Simplrz.iOS&&!!(document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.fullscreenEnabled),i.activate=function(){var e=t;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),r(!0)},i.deactivate=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()};var r=function(e){for(var t in n){var i=n[t];e?document.addEventListener(i,o,!1):document.removeEventListener(i,o,!1)}},o=function(){null!=(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement)?i.onChange.trigger(!0):(i.onChange.trigger(!1),r(!1),e.vrMode.value=!1,e.fullscreenMode.value=!1)};return i.toggle=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?(i.deactivate(),!1):(i.activate(),!0)},i},PSH.GA=function(s){var e={pageview:function(e){var t=s.user&&s.user.isAdmin(),i=PSH.LOCAL;e=e||"",!window.ga||t||i||ga("send","pageview","/"+e+document.location.search)},event:function(e,t,i,n){var r=s.user&&s.user.isAdmin(),o=PSH.LOCAL;if(window.ga&&!r&&!o){var a={eventCategory:e,eventAction:t};null!=i&&(a.eventLabel=i),null!=n&&(a.eventValue=n),ga("send","event",a)}}},t=function(e){gtag("event","conversion",{send_to:s.config.track.aw+"/"+e,transaction_id:"",event_callback:function(){}})};return e.conversion=function(e){switch(e){case"register":PSH.GA.event("register","success"),t(s.config.track.awReg);break;case"pro-stripe-month":t(s.config.track.awProSTM);break;case"pro-stripe-year":t(s.config.track.awProSTY);break;case"pro-paypal":t(s.config.track.awProPP)}},e},PSH.Glut=function(){var t=-1,i=function(){return function(){if(SQR&&SQR.gl&&-1==t){var e=SQR.gl.getExtension("WEBGL_debug_renderer_info");t=SQR.gl.getParameter(e.UNMASKED_RENDERER_WEBGL)}else t=null}(),t};return{getGPU:i,getIOSGPUModel:function(){var e=i();return e?parseInt(e.replace(/Apple A|GPU|X/,"").trim()):0},isOldIOS:function(){return Simplrz.iOS&&screen.width<=320}}}(),PSH.IEFix=function(e){var t;if(void 0!==window.DOMTokenList&&((t=document.createElement("div")).classList.add("t"),!0!==t.classList.toggle("t",!0)||!t.classList.contains("t")||!1!==t.classList.toggle("o",!1)||t.classList.contains("o"))){console.log("Polyfilling classList.toggle"),Simplrz.ie=!0;var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){if(!0===t)this.add(e);else{if(!1!==t)return i.call(this,e);this.remove(e)}return this.contains(e)}}},PSH.ImageCache=function(){var a={};return{load:function(e,t,i,n){return function(e,t,i,n){var r=new Image;a[e]=r;var o=function(){r.removeEventListener("load",o),t(r)};return r.crossOrigin="Anonymous",r.addEventListener("load",o),r.src=(PSH.LOCAL,e),r.abort=function(){r.removeEventListener("load",o)},r}(e,t)},replace:function(e,t){"string"==typeof t?(i=new Image,i.src=t):i=t,a[e]&&(a[e]=i)}}}(),PSH.ImageUtil={testImage:function(e,t,i){var n=new Image,r=function(){n.removeEventListener("error",a),n.removeEventListener("load",o)},o=function(){r(),t(n)},a=function(e){r(),i(e)};n.addEventListener("load",o),n.addEventListener("error",a),n.src=e}},PSH.Keyboard=function(){var t={CURSOR_UP:40,CURSOR_DOWN:38,SPACE_KEY:32};return t.enter=new Trigger,t.space=new Trigger,t.left=new Trigger,t.right=new Trigger,t.esc=new Trigger,document.addEventListener("keyup",function(e){switch(e.keyCode){case 13:t.enter.trigger(e);break;case 32:t.space.trigger(e);break;case 37:t.left.trigger(e);break;case 39:t.right.trigger(e);break;case 27:t.esc.trigger(e)}}),t.c=function(e){return e.charCodeAt(0)},t}(),PSH.MathUtil={dms2Float:function(e,t,i,n){var r=e+t/60+i/3600,o=n?n.substring(0,1).toLowerCase():"s";return"s"!=o&&"w"!=o||(r*=-1),r},nextNpot:function(e){for(var t=256;t<e;)t*=2;return Math.min(8192,t)},isNpot:function(e){return e&&0==(e&e-1)},getFovAtDistance:function(e,t){var i=.5*e/t;return Math.atan(i)/Math.PI*180*2}},PSH.QueryParams=function(){var i,n,e=function(){i||(i={},n=[],document.location.search.substring(1).split("&").forEach(function(e){var t=e.split("=");n.push(t[0]),i[t[0]]=t[1]}))},t=function(e){return null!=i[e]};return e(),{read:e,has:function(e){return-1<n.indexOf(e)},bool:function(e){return t(e)&&"0"!=i[e]&&"false"!=i[e]},num:function(e){return t(e)?parseFloat(i[e]):0},val:function(e){return t(e)?i[e]:null},list:function(){return i},override:function(e,t){i[e]=t},cookie:function(e){var t=document.cookie,i=e+"=",n=t.indexOf("; "+i);if(-1==n){if(0!=(n=t.indexOf(i)))return null}else{n+=2;var r=document.cookie.indexOf(";",n);-1==r&&(r=t.length)}return decodeURI(t.substring(n+i.length,r))},setCookie:function(e,t,i){i=i||2592e3,document.cookie=e+"="+t+";path=/;max-age="+i},unsetCookie:function(e){document.cookie=e+"=;path=/;max-age="}}},PSH.QueryParams.parseQueryString=function(e){e=(e=e.replace("?","")).split("&");var t={};for(var i in e){var n=e[i].split("=");t[n[0]]=n[1]}return t},PSH.Scroll=function(){var e=!1;return{get locked(){return e},lock:function(){window.scrollTo(0,0),PSH.Scroll.freeze(),VirtualScroll.lockTouch(),e=!0},toggle:function(e){e?PSH.Scroll.lock():PSH.Scroll.unlock()},freeze:function(){setTimeout(function(){document.body.setAttribute("virtualscroll","1")},1)},unlock:function(){document.body.removeAttribute("virtualscroll"),VirtualScroll.unlockTouch(),e=!1}}}(),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),PSH.StringFormat={desc:function(e,t,o,i){return e&&""!=e&&"undefined"!=e?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\n(\n)+/g,"\n\n")).replace(/(<([^>]*?)>)/gi,"")).replace(/\*\*(.*?)\*\*/g,"<h3>$1</h3>")).replace(/\*(.*?)\*/g,"<em>$1</em>")).replace(/(^|\s)@([a-zA-Z0-9_]+)/g,'$1<span data-user="$2" class="mention">@$2</span>')).replace(/(^|\s)-#([a-zA-Z0-9_]+)/g,"")).replace(/(^|\s)#([a-zA-Z0-9_]+)/g,'$1<span data-tag="$2" class="tag">#$2</span>')).replace(/:\)/g,"&#x1F603;")).replace(/<3/g,"&#x2764;&#xFE0F;")).replace(/\(y\)/gi,"&#x1F44D;")).replace(/(http(s)?:\/\/.)?(www\.)?([-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6})\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,function(e){var t=-1<e.indexOf("kuula.co")&&-1==e.indexOf("blog.kuula.co"),i=-1==e.indexOf("http")&&-1==e.indexOf("www")&&(e.indexOf(".jpg")==e.length-4||e.indexOf(".png")==e.length-4),n=t?"":'target="_blank"',r=e;return t?r=r.replace(/^.*?kuula.co/,""):-1==r.indexOf("http")&&(r="http://"+r),e=e.replace(/(^|\s)([a-zA-Z0-9])*:\/\//g,""),!o&&!t||i?e:'<a href="'+r+'" class="link" '+n+">"+e+"</a>"}),Application.hijackLinks.trigger(t),t.innerHTML=e,PSH.StringFormat.setLinks(t,i),e):""},setLinks:function(e,i){var t=e.ext.selectAll(".tag");t.forEach(function(e){var t="explore/"+e.getAttribute("data-tag");e.ext.on("click",function(){i?window.open("https://kuula.co/"+t):Application.navigate.trigger(t)})}),(t=e.ext.selectAll(".mention")).forEach(function(e){var t="profile/"+e.getAttribute("data-user");e.ext.on("click",function(){i?window.open("https://kuula.co/"+t):Application.navigate.trigger(t)})})},getYoutubeId:function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!(!t||11!=t[7].length)&&t[7]},sanitize:function(e){return e=(e=(e=(e=(e=e.replace(/<br><div>/g,"\n")).replace(/<br>/g,"\n")).replace(/<div>/g,"\n")).replace(/(<([^>]*?)>)/gi,"")).replace(/\n(\n)+/g,"\n\n")},validateUserName:function(e,t){var i=e.value.trim();return""!=i&&(!(""==i||!/^[a-zA-Z0-9]+$/.test(i))||(e.classList.add("error"),t.notification.trigger({message:"User name can only contain latin alphabet characters or numbers and no spaces.",alert:!0,time:1e4}),!1))},tags:function(e){return e.replace(/#([^\s]*)/g,'<span data-tag="$1" class="tag">#$1</span>')},links:function(e){return e.replace(/(https?:\/\/)([^\s]*)/g,'<a href="$1$2" class="lowercase" target="_blank">$2</a>')},quotes:function(e){return e},stripTags:function(e){return e.replace(/(<([^>]*?)>)/gi,"")},stripFormatting:function(e){return PSH.StringFormat.stripTags(e).replace("&nbsp;"," ").replace(/\*/g,"").replace(/-#([^\s]*)/g,"")},sanitizeURL:function(e){return PSH.StringFormat.stripTags(e.replace("javascript:",""))},isImageURL:function(e){return e.match(/^.+googleusercontent|dropbox$/)||e.match(/^.+jpg|jpeg|png|gif$/)},isAudioURL:function(e){return e.match(/^.+ogg|mp3|opus$/)},formatCameraInfo:function(e){if(!e||0==e.length)return"";var t=e[0];""!=t&&(t+="<br>");var i=[];return e.forEach(function(e,t){0<t&&""!=e&&-1==e.indexOf("NaN")&&i.push(e)}),t+(0<i.length?i.join(" / "):"")},capitalize:function(e){if(!e)return"";var t=e.split(" "),i=[];return t.forEach(function(e){var t=e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase();i.push(t)}),i.join(" ").trim()},ellipsis:function(e,t,i){var n=e.length>t,r=n?e.substr(0,t-1):e;return r=i&&n?r.substr(0,r.lastIndexOf(" ")):r,n?r+"...":r},linkTags:function(e,i){e.ext.selectAll(".tag").forEach(function(e){var t="explore/"+e.getAttribute("data-tag");e.ext.on("click",function(){i?window.open("https://kuula.co/"+t):Application.navigate.trigger(t)})})},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},now:function(){return(new Date).getTime()/1e3|0},date:function(e){var t=new Date(e),i=t.getDate();i<10&&(i="0"+i);var n=t.getMonth(),r=t.getFullYear();switch(n){case 0:n="Jan";break;case 1:n="Feb";break;case 2:n="Mar";break;case 3:n="Apr";break;case 4:n="May";break;case 5:n="Jun";break;case 6:n="Jul";break;case 7:n="Aug";break;case 8:n="Sept";break;case 9:n="Oct";break;case 10:n="Nov";break;case 11:n="Dec"}return n+" "+i+" "+r},number:function(e,t){return e=parseInt(e||0),t?1e4<=e?Math.ceil(e/1e3)+"K":e:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},age:function(e,o){if(e<=0)return e=(new Date).getTime()/1e3-e,PSH.StringFormat.date(1e3*e);var t=function(e,t,i){var n=Math.floor(e/t),r=1==n?i:i+"s";return n+(o?i.substring(0,1):" "+r+" ago")};return 31536e3<e?t(e,31536e3,"year"):2592e3<e?t(e,2592e3,"month"):604800<e?t(e,604800,"week"):86400<e?t(e,86400,"day"):3600<e?t(e,3600,"hour"):60<e?t(e,60,"minute"):"Just now"},parseMediaLink:function(e){if(-1<e.indexOf("<iframe")){var t=EXT.create("div");return t.innerHTML=e,e=t.ext.select("iframe").getAttribute("src")}var i=document.createElement("a");i.href=e;var n=PSH.QueryParams.parseQueryString(i.search),r=i.pathname.replace("/","");return-1<e.indexOf("youtube.com/embed")||-1<e.indexOf("player.vimeo.com/video")?e:-1<i.hostname.indexOf("youtube")?"https://www.youtube.com/embed/"+n.v+"?rel=0&showinfo=0&modestbranding=1&autoplay=1&playsinline=1":"youtu.be"==i.hostname?"https://www.youtube.com/embed/"+r+"?rel=0&showinfo=0&modestbranding=1&autoplay=1&playsinline=1":-1<i.hostname.indexOf("vimeo")?"https://player.vimeo.com/video/"+i.pathname.replace("/","")+"?autoplay=1&title=0&byline=0&portrait=0":-1<i.hostname.indexOf("matterport")?e:!!PSH.StringFormat.isImageURL(e)&&e}},PSH.AddonCard=function(A){var r,i=!1,n=EXT.select("#post")||EXT.select(".fs"),o=function(e){e.target==r.select(".close-btn")&&A.hideAddonCard.trigger()},g=function(){i&&(r.select(".content").innerHTML="",r.select(".media").innerHTML="",r.content.ext.off("click",o),r.detach(),A.addonCardOpen.value=!1,A.lockedMode.value=!1,i=!1,VirtualScroll.lockTouch(),PSH.Keyboard.esc.off(g),Application.resize.off(d))},d=function(){},h=function(){return 900<=window.innerWidth?640:600<=window.innerWidth?540:window.innerWidth},f=function(e){var t;if(900<=window.innerWidth)t=Math.min(window.innerHeight,600);else if(A.embeddedPlayer)t=window.innerHeight;else{var i=Application.route.value.parts[2]==PSH.COLLECTION?46:0;t=window.innerHeight-PSH.Responsive.getMobilePostHeight()-i}return e&&(t-=61),t},a=function(o){var a=r.select("article"),t="";(o.title&&(t+="<h2>"+o.title+"</h2>"),o.text)&&o.text.split("\n").forEach(function(e){t+="<p>"+e+"</p>"});if(o.linkurl){var s=o.linkurl,e=o.linklabel;e||30<(e=s.replace("/https?:///","")).length&&(e=e.substring(0,30)+"..."),t+="<a target='_blank' href='"+s+"'>"+e+"</a>"}var i=!1;if(o.media){s=PSH.StringFormat.parseMediaLink(o.media);var u,c,n=PSH.StringFormat.isImageURL(s),l=r.select(".media");if(n){u=EXT.create("div"),A.showPreloader&&(A.showPreloader.value=!0);var M=function(e){A.showPreloader&&(A.showPreloader.value=!1),l.appendChild(u);var t=f(o.text||o.linkurl);u.style.backgroundImage="url("+s+")";var i=e.naturalHeight/e.naturalWidth*h();i=Math.min(t,i);var n=e.naturalWidth/e.naturalHeight,r=Math.floor(n*i);h()>=r&&!o.text&&!o.linkurl?(a.style.width=r+"px",u.style.backgroundSize="cover"):(a.style.width="",u.style.backgroundSize=""),c=i,l.style.height=c+"px",e.removeEventListener("load",M),e=null,D(a,o,c)};i=!0,PSH.ImageUtil.testImage(s,M,function(e){A.showPreloader&&(A.showPreloader.value=!1);var t="Image loading error";A.notification?A.notification.trigger({message:t,alert:!0,time:-1}):console.error(t,s),g()})}else(u=EXT.create("iframe")).setAttribute("frameborder","0"),u.setAttribute("allowfullscreen","true"),u.setAttribute("allow","autoplay"),u.src=s,l.appendChild(u),c=h()*(9/16),l.style.height=c+"px"}r.select(".content").innerHTML=t,a.classList.toggle("with-media",o.media),a.classList.add("in-transition"),a.style.opacity=0,d(),i||D(a,o,c)},D=function(e,t,i){window.innerWidth<=600&&!t.media?e.style.height=f()+"px":!t.media||t.text||t.linkurl||(e.style.height=i+"px"),e.ext.rotX=20,e.ext.z=-200,e.ext.transform(),e.ext.transition({transform:{rotX:0,z:0},opacity:1},200,"ease-out",100,function(){e.classList.remove("in-transition")})};A.showAddonCard.on(function(e){if(!i&&!e.edit){var t=A.publicTemplates.addoncard;(r=(new Template).set(t)).content.ext.show("flex"),r.content.ext.on("click",o),r.attachTo(n),a(e.data),A.addonCardOpen.value=!0,A.lockedMode.value=!0,i=!0,VirtualScroll.unlockTouch(),PSH.Keyboard.esc.on(g),Application.resize.on(d)}}),A.hideAddonCard.on(g),Application.route.on(g)};